!function(a){a.WinJS=a.WinJS||{},WinJS.Utilities=WinJS.Utilities||{},WinJS.Utilities._writeProfilerMark=function(b){a.msWriteProfilerMark&&msWriteProfilerMark(b)}}(this),WinJS.Utilities._writeProfilerMark("WinJS.2.1 2.0.1.WinJS.2014.6.21 base.js,StartTM"),function(a,b){"function"==typeof define&&define.amd?define([],b):b()}(this,function(){var require,define;return function(){"use strict";function a(a,b){var c=a.split("/");return c.pop(),b.map(function(a){if("."===a[0]){var b=a.split("/"),d=c.slice(0);return b.forEach(function(a){".."===a?d.pop():"."!==a&&d.push(a)}),d.join("/")}return a})}function b(a){return a.map(function(a){var b=d[a];if(!b)throw new Error("Undefined dependency: "+a);return b.resolved||(b.resolved=c(b.dependencies,b.factory)),b.resolved})}function c(a,c){var d=b(a);return c&&c.apply?c.apply(null,d):c}var d={};define=function(b,c,e){Array.isArray(c)||(e=c,c=[]),d[b]={dependencies:a(b,c),factory:e}},require=function(a,b){Array.isArray(a)||(a=[a]),c(a,b)}}(),define("amd",function(){}),function(a){define("WinJS/Core/_Global",a)}(this),define("WinJS/Core/_BaseCoreUtils",["./_Global"],function(a){"use strict";function b(a){return a.supportedForProcessing=!0,a}var c=!!a.Windows;return{_hasWinRT:c,markSupportedForProcessing:b,_setImmediate:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)}}}),define("WinJS/Core/_WriteProfilerMark",[],function(){"use strict";return WinJS.Utilities._writeProfilerMark}),define("WinJS/Core/_Base",["./_Global","./_BaseCoreUtils","./_WriteProfilerMark"],function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=Object.keys(b);for(e=0,f=g.length;f>e;e++){var h=g[e],i=95!==h.charCodeAt(0),j=b[h];!j||"object"!=typeof j||void 0===j.value&&"function"!=typeof j.get&&"function"!=typeof j.set?i?a[h]=j:(d=d||{},d[h]={value:j,enumerable:i,configurable:!0,writable:!0}):(void 0===j.enumerable&&(j.enumerable=i),c&&j.setName&&"function"==typeof j.setName&&j.setName(c+"."+h),d=d||{},d[h]=j)}d&&Object.defineProperties(a,d)}return function(b){function e(a,b,c){var e=a||{};if(b)for(var f=b.split("."),g=0,h=f.length;h>g;g++){var i=f[g];e[i]||Object.defineProperty(e,i,{value:{},writable:!1,enumerable:!0,configurable:!0}),e=e[i]}return c&&d(e,c,b||"<ANONYMOUS>"),e}function f(b,c){return e(a,b,c)}function g(a){var b,d,e=i.uninitialized;return{setName:function(a){b=a},get:function(){switch(e){case i.initialized:return d;case i.uninitialized:e=i.working;try{c("WinJS.Namespace._lazy:"+b+",StartTM"),d=a()}finally{c("WinJS.Namespace._lazy:"+b+",StopTM"),e=i.uninitialized}return a=null,e=i.initialized,d;case i.working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(a){switch(e){case i.working:throw"Illegal: reentrancy on initialization";default:e=i.initialized,d=a}},enumerable:!0,configurable:!0}}a[b]||(a[b]=Object.create(Object.prototype));var h=a[b];h.Namespace||(h.Namespace=Object.create(Object.prototype));var i={uninitialized:1,working:2,initialized:3};Object.defineProperties(h.Namespace,{defineWithParent:{value:e,writable:!0,enumerable:!0,configurable:!0},define:{value:f,writable:!0,enumerable:!0,configurable:!0},_lazy:{value:g,writable:!0,enumerable:!0,configurable:!0}})}("WinJS"),function(a){function c(a,c,e){return a=a||function(){},b.markSupportedForProcessing(a),c&&d(a.prototype,c),e&&d(a,e),a}function e(a,e,f,g){if(a){e=e||function(){};var h=a.prototype;return e.prototype=Object.create(h),b.markSupportedForProcessing(e),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0,enumerable:!0}),f&&d(e.prototype,f),g&&d(e,g),e}return c(e,f,g)}function f(a){a=a||function(){};var b,c;for(b=1,c=arguments.length;c>b;b++)d(a.prototype,arguments[b]);return a}a.Namespace.define("WinJS.Class",{define:c,derive:e,mix:f})}(WinJS),{Namespace:WinJS.Namespace,Class:WinJS.Class}}),define("WinJS/Core/_ErrorFromName",["./_Base"],function(a){"use strict";return a.Namespace.define("WinJS",{ErrorFromName:a.Class.derive(Error,function(a,b){this.name=a,this.message=b||a},{},{supportedForProcessing:!1})}),WinJS.ErrorFromName}),define("WinJS/Core/_Events",["./_Base"],function(a){"use strict";function b(a){var b="_on"+a+"state";return{get:function(){var a=this[b];return a&&a.userHandler},set:function(c){var d=this[b];c?(d||(d={wrapper:function(a){return d.userHandler(a)},userHandler:c},Object.defineProperty(this,b,{value:d,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(a,d.wrapper,!1)),d.userHandler=c):d&&(this.removeEventListener(a,d.wrapper,!1),this[b]=null)},enumerable:!0}}function c(){for(var a={},c=0,d=arguments.length;d>c;c++){var e=arguments[c];a["on"+e]=b(e)}return a}var d=a.Class.define(function(a,b,c){this.detail=b,this.target=c,this.timeStamp=Date.now(),this.type=a},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),e={_listeners:null,addEventListener:function(a,b,c){c=c||!1,this._listeners=this._listeners||{};for(var d=this._listeners[a]=this._listeners[a]||[],e=0,f=d.length;f>e;e++){var g=d[e];if(g.useCapture===c&&g.listener===b)return}d.push({listener:b,useCapture:c})},dispatchEvent:function(a,b){var c=this._listeners&&this._listeners[a];if(c){var e=new d(a,b,this);c=c.slice(0,c.length);for(var f=0,g=c.length;g>f&&!e._stopImmediatePropagationCalled;f++)c[f].listener(e);return e.defaultPrevented||!1}return!1},removeEventListener:function(a,b,c){c=c||!1;var d=this._listeners&&this._listeners[a];if(d)for(var e=0,f=d.length;f>e;e++){var g=d[e];if(g.listener===b&&g.useCapture===c){d.splice(e,1),0===d.length&&delete this._listeners[a];break}}}};return a.Namespace.define("WinJS.Utilities",{_createEventProperty:b,createEventProperties:c,eventMixin:e}),{_createEventProperty:b,createEventProperties:c,eventMixin:e}}),define("WinJS/Core/_Resources",["./_Global","./_BaseCoreUtils","./_Base","./_Events"],function(a,b,c,d){"use strict";function e(a){return WinJS.Resources.getString("ms-resource://"+g+"/"+a)}function f(a){var b=arguments;return b.length>1&&(a=a.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(a,c,d,e,g,h){if(g||h)throw f(o.malformedFormatStringInput,g||h);return c&&"{"||d&&"}"||b[(0|e)+1]})),a}var g="WinJS.2.1",h="Developer.";0===g.indexOf(h)&&(g=g.substring(h.length));var i,j,k=!1,l="contextchanged",m=c.Class.mix(c.Class.define(null,{},{supportedForProcessing:!1}),d.eventMixin),n=new m,o={get malformedFormatStringInput(){return e("base/malformedFormatStringInput").value}};c.Namespace.define("WinJS.Resources",{_getWinJSString:e}),c.Namespace.define("WinJS.Resources",{addEventListener:function(a,c,d){if(b.hasWinRT&&!k&&a===l)try{var e=WinJS.Resources._getResourceContext();e?e.qualifierValues.addEventListener("mapchanged",function(a){WinJS.Resources.dispatchEvent(l,{qualifier:a.key,changed:a.target[a.key]})},!1):Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(a){WinJS.Resources.dispatchEvent(l,{qualifier:a.key,changed:a.target[a.key]})},!1),k=!0}catch(f){}n.addEventListener(a,c,d)},removeEventListener:n.removeEventListener.bind(n),dispatchEvent:n.dispatchEvent.bind(n),_formatString:f,_getStringWinRT:function(a){if(!i){var b=Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{i=b.getSubtree("Resources")}catch(c){}i||(i=b)}var d,e,f;try{var g=WinJS.Resources._getResourceContext();f=g?i.getValue(a,g):i.getValue(a),f&&(d=f.valueAsString,void 0===d&&(d=f.toString()))}catch(c){}if(!d)return{value:a,empty:!0};try{e=f.getQualifierValue("Language")}catch(c){return{value:d}}return{value:d,lang:e}},_getStringJS:function(b){var c=a.strings&&a.strings[b];return"string"==typeof c&&(c={value:c}),c||{value:b,empty:!0}},_getResourceContext:function(){return a.document&&(j||(j=Windows.ApplicationModel.Resources.Core.ResourceContext.getForCurrentView())),j}}),Object.defineProperties(WinJS.Resources,d.createEventProperties(l));var p;return WinJS.Resources.getString=function(a){return(p=p||(WinJS.Utilities.hasWinRT?WinJS.Resources._getStringWinRT:WinJS.Resources._getStringJS))(a)},{_formatString:f,_getWinJSString:e}}),define("WinJS/Core/_Trace",["./_Global"],function(a){"use strict";function b(a){return a}return{_traceAsyncOperationStarting:a.Debug&&Debug.msTraceAsyncOperationStarting&&Debug.msTraceAsyncOperationStarting.bind(a.Debug)||b,_traceAsyncOperationCompleted:a.Debug&&Debug.msTraceAsyncOperationCompleted&&Debug.msTraceAsyncOperationCompleted.bind(a.Debug)||b,_traceAsyncCallbackStarting:a.Debug&&Debug.msTraceAsyncCallbackStarting&&Debug.msTraceAsyncCallbackStarting.bind(a.Debug)||b,_traceAsyncCallbackCompleted:a.Debug&&Debug.msTraceAsyncCallbackCompleted&&Debug.msTraceAsyncCallbackCompleted.bind(a.Debug)||b}}),define("WinJS/Promise/_StateMachine",["../Core/_Global","../Core/_BaseCoreUtils","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Trace"],function(a,b,c,d,e,f){"use strict";function g(){}function h(a,b){var c;c=b&&"object"==typeof b&&"function"==typeof b.then?I:M,a._value=b,a._setState(c)}function i(a,b,c,d,e,f){return{exception:a,error:b,promise:c,handler:f,id:d,parent:e}}function j(a,b,c,d){var e=c._isException,f=c._errorId;return i(e?b:null,e?null:b,a,f,c,d)}function k(a,b,c){var d=c._isException,e=c._errorId;return u(a,e,d),i(d?b:null,d?null:b,a,e,c)}function l(a,b){var c=++Q;return u(a,c),i(null,b,a,c)}function m(a,b){var c=++Q;return u(a,c,!0),i(b,null,a,c)}function n(a,b,c,d){var e=f._traceAsyncOperationStarting("WinJS.Promise.done");t(a,{c:b,e:c,p:d,asyncOpID:e})}function o(a,b,c,d){a._value=b,r(a,b,c,d),a._setState(O)}function p(b,c){var d=b._value,e=b._listeners;if(e){b._listeners=null;var g,h;for(g=0,h=Array.isArray(e)?e.length:1;h>g;g++){var i=1===h?e:e[g],j=i.c,k=i.promise;if(f._traceAsyncOperationCompleted(i.asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_SUCCESS),k){f._traceAsyncCallbackStarting(i.asyncOpID);try{k._setCompleteValue(j?j(d):d)}catch(l){k._setExceptionValue(l)}finally{f._traceAsyncCallbackCompleted()}k._state!==I&&k._listeners&&c.push(k)}else W.prototype.done.call(b,j)}}}function q(b,c){var d=b._value,e=b._listeners;if(e){b._listeners=null;var g,h;for(g=0,h=Array.isArray(e)?e.length:1;h>g;g++){var i=1===h?e:e[g],k=i.e,l=i.promise,m=a.Debug&&(d&&d.name===D?Debug.MS_ASYNC_OP_STATUS_CANCELED:Debug.MS_ASYNC_OP_STATUS_ERROR);if(f._traceAsyncOperationCompleted(i.asyncOpID,m),l){var n=!1;try{k?(f._traceAsyncCallbackStarting(i.asyncOpID),n=!0,k.handlesOnError||r(l,d,j,b,k),l._setCompleteValue(k(d))):l._setChainedErrorValue(d,b)}catch(o){l._setExceptionValue(o)}finally{n&&f._traceAsyncCallbackCompleted()}l._state!==I&&l._listeners&&c.push(l)}else U.prototype.done.call(b,null,k)}}}function r(a,b,c,d,e){if(B._listeners[C]){if(b instanceof Error&&b.message===D)return;B.dispatchEvent(C,c(a,b,d,e))}}function s(a,b){var c=a._listeners;if(c){var d,e;for(d=0,e=Array.isArray(c)?c.length:1;e>d;d++){var f=1===e?c:c[d],g=f.p;if(g)try{g(b)}catch(h){}f.c||f.e||!f.promise||f.promise._progress(b)}}}function t(a,b){var c=a._listeners;c?(c=Array.isArray(c)?c:[c],c.push(b)):c=b,a._listeners=c}function u(a,b,c){a._isException=c||!1,a._errorId=b}function v(a,b,c,d){a._value=b,r(a,b,c,d),a._setState(P)}function w(a,b){var c;c=b&&"object"==typeof b&&"function"==typeof b.then?I:N,a._value=b,a._setState(c)}function x(a,b,c,d){var e=new T(a),g=f._traceAsyncOperationStarting("WinJS.Promise.then");return t(a,{promise:e,c:b,e:c,p:d,asyncOpID:g}),e}function y(a){var c;return new WinJS.Promise(function(d){a?c=setTimeout(d,a):b._setImmediate(d)},function(){c&&clearTimeout(c)})}function z(a,b){var c=function(){b.cancel()},d=function(){a.cancel()};return a.then(c),b.then(d,d),b}a.Debug&&(a.Debug.setNonUserCodeExceptions=!0);var A=c.Class.mix(c.Class.define(null,{},{supportedForProcessing:!1}),e.eventMixin),B=new A;B._listeners={};var C="error",D="Canceled",E=!1,F={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};F.all=F.promise|F.thenPromise|F.errorPromise|F.exceptionPromise|F.completePromise;var G,H,I,J,K,L,M,N,O,P,Q=1;G={name:"created",enter:function(a){a._setState(H)},cancel:g,done:g,then:g,_completed:g,_error:g,_notify:g,_progress:g,_setCompleteValue:g,_setErrorValue:g},H={name:"working",enter:g,cancel:function(a){a._setState(K)},done:n,then:x,_completed:h,_error:o,_notify:g,_progress:s,_setCompleteValue:w,_setErrorValue:v},I={name:"waiting",enter:function(a){var b=a._value;if(b instanceof T&&b._state!==P&&b._state!==N)t(b,{promise:a});else{var c=function(d){b._errorId?a._chainedError(d,b):(r(a,d,j,b,c),a._error(d))};c.handlesOnError=!0,b.then(a._completed.bind(a),c,a._progress.bind(a))}},cancel:function(a){a._setState(J)},done:n,then:x,_completed:h,_error:o,_notify:g,_progress:s,_setCompleteValue:w,_setErrorValue:v},J={name:"waiting_canceled",enter:function(a){a._setState(L);var b=a._value;b.cancel&&b.cancel()},cancel:g,done:n,then:x,_completed:h,_error:o,_notify:g,_progress:s,_setCompleteValue:w,_setErrorValue:v},K={name:"canceled",enter:function(a){a._setState(L),a._cancelAction()},cancel:g,done:n,then:x,_completed:h,_error:o,_notify:g,_progress:s,_setCompleteValue:w,_setErrorValue:v},L={name:"canceling",enter:function(a){var b=new Error(D);b.name=b.message,a._value=b,a._setState(O)},cancel:g,done:g,then:g,_completed:g,_error:g,_notify:g,_progress:g,_setCompleteValue:g,_setErrorValue:g},M={name:"complete_notify",enter:function(a){if(a.done=W.prototype.done,a.then=W.prototype.then,a._listeners)for(var b,c=[a];c.length;)b=c.shift(),b._state._notify(b,c);a._setState(N)},cancel:g,done:null,then:null,_completed:g,_error:g,_notify:p,_progress:g,_setCompleteValue:g,_setErrorValue:g},N={name:"success",enter:function(a){a.done=W.prototype.done,a.then=W.prototype.then,a._cleanupAction()},cancel:g,done:null,then:null,_completed:g,_error:g,_notify:p,_progress:g,_setCompleteValue:g,_setErrorValue:g},O={name:"error_notify",enter:function(a){if(a.done=U.prototype.done,a.then=U.prototype.then,a._listeners)for(var b,c=[a];c.length;)b=c.shift(),b._state._notify(b,c);a._setState(P)},cancel:g,done:null,then:null,_completed:g,_error:g,_notify:q,_progress:g,_setCompleteValue:g,_setErrorValue:g},P={name:"error",enter:function(a){a.done=U.prototype.done,a.then=U.prototype.then,a._cleanupAction()},cancel:g,done:null,then:null,_completed:g,_error:g,_notify:q,_progress:g,_setCompleteValue:g,_setErrorValue:g};var R,S=c.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(a,b,c){this._state.done(this,a,b,c)},then:function(a,b,c){return this._state.then(this,a,b,c)},_chainedError:function(a,b){var c=this._state._error(this,a,k,b);return this._run(),c},_completed:function(a){var b=this._state._completed(this,a);return this._run(),b},_error:function(a){var b=this._state._error(this,a,l);return this._run(),b},_progress:function(a){this._state._progress(this,a)},_setState:function(a){this._nextState=a},_setCompleteValue:function(a){this._state._setCompleteValue(this,a),this._run()},_setChainedErrorValue:function(a,b){var c=this._state._setErrorValue(this,a,k,b);return this._run(),c},_setExceptionValue:function(a){var b=this._state._setErrorValue(this,a,m);return this._run(),b},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),T=c.Class.derive(S,function(a){E&&(E===!0||E&F.thenPromise)&&(this._stack=WinJS.Promise._getStack()),this._creator=a,this._setState(G),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),U=c.Class.define(function(a){E&&(E===!0||E&F.errorPromise)&&(this._stack=WinJS.Promise._getStack()),this._value=a,r(this,a,l)},{cancel:function(){},done:function(a,b){var c=this._value;if(b)try{b.handlesOnError||r(null,c,j,this,b);var d=b(c);return void(d&&"object"==typeof d&&"function"==typeof d.done&&d.done())}catch(e){c=e}c instanceof Error&&c.message===D||X._doneHandler(c)},then:function(a,b){if(!b)return this;var c,d=this._value;try{b.handlesOnError||r(null,d,j,this,b),c=new W(b(d))}catch(e){c=e===d?this:new V(e)}return c}},{supportedForProcessing:!1}),V=c.Class.derive(U,function(a){E&&(E===!0||E&F.exceptionPromise)&&(this._stack=WinJS.Promise._getStack()),this._value=a,r(this,a,m)},{},{supportedForProcessing:!1}),W=c.Class.define(function(a){if(E&&(E===!0||E&F.completePromise)&&(this._stack=WinJS.Promise._getStack()),a&&"object"==typeof a&&"function"==typeof a.then){var b=new T(null);return b._setCompleteValue(a),b}this._value=a},{cancel:function(){},done:function(a){if(a)try{var b=a(this._value);b&&"object"==typeof b&&"function"==typeof b.done&&b.done()}catch(c){X._doneHandler(c)}},then:function(a){try{var b=a?a(this._value):this._value;return b===this._value?this:new W(b)}catch(c){return new V(c)}}},{supportedForProcessing:!1}),X=c.Class.derive(S,function(a,b){E&&(E===!0||E&F.promise)&&(this._stack=WinJS.Promise._getStack()),this._oncancel=b,this._setState(G),this._run();try{var c=this._completed.bind(this),d=this._error.bind(this),e=this._progress.bind(this);a(c,d,e)}catch(f){this._setExceptionValue(f)}},{_oncancel:null,_cancelAction:function(){if(this._oncancel)try{this._oncancel()}catch(a){}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(a,b,c){B.addEventListener(a,b,c)},any:function(a){return new X(function(b,c){{var d=Object.keys(a);Array.isArray(a)?[]:{}}0===d.length&&b();var e=0;d.forEach(function(f){X.as(a[f]).then(function(){b({key:f,value:a[f]})},function(g){return g instanceof Error&&g.name===D?void(++e===d.length&&b(WinJS.Promise.cancel)):void c({key:f,value:a[f]})})})},function(){var b=Object.keys(a);b.forEach(function(b){var c=X.as(a[b]);"function"==typeof c.cancel&&c.cancel()})})},as:function(a){return a&&"object"==typeof a&&"function"==typeof a.then?a:new W(a)},cancel:{get:function(){return R=R||new U(new d(D))}},dispatchEvent:function(a,b){return B.dispatchEvent(a,b)},is:function(a){return a&&"object"==typeof a&&"function"==typeof a.then},join:function(a){return new X(function(b,c,d){var e=Object.keys(a),f=Array.isArray(a)?[]:{},g=Array.isArray(a)?[]:{},h=0,i=e.length,j=function(a){if(0===--i){var h=Object.keys(f).length;if(0===h)b(g);else{var j=0;e.forEach(function(a){var b=f[a];b instanceof Error&&b.name===D&&j++}),j===h?b(WinJS.Promise.cancel):c(f)}}else d({Key:a,Done:!0})};return e.forEach(function(b){var c=a[b];void 0===c?h++:X.then(c,function(a){g[b]=a,j(b)},function(a){f[b]=a,j(b)})}),i-=h,0===i?void b(g):void 0},function(){Object.keys(a).forEach(function(b){var c=X.as(a[b]);"function"==typeof c.cancel&&c.cancel()})})},removeEventListener:function(a,b,c){B.removeEventListener(a,b,c)},supportedForProcessing:!1,then:function(a,b,c,d){return X.as(a).then(b,c,d)},thenEach:function(a,b,c,d){var e=Array.isArray(a)?[]:{};return Object.keys(a).forEach(function(f){e[f]=X.as(a[f]).then(b,c,d)}),X.join(e)},timeout:function(a,b){var c=y(a);return b?z(c,b):c},wrap:function(a){return new W(a)},wrapError:function(a){return new U(a)},_veryExpensiveTagWithStack:{get:function(){return E},set:function(a){E=a}},_veryExpensiveTagWithStack_tag:F,_getStack:function(){if(a.Debug&&Debug.debuggerEnabled)try{throw new Error}catch(b){return b.stack}},_cancelBlocker:function(a){if(!X.is(a))return X.wrap(a);var b,c,d=new WinJS.Promise(function(a,d){b=a,c=d},function(){b=null,c=null});return a.then(function(a){b&&b(a)},function(a){c&&c(a)}),d}});return Object.defineProperties(X,e.createEventProperties(C)),X._doneHandler=function(a){b._setImmediate(function(){throw a})},{PromiseStateMachine:S,Promise:X,state_created:G}}),define("WinJS/Promise",["./Core/_Base","./Promise/_StateMachine"],function(a,b){"use strict";return a.Namespace.define("WinJS",{Promise:b.Promise}),b.Promise}),define("WinJS/Scheduler",["./Core/_Global","./Core/_Base","./Core/_ErrorFromName","./Core/_Resources","./Core/_Trace","./Core/_WriteProfilerMark","./Promise"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},c="_prev"+a,d="_next"+a;return b["_remove"+a]=function(){var a=this[c],b=this[d];b&&(b[c]=a),a&&(a[d]=b),this[c]=null,this[d]=null},b["_insert"+a+"Before"]=function(a){var b=this[c];return b&&(b[d]=a),a[d]=this,a[c]=b,this[c]=a,a},b["_insert"+a+"After"]=function(a){var b=this[d];return this[d]=a,a[d]=b,a[c]=this,b&&(b[c]=a),a},b}function i(a,b,c){return void 0!==c?"("+a+";"+b+";"+c+")":void 0!==b?"("+a+";"+b+")":void 0!==a?"("+a+")":""}function j(a,b,c,d){f("WinJS.Scheduler:"+a+i(c,d)+","+b)}function k(a,b,c,d,e){var g=a.name||void 0!==d||void 0!==e;f("WinJS.Scheduler:"+b+":"+a.id+(g?i(a.name,d,e):"")+","+c)}function l(){return!1}function m(a){throw"Illegal call by job("+a.id+") in state: "+this.name}function n(a){return function(b,c,d){b._setState(a,c,d)}}function o(a,b){a._setPriority(b)}function p(a,b){function c(a,b){WinJS.log&&WinJS.log(b+": MARKER: "+a.name,"winjs scheduler","log")}function d(a,b){WinJS.log&&WinJS.log(b+": JOB("+a.id+"): state: "+(a._state?a._state.name:"")+(a.name?", name: "+a.name:""),"winjs scheduler","log")}WinJS.log&&WinJS.log("highWaterMark: "+zb,"winjs scheduler","log");var e=0,f=b?tb[tb.length-1]:tb[0],g=f;do g instanceof kb&&c(g,e),g instanceof Q&&d(g,e),e++,g=b?g["_prev"+a]:g["_next"+a];while(g)}function q(){function a(a,c){b+="    "+(c?"*":" ")+"id: "+a.id+", priority: "+G(a.priority).name+(a.name?", name: "+a.name:"")+"\n"}var b="";b+="Jobs:\n";var c=G(zb),d=0;for(vb&&(a(vb,!0),d++);c.priority>=sb.min;)c instanceof Q&&(a(c,!1),d++),c=c._nextJob;0===d&&(b+="     None\n"),b+="Drain requests:\n";for(var e=0,f=xb.length;f>e;e++)b+="    "+(0===e?"*":" ")+"priority: "+G(xb[e].priority).name+", name: "+xb[e].name+"\n";return 0===xb.length&&(b+="     None\n"),b}function r(){var a=tb[0];do{if(a instanceof Q)return!1;a=a._nextJob}while(a);return!0}function s(){return 0===xb.length?null:xb[0].priority}function t(a){j("drain","StartTM",a.name,G(a.priority).name)}function u(a,b){b&&j("drain-canceled","info",a.name,G(a.priority).name),j("drain","StopTM",a.name,G(a.priority).name)}function v(a,b,c){xb.push({priority:a,complete:b,name:c}),1===xb.length&&(t(xb[0]),a>zb&&(zb=a,nb=!0))}function w(a,b){var c,d=xb.length;for(c=0;d>c;c++)if(xb[c].complete===a){0===c&&(u(xb[0],b),xb[1]&&t(xb[1])),xb.splice(c,1);break}}function x(){var a=xb.shift();a&&(u(a),xb[0]&&t(xb[0]),a.complete())}function y(){var a=!1;if(xb.length)for(var b=s();+b===b&&b>zb;)mb=b,x(),a=!0,b=s();return a}function z(a){return a>=sb.aboveNormal+1?Cb.HIGH:a>=sb.belowNormal?Cb.NORMAL:Cb.IDLE}function A(a,b){return Db[a]>=Db[b]}function B(a,b){return Db[a]>Db[b]}function C(a){switch(a){case Cb.HIGH:return!1;case Cb.NORMAL:return Cb.isTaskScheduledAtPriorityOrHigher(Cb.HIGH);case Cb.IDLE:return Cb.isTaskScheduledAtPriorityOrHigher(Cb.NORMAL)}}function D(a,b){var c=G(b);c.priority>zb&&(zb=c.priority,nb=!0),c._insertJobAfter(a)}function E(a,b){var c=G(b);c.priority>zb&&(zb=c.priority,nb=!0),c._nextMarker._insertJobBefore(a)}function F(a){return a=0|a,a=Math.max(a,qb),a=Math.min(a,rb)}function G(a){return a=F(a),tb[-1*(a-rb)]}function H(a){lb=!0,j("timeslice","StartTM");var b,c,d=!0;nb=!1;try{for(var e,f=Eb(),g=f+yb,h=!1,i=!1,l=function(){return i=!1,nb?!0:C(z(zb))?!0:xb.length?!1:Eb()>g?(i=!0,!0):!1};zb>=sb.min&&!l()&&!h;){b=!1,c=G(zb)._nextJob;do{if(mb=c.priority,c instanceof Q)e!==c.priority&&(+e===e&&j("priority","StopTM",G(e).name),j("priority","StartTM",G(c.priority).name),e=c.priority),b=!0,d=!1,vb=c,k(vb,"job-running","StartTM",G(mb).name),c._execute(l),k(vb,"job-running","StopTM",G(mb).name),vb=null,d=!0;else{var m=z(zb);zb=c.priority,b=y();var n=z(zb);!B(m,n)||wb&&!Cb.isTaskScheduledAtPriorityOrHigher(n)||(h=!0)}c=c._nextJob}while(c&&!b&&!h&&!C(z(zb)));nb=!1}}finally{vb=null,d||(k(c,"job-error","info"),k(c,"job-running","StopTM",G(mb).name),c.cancel()),+e===e&&j("priority","StopTM",G(e).name);for(var o=!1;zb>=sb.min&&!o;){b=!1,c=G(zb)._nextJob;do c instanceof Q?o=!0:(zb=c.priority,b=y()),c=c._nextJob;while(c&&!b&&!o)}var p;p=d?i?"timeslice exhausted":zb<sb.min?"jobs exhausted":h?"reached WWA priority boundary":"WWA host work":"job error",a&&(ub=null),lb=!1,zb>=sb.min&&I(),j("yielding","info",p),j("timeslice","StopTM")}}function I(a){+a!==a&&(a=zb);var b=z(a);if(!lb&&(!ub||wb&&!A(ub,b))){var c=++Fb,d=function(){c>Gb&&(Gb=Fb,H(!0))};Cb.execAsyncAtPriority(d,b),ub=b}}function J(a,b){var c=pb++;void 0===b&&(b="Drain Request "+c),a=+a===a?a:sb.min,a=F(a);var d,e=new g(function(c){d=c,v(a,d,b)},function(){w(d,!0)});return lb||I(),e}function K(a){return Cb.execAtPriority(a,Cb.HIGH)}function L(){return new T}function M(a,b,c,d){b=b||sb.normal,c=c||null;var f=++ob,g=e._traceAsyncOperationStarting("WinJS.Utilities.Scheduler.schedule: "+f+i(d));return d=d||"",new Q(f,a,b,c,d,g)}function N(){if(lb)return mb;switch(Cb.getCurrentPriority()){case Cb.HIGH:return sb.high;case Cb.NORMAL:return sb.normal;case Cb.IDLE:return sb.idle}}function O(a){return function(b,c){var d;return new g(function(e){d=M(function(){e(b)},a,null,c)},function(){d.cancel()})}}b.Namespace.define("WinJS.Utilities",{_linkedListMixin:h});var P={get jobInfoIsNoLongerValid(){return d._getWinJSString("base/jobInfoIsNoLongerValid").value}},Q=b.Class.define(function(a,b,c,d,e,f){this._id=a,this._work=b,this._context=d,this._name=e,this._asyncOpID=f,this._setPriority(c),this._setState(V),k(this,"job-scheduled","info")},{completed:{get:function(){return!!this._state.completed}},id:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(a){this._name=a}},owner:{get:function(){return this._owner},set:function(a){this._owner&&this._owner._remove(this),this._owner=a,this._owner&&this._owner._add(this)}},priority:{get:function(){return this._priority},set:function(a){a=F(a),this._state.setPriority(this,a)}},cancel:function(){this._state.cancel(this)},pause:function(){this._state.pause(this)},resume:function(){this._state.resume(this)},_execute:function(a){this._state.execute(this,a)},_executeDone:function(a){return this._state.executeDone(this,a)},_blockedDone:function(a){return this._state.blockedDone(this,a)},_setPriority:function(a){+this._priority===this._priority&&this._priority!==a&&k(this,"job-priority-changed","info",G(this._priority).name,G(a).name),this._priority=a},_setState:function(a,b,c){this._state&&WinJS.log&&WinJS.log("Transitioning job ("+this.id+") from: "+this._state.name+" to: "+a.name,"winjs scheduler","log"),this._state=a,this._state.enter(this,b,c)}});b.Class.mix(Q,h("Job"));var R={complete:1,"continue":2,block:3},S=b.Class.define(function(a,b){this._job=b,this._result=null,this._yieldPolicy=R.complete,this._shouldYield=a},{job:{get:function(){return this._throwIfDisabled(),this._job}},shouldYield:{get:function(){return this._throwIfDisabled(),this._shouldYield()}},setPromise:function(a){this._throwIfDisabled(),this._result=a,this._yieldPolicy=R.block},setWork:function(a){this._throwIfDisabled(),this._result=a,this._yieldPolicy=R.continue},_disablePublicApi:function(){this._publicApiDisabled=!0},_throwIfDisabled:function(){if(this._publicApiDisabled)throw new c("WinJS.Utilities.Scheduler.JobInfoIsNoLongerValid",P.jobInfoIsNoLongerValid)}}),T=b.Class.define(function(){this._jobs={}},{cancelAll:function(){var a=this._jobs,b=Object.keys(a);this._jobs={};for(var c=0,d=b.length;d>c;c++)a[b[c]].cancel()},_add:function(a){this._jobs[a.id]=a},_remove:function(a){delete this._jobs[a.id]}}),U=b.Class.define(function(a){this.name=a,this.enter=m,this.execute=m,this.executeDone=m,this.blockedDone=m,this.cancel=m,this.pause=m,this.resume=m,this.setPriority=m}),V=new U("created"),W=new U("scheduled"),X=new U("paused"),Y=new U("canceled"),Z=new U("running"),$=new U("running_paused"),_=new U("running_resumed"),ab=new U("running_canceled"),bb=new U("running_canceled_blocked"),cb=new U("cooperative_yield"),db=new U("cooperative_yield_paused"),eb=new U("blocked"),fb=new U("blocked_waiting"),gb=new U("blocked_paused"),hb=new U("blocked_paused_waiting"),ib=new U("blocked_canceled"),jb=new U("complete");V.enter=function(a){E(a,a.priority),a._setState(W)},W.enter=function(){I()},W.execute=n(Z),W.cancel=n(Y),W.pause=n(X),W.resume=l,W.setPriority=function(a,b){a.priority!==b&&(a._setPriority(b),a.pause(),a.resume())},X.enter=function(a){k(a,"job-paused","info"),a._removeJob()},X.cancel=n(Y),X.pause=l,X.resume=function(a){k(a,"job-resumed","info"),E(a,a.priority),a._setState(W)},X.setPriority=o,Y.enter=function(b){k(b,"job-canceled","info"),e._traceAsyncOperationCompleted(b._asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_CANCELED),b._removeJob(),b._work=null,b._context=null,b.owner=null},Y.cancel=l,Y.pause=l,Y.resume=l,Y.setPriority=l,Z.enter=function(a,b){a._removeJob();var c=a.priority,d=a._work,f=a._context;a._work=null,a._context=null;var g=new S(b,a);e._traceAsyncCallbackStarting(a._asyncOpID);try{Cb.execAtPriority(function(){d.call(f,g)},z(c))}finally{e._traceAsyncCallbackCompleted(),g._disablePublicApi()}a._context=f;var h=a._executeDone(g._yieldPolicy);a._setState(h,g._result,c)},Z.executeDone=function(a,b){switch(b){case R.complete:return jb;case R.continue:return cb;case R.block:return eb}},Z.cancel=function(a){nb=!0,a._setState(ab)},Z.pause=function(a){nb=!0,a._setState($)},Z.resume=l,Z.setPriority=o,$.enter=l,$.executeDone=function(a,b){switch(b){case R.complete:return jb;case R.continue:return db;case R.block:return gb}},$.cancel=n(ab),$.pause=l,$.resume=n(_),$.setPriority=o,_.enter=l,_.executeDone=function(a,b){switch(b){case R.complete:return jb;case R.continue:return cb;case R.block:return eb}},_.cancel=n(ab),_.pause=n($),_.resume=l,_.setPriority=o,ab.enter=l,ab.executeDone=function(a,b){switch(b){case R.complete:case R.continue:return Y;case R.block:return bb}},ab.cancel=l,ab.pause=l,ab.resume=l,ab.setPriority=l,bb.enter=function(a,b){b.cancel(),a._setState(Y)},cb.enter=function(a,b,c){k(a,"job-yielded","info"),c===a.priority?D(a,a.priority):E(a,a.priority),a._work=b,a._setState(W)},db.enter=function(a,b){k(a,"job-yielded","info"),a._work=b,a._setState(X)},eb.enter=function(a,b,c){k(a,"job-blocked","StartTM"),a._work=b,a._setState(fb),b.done(function(b){k(a,"job-blocked","StopTM");var d=a._blockedDone(b);a._setState(d,b,c)},function(b){return b&&"Canceled"===b.name||k(a,"job-error","info"),k(a,"job-blocked","StopTM"),a._setState(Y),g.wrapError(b)})},fb.enter=l,fb.blockedDone=function(a,b){return"function"==typeof b?cb:jb},fb.cancel=n(ib),fb.pause=n(hb),fb.resume=l,fb.setPriority=o,gb.enter=function(a,b,c){k(a,"job-blocked","StartTM"),a._work=b,a._setState(hb),b.done(function(b){k(a,"job-blocked","StopTM");var d=a._blockedDone(b);a._setState(d,b,c)},function(b){return b&&"Canceled"===b.name||k(a,"job-error","info"),k(a,"job-blocked","StopTM"),a._setState(Y),g.wrapError(b)})},hb.enter=l,hb.blockedDone=function(a,b){return"function"==typeof b?db:jb},hb.cancel=n(ib),hb.pause=l,hb.resume=n(fb),hb.setPriority=o,ib.enter=function(a){a._work.cancel(),a._work=null},ib.blockedDone=function(){return Y},ib.cancel=l,ib.pause=l,ib.resume=l,ib.setPriority=l,jb.completed=!0,jb.enter=function(b){e._traceAsyncOperationCompleted(b._asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_SUCCESS),b._work=null,b._context=null,b.owner=null,k(b,"job-completed","info")},jb.cancel=l,jb.pause=l,jb.resume=l,jb.setPriority=l;var kb=b.Class.define(function(a,b){this.priority=a,this.name=b},{});b.Class.mix(kb,h("Job"),h("Marker"));var lb,mb,nb,ob=0,pb=0,qb=-15,rb=15,sb={max:15,high:13,aboveNormal:9,normal:0,belowNormal:-9,idle:-13,min:-15},tb=[new kb(15,"max"),new kb(14,"14"),new kb(13,"high"),new kb(12,"12"),new kb(11,"11"),new kb(10,"10"),new kb(9,"aboveNormal"),new kb(8,"8"),new kb(7,"7"),new kb(6,"6"),new kb(5,"5"),new kb(4,"4"),new kb(3,"3"),new kb(2,"2"),new kb(1,"1"),new kb(0,"normal"),new kb(-1,"-1"),new kb(-2,"-2"),new kb(-3,"-3"),new kb(-4,"-4"),new kb(-5,"-5"),new kb(-6,"-6"),new kb(-7,"-7"),new kb(-8,"-8"),new kb(-9,"belowNormal"),new kb(-10,"-10"),new kb(-11,"-11"),new kb(-12,"-12"),new kb(-13,"idle"),new kb(-14,"-14"),new kb(-15,"min"),new kb(-16,"<TAIL>")],ub=null,vb=null,wb=!(!a.MSApp||!a.MSApp.execAtPriority),xb=[],yb=30,zb=sb.min;
tb.reduce(function(a,b){return a&&(a._insertJobAfter(b),a._insertMarkerAfter(b)),b});var Ab=a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,16)},Bb={execAsyncAtPriority:function(a,b){b===Cb.HIGH&&setTimeout(a,0),Ab(a)},execAtPriority:function(a){return a()},getCurrentPriority:function(){return Bb.NORMAL},isTaskScheduledAtPriorityOrHigher:function(){return!1},HIGH:"high",NORMAL:"normal",IDLE:"idle"},Cb=wb?a.MSApp:Bb,Db={};Db[Cb.IDLE]=1,Db[Cb.NORMAL]=2,Db[Cb.HIGH]=3;var Eb=a.performance&&performance.now.bind(performance)||Date.now.bind(Date),Fb=0,Gb=0;return b.Namespace.define("WinJS.Utilities.Scheduler",{Priority:sb,schedule:M,createOwnerToken:L,execHigh:K,requestDrain:J,currentPriority:{get:N},schedulePromiseHigh:O(sb.high),schedulePromiseAboveNormal:O(sb.aboveNormal),schedulePromiseNormal:O(sb.normal),schedulePromiseBelowNormal:O(sb.belowNormal),schedulePromiseIdle:O(sb.idle),retrieveState:q,_JobNode:Q,_JobInfo:S,_OwnerToken:T,_dumpList:p,_isEmpty:{get:r},_usingWwaScheduler:{get:function(){return wb},set:function(b){wb=b,Cb=wb?a.MSApp:Bb}},_MSApp:{get:function(){return Cb},set:function(a){Cb=a}},_TIME_SLICE:yb}),WinJS.Utilities.Scheduler}),define("WinJS/Core/_BaseUtils",["./_Global","./_Base","./_BaseCoreUtils","./_ErrorFromName","./_Resources","./_Trace","../Promise","../Scheduler"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a}function j(a,b,c){return a.split(".").reduce(function(a,b){return a?c(a[b]):null},b)}function k(b,c){return b?j(b,c||a,i):null}function l(a){return a.length>0&&0!==a.indexOf("-moz")&&"-"===a.charAt(0)&&(a=a.slice(1)),a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function m(a,b){return""===a?b:a+b.charAt(0).toUpperCase()+b.slice(1)}function n(a,b){return(""!==a?"-"+a.toLowerCase()+"-":"")+b}function o(){if(!a.document)return{};for(var b={},c=document.documentElement.style,d=["","webkit","ms","Moz"],e=["animation","transition","transform","animation-name","animation-duration","animation-delay","animation-timing-function","animation-iteration-count","animation-direction","animation-fill-mode","grid-column","grid-columns","grid-column-span","grid-row","grid-rows","grid-row-span","transform-origin","transition-property","transition-duration","transition-delay","transition-timing-function","scroll-snap-points-x","scroll-snap-points-y","scroll-chaining","scroll-limit","scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","overflow-style","user-select"],f={},g=0,h=e.length;h>g;g++)for(var i=e[g],j=l(i),k=0,o=d.length;o>k;k++){var p=d[k],q=m(p,j);if(q in c){var r=n(p,i);b[i]={cssName:r,scriptName:q},f[i]=p;break}}return b.animationPrefix=n(f.animation,""),b.keyframes=n(f.animation,"keyframes"),b}function p(){for(var b={},c=["","WebKit"],d=[{eventObject:"TransitionEvent",events:["transitionStart","transitionEnd"]},{eventObject:"AnimationEvent",events:["animationStart","animationEnd"]}],e=0,f=d.length;f>e;e++){for(var g=d[e],h="",i=0,j=c.length;j>i;i++){var k=c[i];if(k+g.eventObject in a){h=k.toLowerCase();break}}for(var i=0,l=g.events.length;l>i;i++){var n=g.events[i];b[n]=m(h,n),""===h&&(b[n]=b[n].toLowerCase())}}return b.manipulationStateChanged="MSManipulationEvent"in a?"ManipulationEvent":null,b}var q={get notSupportedForProcessing(){return e._getWinJSString("base/notSupportedForProcessing").value}},r={_setHasWinRT:{value:function(a){c.hasWinRT=a},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return c.hasWinRT},configurable:!1,enumerable:!0},_getMemberFiltered:j,getMember:k,_browserStyleEquivalents:o(),_browserEventEquivalents:p(),_getCamelCasedName:l,ready:function(b,c){return new g(function(d,e){function f(){if(b)try{b(),d()}catch(a){e(a)}else d()}var g=WinJS.Utilities._testReadyState;g||(g=a.document?document.readyState:"complete"),"complete"===g||a.document&&null!==document.body?c?h.schedule(function(){f()},h.Priority.normal,null,"WinJS.Utilities.ready"):f():a.addEventListener("DOMContentLoaded",f,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:c.markSupportedForProcessing,configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(b){var c=!0;switch(c=c&&b!==a,c=c&&b!==a.location,c=c&&!(b instanceof HTMLIFrameElement),c=c&&!("function"==typeof b&&!b.supportedForProcessing),a.frames.length){case 0:break;case 1:c=c&&b!==a.frames[0];break;default:for(var f=0,g=a.frames.length;c&&g>f;f++)c=c&&b!==a.frames[f]}if(c)return b;throw new d("WinJS.Utilities.requireSupportedForProcessing",e._formatString(q.notSupportedForProcessing,b))},configurable:!1,writable:!1,enumerable:!0},_setImmediate:c._setImmediate,_yieldForEvents:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)},_yieldForDomModification:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)},_shallowCopy:function(a){return this._mergeAll([a])},_merge:function(a,b){return this._mergeAll([a,b])},_mergeAll:function(a){var b={};return a.forEach(function(a){Object.keys(a).forEach(function(c){b[c]=a[c]})}),b},_getProfilerMarkIdentifier:function(a){var b="";return a.id&&(b+=" id='"+a.id+"'"),a.className&&(b+=" class='"+a.className+"'"),b},_now:function(){return a.performance&&performance.now()||Date.now()},_traceAsyncOperationStarting:f._traceAsyncOperationStarting,_traceAsyncOperationCompleted:f._traceAsyncOperationCompleted,_traceAsyncCallbackStarting:f._traceAsyncCallbackStarting,_traceAsyncCallbackCompleted:f._traceAsyncCallbackCompleted};b.Namespace.define("WinJS.Utilities",r);var s=b.Namespace.defineWithParent(null,null,r);return b.Namespace.define("WinJS",{validation:!1,strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}}),s}),define("WinJS/Core/_Log",["./_Base"],function(a){"use strict";function b(a,b,c){var d=a;return"function"==typeof d&&(d=d()),(c&&f.test(c)?"":c?c+": ":"")+(b?b.replace(e,":")+": ":"")+d}function c(a,b,c){var d=WinJS.Utilities.formatLog(a,b,c);console[c&&f.test(c)?c:"log"](d)}function d(a){return a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var e=/\s+/g,f=/^(error|warn|info|log)$/;a.Namespace.define("WinJS.Utilities",{startLog:function(a){a=a||{},"string"==typeof a&&(a={tags:a});var b=a.type&&new RegExp("^("+d(a.type).replace(e," ").split(" ").join("|")+")$"),f=a.excludeTags&&new RegExp("(^|\\s)("+d(a.excludeTags).replace(e," ").split(" ").join("|")+")(\\s|$)","i"),g=a.tags&&new RegExp("(^|\\s)("+d(a.tags).replace(e," ").split(" ").join("|")+")(\\s|$)","i"),h=a.action||c;if(!(b||f||g||WinJS.log))return void(WinJS.log=h);var i=function(a,c,d){b&&!b.test(d)||f&&f.test(c)||g&&!g.test(c)||h(a,c,d),i.next&&i.next(a,c,d)};i.next=WinJS.log,WinJS.log=i},stopLog:function(){delete WinJS.log},formatLog:b})}),define("WinJS/Core",["./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Log","./Core/_Resources"],function(){}),define("WinJS/_Signal",["./Core/_Base","./Promise/_StateMachine"],function(a,b){"use strict";var c=a.Class.derive(b.PromiseStateMachine,function(a){this._oncancel=a,this._setState(b.state_created),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),d=a.Class.define(function(a){this._promise=new c(a)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(a){this._promise._completed(a)},error:function(a){this._promise._error(a)},progress:function(a){this._promise._progress(a)}},{supportedForProcessing:!1});return a.Namespace.define("WinJS",{_Signal:d}),d}),define("WinJS/Utilities/_Control",["../Core/_Global","../Core/_Base"],function(a,b){"use strict";function c(a,b){d(a,b)}function d(a,b,c){if("object"==typeof b)for(var d=Object.keys(b),e=0,f=d.length;f>e;e++){var g=d[e],h=b[g];if(g.length>2){var i=g[0],j=g[1];if(!("o"!==i&&"O"!==i||"n"!==j&&"N"!==j)&&"function"==typeof h&&a.addEventListener){a.addEventListener(g.substr(2),h);continue}}c||(a[g]=h)}}if(a.document){var e={DOMEventMixin:b.Namespace._lazy(function(){return{_domElement:null,addEventListener:function(a,b,c){(this.element||this._domElement).addEventListener(a,b,c||!1)},dispatchEvent:function(a,b){var c=document.createEvent("Event");return c.initEvent(a,!1,!1),c.detail=b,"object"==typeof b&&Object.keys(b).forEach(function(a){c[a]=b[a]}),(this.element||this._domElement).dispatchEvent(c)},removeEventListener:function(a,b,c){(this.element||this._domElement).removeEventListener(a,b,c||!1)}}}),setOptions:c,_setOptions:d};return b.Namespace.define("WinJS.UI",e),b.Namespace.defineWithParent(null,null,e)}}),define("WinJS/Utilities/_ElementUtilities",["../Core/_Global","../Core/_BaseCoreUtils","../Core/_Base","../Core/_BaseUtils","../Scheduler"],function(a,b,c,d,e){"use strict";function f(a){for(var b=a.length,c=b-1;c>=0;c--)a[c]||(a.splice(c,1),b--);return b}function g(a){var b=a.className||"";return"string"==typeof b?b:b.baseVal||""}function h(a,b){var c=a.className||"";return"string"==typeof c?a.className=b:a.className.baseVal=b,a}function i(a,b){if(a.classList){if(b.indexOf(" ")<0)a.classList.add(b);else{var c=b.split(" ");f(c);for(var d=0,e=c.length;e>d;d++)a.classList.add(c[d])}return a}var i,j=g(a),k=j.split(" "),l=f(k);if(b.indexOf(" ")>=0){var c=b.split(" ");f(c);for(var d=0;l>d;d++){var m=c.indexOf(k[d]);m>=0&&c.splice(m,1)}c.length>0&&(i=c.join(" "))}else{for(var n=!1,d=0;l>d;d++)if(k[d]===b){n=!0;break}n||(i=b)}return i&&(l>0&&k[0].length>0?h(a,j+" "+i):h(a,i)),a}function j(a,b){if(a.classList){if(0===a.classList.length)return a;var c=b.split(" ");f(c);for(var d=0,e=c.length;e>d;d++)a.classList.remove(c[d]);return a}var c,i,j=g(a);if(b.indexOf(" ")>=0)c=b.split(" "),i=f(c);else{if(j.indexOf(b)<0)return a;c=[b],i=1}for(var k,l=j.split(" "),m=f(l),d=m-1;d>=0;d--)c.indexOf(l[d])>=0&&(l.splice(d,1),k=!0);return k&&h(a,l.join(" ")),a}function k(a,b){if(a.classList)return a.classList.toggle(b),a;for(var c=g(a),d=c.trim().split(" "),e=d.length,f=!1,i=0;e>i;i++)d[i]==b&&(f=!0);return f?h(a,d.reduce(function(a,c){return c==b?a:a&&a.length>0?a+" "+c:c},"")):e>0&&d[0].length>0?h(a,c+" "+b):h(a,c+b),a}function l(a,b,c){a.getAttribute(b)!==""+c&&a.setAttribute(b,c)}function m(a,b,c,d){var e=Math.max(b,Math.min(c,+a));return 0===e?0:e||Math.max(b,Math.min(c,d))}function n(a,b){if(!K.test(b)&&L.test(b)){var c=a.style.left;return a.style.left=b,b=a.style.pixelLeft,a.style.left=c,b}return Math.round(parseFloat(b))||0}function o(b,c){return n(b,a.getComputedStyle(b,null)[c])}function p(a,b,c,d,e){var f=b.toLowerCase();a._eventsMap||(a._eventsMap={}),a._eventsMap[f]||(a._eventsMap[f]=[]),a._eventsMap[f].push({listener:c,useCapture:d,data:e})}function q(a,b,c,d){var e=b.toLowerCase(),f=a._eventsMap&&a._eventsMap[e];if(f)for(var g=f.length-1;g>=0;g--){var h=f[g];if(h.listener===c&&!!d==!!h.useCapture)return f.splice(g,1),h}return null}function r(a,b){var c=b.toLowerCase();return a._eventsMap&&a._eventsMap[c]&&a._eventsMap[c].slice(0)||[]}function s(a,b,c){for(;a;){for(var d=r(a,b),e=0,f=d.length;f>e;e++)d[e].listener.call(a,c);a=a.parentNode}}function t(a){return(a.relatedTarget&&"IFRAME"===a.relatedTarget.tagName||a.target&&"IFRAME"===a.target.tagName)&&(a.relatedTarget=null),a}function u(a,b,c,d){if(d)throw"This custom WinJS event only supports bubbling";p(a,b,c,d)}function v(a,b){b._handledTouch=!0;var c=b.changedTouches,d=null;Object.defineProperty(b,"screenX",{writable:!0}),Object.defineProperty(b,"screenY",{writable:!0}),Object.defineProperty(b,"clientX",{writable:!0}),Object.defineProperty(b,"clientY",{writable:!0}),Object.defineProperty(b,"pageX",{writable:!0}),Object.defineProperty(b,"pageY",{writable:!0});for(var e=0,f=c.length;f>e;e++){var g=c[e];b.pointerType=O.MSPOINTER_TYPE_TOUCH,b.pointerId=g.identifier,b.screenX=g.screenX,b.screenY=g.screenY,b.clientX=g.clientX,b.clientY=g.clientY,b.pageX=g.pageX,b.pageY=g.pageY,b.radiusX=g.radiusX,b.radiusY=g.radiusY,b.rotationAngle=g.rotationAngle,b.force=g.force,b._currentTouch=g,d=d||a(b)}return d}function w(a,b){return b.pointerType=O.MSPOINTER_TYPE_MOUSE,b.pointerId=-1,a(b)}function x(a,b){return b._handledTouch=!0,a(b)}function y(b,c,d,e){var f,g,h,i,j=c.toLowerCase(),k=Q[j];a.MSPointerEvent?(h=function(a){return a._normalizedType=j,i=!0,x(d,a)},b.addEventListener(k.mspointer,h,e)):(k.mouse&&(f=function(a){return a._normalizedType=j,i?void(i=!1):w(d,a)},b.addEventListener(k.mouse,f,e)),k.touch&&(g=function(a){return a._normalizedType=j,i=!0,v(d,a)},b.addEventListener(k.touch,g,e))),p(b,c,d,e,{mouseWrapper:f,touchWrapper:g,mspointerWrapper:h})}function z(a,b,c,d){var e=b.toLowerCase(),f=q(a,b,c,d);if(f){var g=Q[e];f.data.mouseWrapper&&a.removeEventListener(g.mouse,f.data.mouseWrapper,d),f.data.touchWrapper&&a.removeEventListener(g.touch,f.data.touchWrapper,d),f.data.mspointerWrapper&&a.removeEventListener(g.mspointer,f.data.mspointerWrapper,d)}}function A(){var a=document.createElement("div");a.style.direction="rtl",a.innerHTML="<div style='width: 100px; height: 100px; overflow: scroll; visibility:hidden'><div style='width: 10000px; height: 100px;'></div></div>",document.body.appendChild(a);var b=a.firstChild;b.scrollLeft>0&&(Y=!0),b.scrollLeft+=100,0===b.scrollLeft&&(Z=!0),document.body.removeChild(a),X=!0}function B(a){{var b=getComputedStyle(a),c=a.scrollLeft;a.scrollTop}return"rtl"===b.direction&&(X||A(),Y&&(c=a.scrollWidth-a.clientWidth-c),c=Math.abs(c)),{scrollLeft:c,scrollTop:a.scrollTop}}function C(a,b,c){if(void 0!==b){var d=getComputedStyle(a);"rtl"===d.direction&&(X||A(),Z?b=-b:Y&&(b=a.scrollWidth-a.clientWidth-b)),a.scrollLeft=b}void 0!==c&&(a.scrollTop=c)}function D(a){return B(a)}function E(a,b){b=b||{},C(a,b.scrollLeft,b.scrollTop)}function F(a){return a.uniqueID||a._uniqueID||(a._uniqueID="element__"+ ++cb),a.uniqueID||a._uniqueID}function G(a){a.id||(a.id=F(a))}function H(a){var b=document.documentElement,c=D(b);return{left:a.clientX+("rtl"===document.body.dir?-c.scrollLeft:c.scrollLeft),top:a.clientY+b.scrollTop}}function I(a,b){for(var c=[],d=0,e=b.length;e>d;d++){var f=a.querySelector("."+b[d]);f&&c.push(f)}return c}if(a.document){var J=167,K=/^-?\d+\.?\d*(px)?$/i,L=/^-?\d+/i,M=a.MSGestureEvent||{MSGESTURE_FLAG_BEGIN:1,MSGESTURE_FLAG_CANCEL:4,MSGESTURE_FLAG_END:2,MSGESTURE_FLAG_INERTIA:8,MSGESTURE_FLAG_NONE:0},N=a.MSManipulationEvent||{MS_MANIPULATION_STATE_ACTIVE:1,MS_MANIPULATION_STATE_CANCELLED:6,MS_MANIPULATION_STATE_COMMITTED:7,MS_MANIPULATION_STATE_DRAGGING:5,MS_MANIPULATION_STATE_INERTIA:2,MS_MANIPULATION_STATE_PRESELECT:3,MS_MANIPULATION_STATE_SELECTING:4,MS_MANIPULATION_STATE_STOPPED:0},O=a.MSPointerEvent||{MSPOINTER_TYPE_TOUCH:"touch",MSPOINTER_TYPE_PEN:"pen",MSPOINTER_TYPE_MOUSE:"mouse"},P=null;a.addEventListener("blur",function(){var a=P;a&&s(a,"focusout",t({type:"focusout",target:a,relatedTarget:null})),P=null}),document.documentElement.addEventListener("focus",function(a){var b=P;P=a.target,b&&s(b,"focusout",t({type:"focusout",target:b,relatedTarget:P})),P&&s(P,"focusin",t({type:"focusin",target:P,relatedTarget:b}))},!0);var Q={pointerdown:{touch:"touchstart",mspointer:"MSPointerDown",mouse:"mousedown"},pointerup:{touch:"touchend",mspointer:"MSPointerUp",mouse:"mouseup"},pointermove:{touch:"touchmove",mspointer:"MSPointerMove",mouse:"mousemove"},pointerenter:{touch:null,mspointer:"MSPointerEnter",mouse:"mouseenter"},pointerover:{touch:null,mspointer:"MSPointerOver",mouse:"mouseover"},pointerout:{touch:"touchleave",mspointer:"MSPointerOut",mouse:"mouseout"},pointercancel:{touch:"touchcancel",mspointer:"MSPointerCancel",mouse:null}},R={focusout:{register:u,unregister:q},focusin:{register:u,unregister:q}};if(!a.PointerEvent){var S={register:y,unregister:z};R.pointerdown=S,R.pointerup=S,R.pointermove=S,R.pointerenter=S,R.pointerover=S,R.pointerout=S,R.pointercancel=S}var T=c.Class.define(function(a){this._callback=a,this._toDispose=[],this._attributeFilter=[],this._scheduled=!1,this._pendingChanges=[],this._observerCount=0,this._handleCallback=this._handleCallback.bind(this),this._targetElements=[]},{observe:function(a,b){-1===this._targetElements.indexOf(a)&&this._targetElements.push(a),this._observerCount++,b.attributes&&this._addRemovableListener(a,"DOMAttrModified",this._handleCallback),b.attributeFilter&&(this._attributeFilter=b.attributeFilter)},disconnect:function(){this._observerCount=0,this._targetElements=[],this._toDispose.forEach(function(a){a()})},_addRemovableListener:function(a,b,c){a.addEventListener(b,c),this._toDispose.push(function(){a.removeEventListener(b,c)})},_handleCallback:function(a){if(a.stopPropagation(),(!this._attributeFilter.length||-1!==this._attributeFilter.indexOf(a.attrName))&&-1!==this._targetElements.indexOf(a.target)){var c=a.attrName;"tabindex"===c&&(c="tabIndex"),this._pendingChanges.push({type:"attributes",target:a.target,attributeName:c}),1===this._observerCount?this._dispatchEvent():this._scheduled===!1&&(this._scheduled=!0,b._setImmediate(this._dispatchEvent.bind(this)))}},_dispatchEvent:function(){try{this._callback(this._pendingChanges)}finally{this._pendingChanges=[],this._scheduled=!1}}},{_isShim:!0}),U=a.MutationObserver||T,V=null,W=c.Class.define(function(){a.addEventListener("resize",this._handleResize.bind(this))},{subscribe:function(a,b){a.addEventListener(this._resizeEvent,b),i(a,this._resizeClass)},unsubscribe:function(a,b){j(a,this._resizeClass),a.removeEventListener(this._resizeEvent,b)},_handleResize:function(){for(var a=document.querySelectorAll("."+this._resizeClass),b=a.length,c=0;b>c;c++){var d=document.createEvent("Event");d.initEvent(this._resizeEvent,!1,!0),a[c].dispatchEvent(d)}},_resizeClass:{get:function(){return"win-element-resize"}},_resizeEvent:{get:function(){return"WinJSElementResize"}}}),X=!1,Y=!1,Z=!1,$=!!HTMLElement.prototype.msZoomTo,_=!(!window.MSPointerEvent&&!window.TouchEvent),ab=!1,bb=WinJS.Utilities._browserStyleEquivalents["scroll-snap-type"];bb&&(0===bb.cssName.indexOf("-ms-")?$&&(ab=!0):ab=!0);var cb=0,db=".win-selectionborder, .win-selectionbackground, .win-selectioncheckmark, .win-selectioncheckmarkbackground",eb="_msDataKey",fb={_dataKey:eb,_supportsSnapPoints:{get:function(){return ab}},_supportsTouchDetection:{get:function(){return _}},_supportsZoomTo:{get:function(){return $}},_uniqueID:F,_ensureId:G,_clamp:m,_getCursorPos:H,_getElementsByClasses:I,_createGestureRecognizer:function(){if(a.MSGesture)return new MSGesture;var b=function(){};return{addEventListener:b,removeEventListener:b,addPointer:b,stop:b}},_MSGestureEvent:M,_MSManipulationEvent:N,_elementsFromPoint:function(a,b){if(document.msElementsFromPoint)return document.msElementsFromPoint(a,b);var c=document.elementFromPoint(a,b);return c?[c]:null},_matchesSelector:function(a,b){var c=a.matches||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector;return c.call(a,b)},_selectionPartsSelector:db,_isSelectionRendered:function(a){return a.querySelectorAll(db).length>0},_addEventListener:function(a,b,c,d){var e=b&&b.toLowerCase(),f=R[e];f?f.register(a,b,c,d):a.addEventListener(b,c,d)},_removeEventListener:function(a,b,c,d){var e=b&&b.toLowerCase(),f=R[e];f?f.unregister(a,b,c,d):a.removeEventListener(b,c,d)},_initEventImpl:function(a,b,c){c=c.toLowerCase();var d=Q[c];if(d)switch(a.toLowerCase()){case"pointer":arguments[2]=d.mspointer;break;default:arguments[2]=d[a.toLowerCase()]}b["init"+a+"Event"].apply(b,Array.prototype.slice.call(arguments,2))},_initMouseEvent:function(a){this._initEventImpl.apply(this,["Mouse",a].concat(Array.prototype.slice.call(arguments,1)))},_initPointerEvent:function(a){this._initEventImpl.apply(this,["Pointer",a].concat(Array.prototype.slice.call(arguments,1)))},_bubbleEvent:s,_setPointerCapture:function(a,b){a.setPointerCapture&&a.setPointerCapture(b)},_releasePointerCapture:function(a,b){a.releasePointerCapture&&a.releasePointerCapture(b)},_MSPointerEvent:O,_zoomTo:function(a,b){a.msZoomTo?a.msZoomTo(b):e.schedule(function(){var c=B(a),e="number"==typeof a._zoomToDestX?a._zoomToDestX:c.scrollLeft,f="number"==typeof a._zoomToDestY?a._zoomToDestY:c.scrollTop,g=getComputedStyle(a),h=a.scrollWidth-parseInt(g.width,10)-parseInt(g.paddingLeft,10)-parseInt(g.paddingRight,10),i=a.scrollHeight-parseInt(g.height,10)-parseInt(g.paddingTop,10)-parseInt(g.paddingBottom,10);"number"!=typeof b.contentX&&(b.contentX=e),"number"!=typeof b.contentY&&(b.contentY=f);var j=m(b.contentX,0,h),k=m(b.contentY,0,i);if(j!==e||k!==f){a._zoomToId=a._zoomToId||0,a._zoomToId++,a._zoomToDestX=j,a._zoomToDestY=k;var l=a._zoomToId,n=d._now(),o=(a._zoomToDestX-c.scrollLeft)/J,p=(a._zoomToDestY-c.scrollTop)/J,q=function(){var b=d._now()-n;a._zoomToId===l&&(b>J?(C(a,a._zoomToDestX,a._zoomToDestY),a._zoomToDestX=null,a._zoomToDestY=null):(C(a,c.scrollLeft+b*o,c.scrollTop+b*p),requestAnimationFrame(q)))};requestAnimationFrame(q)}},e.Priority.high,null,"WinJS.Utilities._zoomTo")},_setActive:function(b,c){var d=!0;try{if(a.HTMLElement&&HTMLElement.prototype.setActive)b.setActive();else{var e,f;c&&(e=c.scrollLeft,f=c.scrollTop),b.focus(),c&&(c.scrollLeft=e,c.scrollTop=f)}}catch(g){d=!1}return d},_MutationObserver:U,_resizeNotifier:{get:function(){return V||(V=new W),V}},_setFlexStyle:function(a,b){var c=a.style;"undefined"!=typeof b.grow&&(c.msFlexPositive=b.grow,c.flexGrow=b.grow),"undefined"!=typeof b.shrink&&(c.msFlexNegative=b.shrink,c.flexShrink=b.shrink),"undefined"!=typeof b.basis&&(c.msFlexPreferredSize=b.basis,c.flexBasis=b.basis)},Key:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,deleteKey:46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindows:91,rightWindows:92,menu:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,numLock:144,scrollLock:145,browserBack:166,browserForward:167,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222,IME:229},data:function(a){return a[eb]||(a[eb]={}),a[WinJS.Utilities._dataKey]},hasClass:function(a,b){if(a.classList)return a.classList.contains(b);for(var c=g(a),d=c.trim().split(" "),e=d.length,f=0;e>f;f++)if(d[f]==b)return!0;return!1},addClass:i,removeClass:j,toggleClass:k,_setAttribute:l,getRelativeLeft:function(a,b){if(!a)return 0;for(var c=a.offsetLeft,d=a.parentNode;d&&(c-=d.offsetLeft,d!==b);)d=d.parentNode;return c},getRelativeTop:function(a,b){if(!a)return 0;for(var c=a.offsetTop,d=a.parentNode;d&&(c-=d.offsetTop,d!==b);)d=d.parentNode;return c},getScrollPosition:D,setScrollPosition:E,empty:function(a){if(a.childNodes&&a.childNodes.length>0)for(var b=a.childNodes.length-1;b>=0;b--)a.removeChild(a.childNodes.item(b));return a},_isDOMElement:function(a){return a&&"object"==typeof a&&"string"==typeof a.tagName},getContentWidth:function(a){var b=o(a,"borderLeftWidth")+o(a,"borderRightWidth"),c=o(a,"paddingLeft")+o(a,"paddingRight");return a.offsetWidth-b-c},getTotalWidth:function(a){var b=o(a,"marginLeft")+o(a,"marginRight");return a.offsetWidth+b},getContentHeight:function(a){var b=o(a,"borderTopWidth")+o(a,"borderBottomWidth"),c=o(a,"paddingTop")+o(a,"paddingBottom");return a.offsetHeight-b-c},getTotalHeight:function(a){var b=o(a,"marginTop")+o(a,"marginBottom");return a.offsetHeight+b},getPosition:function(a){for(var b=a,c=a.offsetParent,d=a.offsetTop,e=a.offsetLeft;(a=a.parentNode)&&a!==document.body&&a!==document.documentElement;){d-=a.scrollTop;var f=document.defaultView.getComputedStyle(a,null).direction;e-="rtl"!==f?a.scrollLeft:-B(a).scrollLeft,a===c&&(d+=a.offsetTop,e+=a.offsetLeft,c=a.offsetParent)}return{left:e,top:d,width:b.offsetWidth,height:b.offsetHeight}},getTabIndex:function(a){var b=/BUTTON|COMMAND|MENUITEM|OBJECT|SELECT|TEXTAREA/;if(a.disabled)return-1;var c=a.getAttribute("tabindex");if(null===c||void 0===c){var d=a.tagName;return b.test(d)||a.href&&("A"===d||"AREA"===d||"LINK"===d)||"INPUT"===d&&"hidden"!==a.type||"TH"===d&&a.sorted?0:-1}return parseInt(c,10)},convertToPixels:n,eventWithinElement:function(a,b){var c=b.relatedTarget;return c&&c!==a?a.contains(c):!1}};return c.Namespace.define("WinJS.Utilities",fb),c.Namespace.defineWithParent(null,null,fb)}}),define("WinJS/Utilities/_Dispose",["../Core/_Base","../Core/_WriteProfilerMark","./_ElementUtilities"],function(a,b,c){"use strict";function d(a,b){var d=!1;c.addClass(a,"win-disposable");var f=a.winControl||a;f.dispose=function(){d||(d=!0,e(a),b&&b())}}function e(a){if(a){b("WinJS.Utilities.disposeSubTree,StartTM");for(var c=a.querySelectorAll(".win-disposable"),d=0,e=c.length;e>d;){var f=c[d];f.winControl&&f.winControl.dispose&&f.winControl.dispose(),f.dispose&&f.dispose(),d+=f.querySelectorAll(".win-disposable").length+1}b("WinJS.Utilities.disposeSubTree,StopTM")}}function f(a){if(a){var b=!1;a.winControl&&a.winControl.dispose&&(a.winControl.dispose(),b=!0),a.dispose&&(a.dispose(),b=!0),b||e(a)}}var g={markDisposable:d,disposeSubTree:e,_disposeElement:f};return a.Namespace.define("WinJS.Utilities",g),a.Namespace.defineWithParent(null,null,g)}),define("WinJS/ControlProcessor/_OptionsLexer",["../Core/_Base"],function optionsLexerInit(_Base){"use strict";var members={_optionsLexer:_Base.Namespace._lazy(function(){function reservedWord(a){return{type:tokenType.reservedWord,value:a,length:a.length,keyword:!0}}function reservedWordLookup(a){switch(a.charCodeAt(0)){case 98:switch(a){case"break":return reservedWord(a)}break;case 99:switch(a){case"case":case"catch":case"class":case"const":case"continue":return reservedWord(a)}break;case 100:switch(a){case"debugger":case"default":case"delete":case"do":return reservedWord(a)}break;case 101:switch(a){case"else":case"enum":case"export":case"extends":return reservedWord(a)}break;case 102:switch(a){case"false":return tokens.falseLiteral;case"finally":case"for":case"function":return reservedWord(a)}break;case 105:switch(a){case"if":case"import":case"in":case"instanceof":return reservedWord(a)}break;case 110:switch(a){case"null":return tokens.nullLiteral;case"new":return reservedWord(a)}break;case 114:switch(a){case"return":return reservedWord(a)}break;case 115:switch(a){case"super":case"switch":return reservedWord(a)}break;case 116:switch(a){case"true":return tokens.trueLiteral;case"this":return tokens.thisKeyword;case"throw":case"try":case"typeof":return reservedWord(a)}break;case 118:switch(a){case"var":case"void":return reservedWord(a)}break;case 119:switch(a){case"while":case"with":return reservedWord(a)}}}var tokenType={leftBrace:1,rightBrace:2,leftBracket:3,rightBracket:4,separator:5,colon:6,semicolon:7,comma:8,dot:9,nullLiteral:10,trueLiteral:11,falseLiteral:12,numberLiteral:13,stringLiteral:14,identifier:15,reservedWord:16,thisKeyword:17,leftParentheses:18,rightParentheses:19,eof:20,error:21},tokens={leftBrace:{type:tokenType.leftBrace,length:1},rightBrace:{type:tokenType.rightBrace,length:1},leftBracket:{type:tokenType.leftBracket,length:1},rightBracket:{type:tokenType.rightBracket,length:1},colon:{type:tokenType.colon,length:1},semicolon:{type:tokenType.semicolon,length:1},comma:{type:tokenType.comma,length:1},dot:{type:tokenType.dot,length:1},nullLiteral:{type:tokenType.nullLiteral,length:4,value:null,keyword:!0},trueLiteral:{type:tokenType.trueLiteral,length:4,value:!0,keyword:!0},falseLiteral:{type:tokenType.falseLiteral,length:5,value:!1,keyword:!0},thisKeyword:{type:tokenType.thisKeyword,length:4,value:"this",keyword:!0},leftParentheses:{type:tokenType.leftParentheses,length:1},rightParentheses:{type:tokenType.rightParentheses,length:1},eof:{type:tokenType.eof,length:0}},lexer=function(){function isIdentifierStartCharacter(a,b,c,d){switch(a){case a>=97&&122>=a&&a:case a>=65&&90>=a&&a:case 36:case 95:return!0;case isWhitespace(a)&&a:case isLineTerminator(a)&&a:return!1;case a>127&&a:return!0;case 92:return d>c+4&&117===b.charCodeAt(c)&&isHexDigit(b.charCodeAt(c+1))&&isHexDigit(b.charCodeAt(c+2))&&isHexDigit(b.charCodeAt(c+3))&&isHexDigit(b.charCodeAt(c+4))?!0:!1;default:return!1}}function readIdentifierPart(a,b,c){for(var d=!1;c>b;){var e=a.charCodeAt(b);switch(e){case e>=97&&122>=e&&e:case e>=65&&90>=e&&e:case 36:case 95:break;case isWhitespace(e)&&e:case isLineTerminator(e)&&e:return d?-b:b;case e>127&&e:break;case e>=48&&57>=e&&e:break;case 92:if(c>b+5&&117===a.charCodeAt(b+1)&&isHexDigit(a.charCodeAt(b+2))&&isHexDigit(a.charCodeAt(b+3))&&isHexDigit(a.charCodeAt(b+4))&&isHexDigit(a.charCodeAt(b+5))){b+=5,d=!0;break}return d?-b:b;default:return d?-b:b}b++}return d?-b:b}function readIdentifierToken(a,b,c){var d=b;b=readIdentifierPart(a,b,c);var e=!1;0>b&&(b=-b,e=!0);var f=a.substr(d,b-d);e&&(f=""+JSON.parse('"'+f+'"'));var g=reservedWordLookup(f);return g?g:{type:tokenType.identifier,length:b-d,value:f}}function isHexDigit(a){switch(a){case a>=48&&57>=a&&a:case a>=97&&102>=a&&a:case a>=65&&70>=a&&a:return!0;default:return!1}}function readHexIntegerLiteral(a,b,c){for(;c>b&&isHexDigit(a.charCodeAt(b));)b++;return b}function isDecimalDigit(a){switch(a){case a>=48&&57>=a&&a:return!0;default:return!1}}function readDecimalDigits(a,b,c){for(;c>b&&isDecimalDigit(a.charCodeAt(b));)b++;return b}function readDecimalLiteral(a,b,c){if(b=readDecimalDigits(a,b,c),c>b&&46===a.charCodeAt(b)&&c>b+1&&isDecimalDigit(a.charCodeAt(b+1))&&(b=readDecimalDigits(a,b+2,c)),c>b){var d=a.charCodeAt(b);if(101===d||69===d){var e=b+1;c>e&&(d=a.charCodeAt(e),(43===d||45===d)&&e++,b=readDecimalDigits(a,e,c))}}return b}function readDecimalLiteralToken(a,b,c,d){var c=readDecimalLiteral(a,c,d),e=c-b;return{type:tokenType.numberLiteral,length:e,value:+a.substr(b,e)}}function isLineTerminator(a){switch(a){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function readStringLiteralToken(text,offset,limit){var startOffset=offset,quoteCharCode=text.charCodeAt(offset),hasEscape=!1;for(offset++;limit>offset&&!isLineTerminator(text.charCodeAt(offset));){if(limit>offset+1&&92===text.charCodeAt(offset))switch(hasEscape=!0,text.charCodeAt(offset+1)){case quoteCharCode:case 92:case 10:case 8232:case 8233:offset+=2;continue;case 13:offset+=limit>offset+2&&10===text.charCodeAt(offset+2)?3:2;continue}if(offset++,text.charCodeAt(offset-1)===quoteCharCode)break}var length=offset-startOffset;hasEscape=hasEscape||1===length||text.charCodeAt(offset-1)!==quoteCharCode;var stringValue;return stringValue=hasEscape?eval(text.substr(startOffset,length)):text.substr(startOffset+1,length-2),{type:tokenType.stringLiteral,length:length,value:stringValue}}function isWhitespace(a){switch(a){case 9:case 11:case 12:case 32:case 160:case 65279:return!0;case 5760>a&&a:return!1;case 5760:case 6158:case a>=8192&&8202>=a&&a:case 8239:case 8287:case 12288:return!0;default:return!1}}function readWhitespace(a,b,c){for(;c>b;){var d=a.charCodeAt(b);switch(d){case 9:case 11:case 12:case 32:case 160:case 65279:break;case 5760>d&&d:return b;case 5760:case 6158:case d>=8192&&8202>=d&&d:case 8239:case 8287:case 12288:break;default:return b}b++}return b}function lex(a,b,c,d){for(;d>c;){var e,f=c,g=b.charCodeAt(c++);switch(g){case isWhitespace(g)&&g:case isLineTerminator(g)&&g:c=readWhitespace(b,c,d),e={type:tokenType.separator,length:c-f};continue;case 34:case 39:e=readStringLiteralToken(b,c-1,d);break;case 40:e=tokens.leftParentheses;break;case 41:e=tokens.rightParentheses;break;case 43:case 45:if(d>c){var h=b.charCodeAt(c);if(46===h){var i=c+1;if(d>i&&isDecimalDigit(b.charCodeAt(i))){e=readDecimalLiteralToken(b,f,i,d);break}}else if(isDecimalDigit(h)){e=readDecimalLiteralToken(b,f,c,d);break}}e={type:tokenType.error,length:c-f,value:b.substring(f,c)};
break;case 44:e=tokens.comma;break;case 46:e=tokens.dot,d>c&&isDecimalDigit(b.charCodeAt(c))&&(e=readDecimalLiteralToken(b,f,c,d));break;case 48:var j=d>c?b.charCodeAt(c):0;if(120===j||88===j){var k=readHexIntegerLiteral(b,c+1,d);e={type:tokenType.numberLiteral,length:k-f,value:+b.substr(f,k-f)}}else e=readDecimalLiteralToken(b,f,c,d);break;case g>=49&&57>=g&&g:e=readDecimalLiteralToken(b,f,c,d);break;case 58:e=tokens.colon;break;case 59:e=tokens.semicolon;break;case 91:e=tokens.leftBracket;break;case 93:e=tokens.rightBracket;break;case 123:e=tokens.leftBrace;break;case 125:e=tokens.rightBrace;break;default:if(isIdentifierStartCharacter(g,b,c,d)){e=readIdentifierToken(b,c-1,d);break}e={type:tokenType.error,length:c-f,value:b.substring(f,c)}}c+=e.length-1,a.push(e)}}return function(a){var b=[];return lex(b,a,0,a.length),b.push(tokens.eof),b}}();return lexer.tokenType=tokenType,lexer})};return _Base.Namespace.define("WinJS.UI",members),_Base.Namespace.defineWithParent(null,null,members)}),define("WinJS/ControlProcessor/_OptionsParser",["../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","./_OptionsLexer"],function(a,b,c,d,e){"use strict";function f(){throw"Illegal"}function g(a){for(var b=Object.keys(i.tokenType),c=0,d=b.length;d>c;c++)if(a===i.tokenType[b[c]])return b[c];return"<unknown>"}var h={get invalidOptionsRecord(){return d._getWinJSString("base/invalidOptionsRecord").value},get unexpectedTokenExpectedToken(){return d._getWinJSString("base/unexpectedTokenExpectedToken").value},get unexpectedTokenExpectedTokens(){return d._getWinJSString("base/unexpectedTokenExpectedTokens").value},get unexpectedTokenGeneric(){return d._getWinJSString("base/unexpectedTokenGeneric").value}},i=a.Namespace.defineWithParent(null,null,{lexer:a.Namespace._lazy(function(){return e._optionsLexer}),tokenType:a.Namespace._lazy(function(){return e._optionsLexer.tokenType})}),j=b.requireSupportedForProcessing,k=a.Namespace.defineWithParent(null,null,{BaseInterpreter:a.Namespace._lazy(function(){return a.Class.define(null,{_error:function(a){throw new c("WinJS.UI.ParseError",a)},_currentOffset:function(){for(var a=(this._tokens.length,this._pos),b=0,c=0;a>c;c++)b+=this._tokens[c].length;return b},_evaluateAccessExpression:function(a){switch(this._current.type){case i.tokenType.dot:switch(this._read(),this._current.type){case i.tokenType.identifier:case this._current.keyword&&this._current.type:var b=this._current.value;return this._read(),a[b];default:this._unexpectedToken(i.tokenType.identifier,i.tokenType.reservedWord)}return;case i.tokenType.leftBracket:this._read();var c=this._evaluateValue();return this._read(i.tokenType.rightBracket),a[c]}},_evaluateAccessExpressions:function(a){for(;;)switch(this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:a=this._evaluateAccessExpression(a);break;default:return a}},_evaluateIdentifier:function(a,b){var c=this._readIdentifier();return b=a?b[c]:this._context[c]},_evaluateIdentifierExpression:function(){var a=this._evaluateIdentifier(!1);switch(this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:return this._evaluateAccessExpressions(a);default:return a}},_initialize:function(a,b,c,d){this._originalSource=b,this._tokens=a,this._context=c,this._functionContext=d,this._pos=0,this._current=this._tokens[0]},_read:function(a){a&&this._current.type!==a&&this._unexpectedToken(a),this._current!==i.tokenType.eof&&(this._current=this._tokens[++this._pos])},_peek:function(a){return a&&this._current.type!==a?void 0:this._current!==i.tokenType.eof?this._tokens[this._pos+1]:void 0},_readAccessExpression:function(a){switch(this._current.type){case i.tokenType.dot:switch(this._read(),this._current.type){case i.tokenType.identifier:case this._current.keyword&&this._current.type:a.push(this._current.value),this._read();break;default:this._unexpectedToken(i.tokenType.identifier,i.tokenType.reservedWord)}return;case i.tokenType.leftBracket:return this._read(),a.push(this._evaluateValue()),void this._read(i.tokenType.rightBracket)}},_readAccessExpressions:function(a){for(;;)switch(this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:this._readAccessExpression(a);break;default:return}},_readIdentifier:function(){var a=this._current.value;return this._read(i.tokenType.identifier),a},_readIdentifierExpression:function(){var a=[];switch(this._peek(i.tokenType.thisKeyword)&&0===a.length?this._read():a.push(this._readIdentifier()),this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:this._readAccessExpressions(a)}return a},_unexpectedToken:function(a){var b=this._current.type===i.tokenType.error?"'"+this._current.value+"'":g(this._current.type);if(a)if(1==arguments.length)a=g(a),this._error(d._formatString(h.unexpectedTokenExpectedToken,b,a,this._currentOffset()));else{for(var c=[],e=0,f=arguments.length;f>e;e++)c.push(g(arguments[e]));a=c.join(", "),this._error(d._formatString(h.unexpectedTokenExpectedTokens,b,a,this._currentOffset()))}else this._error(d._formatString(h.unexpectedTokenGeneric,b,this._currentOffset()))}},{supportedForProcessing:!1})}),OptionsInterpreter:a.Namespace._lazy(function(){return a.Class.derive(k.BaseInterpreter,function(a,b,c,d){this._initialize(a,b,c,d)},{_error:function(a){throw new c("WinJS.UI.ParseError",d._formatString(h.invalidOptionsRecord,this._originalSource,a))},_evaluateArrayLiteral:function(){var a=[];return this._read(i.tokenType.leftBracket),this._readArrayElements(a),this._read(i.tokenType.rightBracket),a},_evaluateObjectLiteral:function(){var a={};return this._read(i.tokenType.leftBrace),this._readObjectProperties(a),this._tryReadComma(),this._read(i.tokenType.rightBrace),a},_evaluateOptionsLiteral:function(){var a=this._evaluateValue();return this._current.type!==i.tokenType.eof&&this._unexpectedToken(i.tokenType.eof),a},_peekValue:function(){switch(this._current.type){case i.tokenType.falseLiteral:case i.tokenType.nullLiteral:case i.tokenType.stringLiteral:case i.tokenType.trueLiteral:case i.tokenType.numberLiteral:case i.tokenType.leftBrace:case i.tokenType.leftBracket:case i.tokenType.identifier:return!0;default:return!1}},_evaluateValue:function(){switch(this._current.type){case i.tokenType.falseLiteral:case i.tokenType.nullLiteral:case i.tokenType.stringLiteral:case i.tokenType.trueLiteral:case i.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;case i.tokenType.leftBrace:return this._evaluateObjectLiteral();case i.tokenType.leftBracket:return this._evaluateArrayLiteral();case i.tokenType.identifier:return j(this._peek(i.tokenType.identifier).type==i.tokenType.leftParentheses?this._evaluateObjectQueryExpression():this._evaluateIdentifierExpression());default:this._unexpectedToken(i.tokenType.falseLiteral,i.tokenType.nullLiteral,i.tokenType.stringLiteral,i.tokenType.trueLiteral,i.tokenType.numberLiteral,i.tokenType.leftBrace,i.tokenType.leftBracket,i.tokenType.identifier)}},_tryReadElement:function(a){return this._peekValue()?(a.push(this._evaluateValue()),!0):!1},_tryReadComma:function(){return this._peek(i.tokenType.comma)?(this._read(),!0):!1},_tryReadElision:function(a){for(var b=!1;this._tryReadComma();)a.push(void 0),b=!0;return b},_readArrayElements:function(a){for(;!this._peek(i.tokenType.rightBracket);){var b=this._tryReadElision(a),c=this._tryReadElement(a),d=this._peek(i.tokenType.comma);if(!c||!d){if(c||b)break;this._unexpectedToken(i.tokenType.falseLiteral,i.tokenType.nullLiteral,i.tokenType.stringLiteral,i.tokenType.trueLiteral,i.tokenType.numberLiteral,i.tokenType.leftBrace,i.tokenType.leftBracket,i.tokenType.identifier);break}this._read()}},_readObjectProperties:function(a){for(;!this._peek(i.tokenType.rightBrace);){var b=this._tryReadObjectProperty(a),c=this._peek(i.tokenType.comma);if(!b||!c){if(b)break;this._unexpectedToken(i.tokenType.numberLiteral,i.tokenType.stringLiteral,i.tokenType.identifier);break}this._read()}},_tryReadObjectProperty:function(a){switch(this._current.type){case i.tokenType.numberLiteral:case i.tokenType.stringLiteral:case i.tokenType.identifier:case this._current.keyword&&this._current.type:var b=this._current.value;return this._read(),this._read(i.tokenType.colon),a[b]=this._evaluateValue(),!0;default:return!1}},_failReadObjectProperty:function(){this._unexpectedToken(i.tokenType.numberLiteral,i.tokenType.stringLiteral,i.tokenType.identifier,i.tokenType.reservedWord)},_evaluateObjectQueryExpression:function(){var a=this._current.value;this._read(i.tokenType.identifier),this._read(i.tokenType.leftParentheses);var b=this._current.value;this._read(i.tokenType.stringLiteral),this._read(i.tokenType.rightParentheses);var c=j(this._functionContext[a])(b);switch(this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:return this._evaluateAccessExpressions(c);default:return c}},run:function(){return this._evaluateOptionsLiteral()}},{supportedForProcessing:!1})}),OptionsParser:a.Namespace._lazy(function(){return a.Class.derive(k.OptionsInterpreter,function(a,b){this._initialize(a,b)},{_evaluateAccessExpression:f,_evaluateAccessExpressions:f,_evaluateIdentifier:f,_evaluateIdentifierExpression:f,_evaluateObjectQueryExpression:f,_evaluateValue:function(){switch(this._current.type){case i.tokenType.falseLiteral:case i.tokenType.nullLiteral:case i.tokenType.stringLiteral:case i.tokenType.trueLiteral:case i.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;case i.tokenType.leftBrace:return this._evaluateObjectLiteral();case i.tokenType.leftBracket:return this._evaluateArrayLiteral();case i.tokenType.identifier:return this._peek(i.tokenType.identifier).type==i.tokenType.leftParentheses?this._readObjectQueryExpression():this._readIdentifierExpression();default:this._unexpectedToken(i.tokenType.falseLiteral,i.tokenType.nullLiteral,i.tokenType.stringLiteral,i.tokenType.trueLiteral,i.tokenType.numberLiteral,i.tokenType.leftBrace,i.tokenType.leftBracket,i.tokenType.identifier)}},_readIdentifierExpression:function(){var a=k.BaseInterpreter.prototype._readIdentifierExpression.call(this);return new o(a)},_readObjectQueryExpression:function(){var a=this._current.value;this._read(i.tokenType.identifier),this._read(i.tokenType.leftParentheses);var b=this._current.value;this._read(i.tokenType.stringLiteral),this._read(i.tokenType.rightParentheses);var c=new n(a,b);switch(this._current.type){case i.tokenType.dot:case i.tokenType.leftBracket:var d=[c];return this._readAccessExpressions(d),new o(d);default:return c}}},{supportedForProcessing:!1})})}),l=function(a,b,c){var d=i.lexer(a),e=new k.OptionsInterpreter(d,a,b||{},c||{});return e.run()};Object.defineProperty(l,"_BaseInterpreter",{get:function(){return k.BaseInterpreter}});var m=function(a){var b=i.lexer(a),c=new k.OptionsParser(b,a);return c.run()},n=a.Class.define(function(a,b){this.target=a,this.arg0Value=b});n.supportedForProcessing=!1;var o=a.Class.define(function(a){this.parts=a});o.supportedForProcessing=!1;var p={optionsParser:l,_optionsParser:m,_CallExpression:n,_IdentifierExpression:o};return a.Namespace.define("WinJS.UI",p),a.Namespace.defineWithParent(null,null,p)}),define("WinJS/ControlProcessor",["./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_Resources","./Core/_WriteProfilerMark","./ControlProcessor/_OptionsParser","./Promise","./Utilities/_ElementUtilities"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=function(b){for(var c,d=a;d;){if(d.msParentSelectorScope){var e=d.parentNode;if(e&&(c=h._matchesSelector(e,b)?e:e.querySelector(b)))break}d=d.parentNode}return c||document.querySelector(b)};return q(b)}function j(b,c){return new g(function(e,g){try{var h,j=b.getAttribute("data-win-options");j&&(h=f.optionsParser(j,a,{select:i(b)}));var k,l=1;c.length>2&&l++;var m=function(){l--,0===l&&(b.winControl=b.winControl||k,e(k))};k=new c(b,h,m),m()}catch(n){WinJS.log&&WinJS.log(d._formatString(p.errorActivatingControl,n&&n.message),"winjs controls","error"),g(n)}})}function k(a,b){return new g(function(c,d){e("WinJS.UI:processAll,StartTM"),a=a||document.body;var f=0,g="[data-win-control]",h=a.querySelectorAll(g),i=[];!b&&l(a)&&i.push(a);for(var k=0,m=h.length;m>k;k++)i.push(h[k]);if(0===i.length)return e("WinJS.UI:processAll,StopTM"),void c(a);for(var o=function(){f-=1,0>f&&(e("WinJS.UI:processAll,StopTM"),c(a))},p=new Array(i.length),k=0,m=i.length;m>k;k++){var q,s=i[k],t=s.winControl;t?q=t.constructor:p[k]=q=l(s),q&&q.isDeclarativeControlContainer&&(k+=s.querySelectorAll(g).length)}e("WinJS.UI:processAllActivateControls,StartTM");for(var k=0,m=i.length;m>k;k++){var u=p[k],s=i[k];if(u&&!s.winControl&&(f++,j(s,u).then(o,function(a){e("WinJS.UI:processAll,StopTM"),d(a)}),u.isDeclarativeControlContainer&&"function"==typeof u.isDeclarativeControlContainer)){var v=r(u.isDeclarativeControlContainer);v(s.winControl,n)}}e("WinJS.UI:processAllActivateControls,StopTM"),o()})}function l(b){if(b.getAttribute){var d=b.getAttribute("data-win-control");if(d)return c._getMemberFiltered(d.trim(),a,r)}}function m(a,b){return i(b)(a)}function n(a,b){return s?k(a,b):c.ready().then(function(){return s=!0,k(a,b)})}function o(a){if(a&&a.winControl)return g.as(a.winControl);var b=l(a);return b?j(a,b):g.as()}if(a.document){var p={get errorActivatingControl(){return d._getWinJSString("base/errorActivatingControl").value}},q=c.markSupportedForProcessing,r=c.requireSupportedForProcessing,s=!1,t={scopedSelect:m,processAll:n,process:o};return b.Namespace.define("WinJS.UI",t),b.Namespace.defineWithParent(null,null,t)}}),define("WinJS/Utilities/_ElementListUtilities",["../Core/_Global","../Core/_Base","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_ElementUtilities"],function(a,b,c,d,e,f){"use strict";if(a.document){var g={QueryCollection:b.Class.derive(Array,function(a){a&&this.include(a)},{forEach:function(a,b){return Array.prototype.forEach.apply(this,[a,b]),this},get:function(a){return this[a]},setAttribute:function(a,b){return this.forEach(function(c){c.setAttribute(a,b)}),this},getAttribute:function(a){return this.length>0?this[0].getAttribute(a):void 0},addClass:function(a){return this.forEach(function(b){f.addClass(b,a)}),this},hasClass:function(a){return this.length>0?f.hasClass(this[0],a):!1},removeClass:function(a){return this.forEach(function(b){f.removeClass(b,a)}),this},toggleClass:function(a){return this.forEach(function(b){f.toggleClass(b,a)}),this},listen:function(a,b,c){return this.forEach(function(d){d.addEventListener(a,b,c)}),this},removeEventListener:function(a,b,c){return this.forEach(function(d){d.removeEventListener(a,b,c)}),this},setStyle:function(a,b){return this.forEach(function(c){c.style[a]=b}),this},clearStyle:function(a){return this.forEach(function(b){b.style[a]=""}),this},query:function(a){var b=new WinJS.Utilities.QueryCollection;return this.forEach(function(c){b.include(c.querySelectorAll(a))}),b},include:function(a){if("number"==typeof a.length)for(var b=0;b<a.length;b++)this.push(a[b]);else a.DOCUMENT_FRAGMENT_NODE&&a.nodeType===a.DOCUMENT_FRAGMENT_NODE?this.include(a.childNodes):this.push(a)},control:function(a,b){return a&&"function"==typeof a?this.forEach(function(c){c.winControl=new a(c,b)}):(b=a,this.forEach(function(a){c.process(a).done(function(a){a&&e.setOptions(a,b)})})),this},template:function(a,b,c){a instanceof WinJS.Utilities.QueryCollection&&(a=a[0]);var e=a.winControl;null!==b&&void 0!==b&&b.forEach||(b=[b]),c=c||function(){};var f=this,g=[];return b.forEach(function(a){f.forEach(function(b){g.push(e.render(a,b))})}),c(d.join(g)),this}},{supportedForProcessing:!1}),query:function(a,b){return new WinJS.Utilities.QueryCollection((b||document).querySelectorAll(a))},id:function(a){var b=document.getElementById(a);return new WinJS.Utilities.QueryCollection(b?[b]:[])},children:function(a){return new WinJS.Utilities.QueryCollection(a.children)}};return b.Namespace.define("WinJS.Utilities",g),b.Namespace.defineWithParent(null,null,g)}}),define("WinJS/Utilities/_KeyboardBehavior",["../Core/_Global","../Core/_Base","./_Control","./_ElementUtilities"],function(a,b,c,d){"use strict";if(a.document){var e=!1;a.addEventListener("pointerdown",function(){e&&(e=!1)},!0),a.addEventListener("keydown",function(){e||(e=!0)},!0);var f={_keyboardSeenLast:{get:function(){return e},set:function(a){e=a}},_WinKeyboard:function(a){a.addEventListener("pointerdown",function(a){d.removeClass(a.target,"win-keyboard")},!0),a.addEventListener("keydown",function(a){d.addClass(a.target,"win-keyboard")},!0),d._addEventListener(a,"focusin",function(a){WinJS.UI._keyboardSeenLast&&d.addClass(a.target,"win-keyboard")},!1),d._addEventListener(a,"focusout",function(a){d.removeClass(a.target,"win-keyboard")},!1)},_KeyboardBehavior:b.Namespace._lazy(function(){var a=d.Key,e=b.Class.define(function(a,b){a=a||document.createElement("DIV"),b=b||{},a._keyboardBehavior=this,this._element=a,this._fixedDirection=e.FixedDirection.width,this._fixedSize=1,this._currentIndex=0,c.setOptions(this,b),this._element.addEventListener("keydown",this._keyDownHandler.bind(this)),this._element.addEventListener("pointerdown",this._MSPointerDownHandler.bind(this)),this._element.addEventListener("beforeactivate",this._beforeActivateHandler.bind(this))},{element:{get:function(){return this._element}},fixedDirection:{get:function(){return this._fixedDirection},set:function(a){this._fixedDirection=a}},fixedSize:{get:function(){return this._fixedSize},set:function(a){+a===a&&(a=Math.max(1,a),this._fixedSize=a)}},currentIndex:{get:function(){return this._element.children.length>0?this._currentIndex:-1},set:function(a){if(+a===a){var b=this._element.children.length;a=Math.max(0,Math.min(b-1,a)),this._currentIndex=a}}},getAdjacent:{get:function(){return this._getAdjacent},set:function(a){this._getAdjacent=a}},scroller:{get:function(){return this._scroller},set:function(a){this._scroller=a}},_keyDownHandler:function(b){if(!b.altKey){if(d._matchesSelector(b.target,".win-interactive, .win-interactive *"))return;var c=!1,f=this.currentIndex,g=this._element.children.length-1,h="rtl"===getComputedStyle(this._element).direction,i=h?a.rightArrow:a.leftArrow,j=h?a.leftArrow:a.rightArrow,k=this.getAdjacent&&this.getAdjacent(f,b.keyCode);if(+k===k)c=!0,f=k;else{var l=f%this.fixedSize;b.keyCode===i?(c=!0,this.fixedDirection===e.FixedDirection.width?0!==l&&f--:f>=this.fixedSize&&(f-=this.fixedSize)):b.keyCode===j?(c=!0,this.fixedDirection===e.FixedDirection.width?l!==this.fixedSize-1&&f++:f+this.fixedSize-l<=g&&(f+=this.fixedSize)):b.keyCode===a.upArrow?(c=!0,this.fixedDirection===e.FixedDirection.height?0!==l&&f--:f>=this.fixedSize&&(f-=this.fixedSize)):b.keyCode===a.downArrow?(c=!0,this.fixedDirection===e.FixedDirection.height?l!==this.fixedSize-1&&f++:f+this.fixedSize-l<=g&&(f+=this.fixedSize)):b.keyCode===a.home?(c=!0,f=0):b.keyCode===a.end?(c=!0,f=this._element.children.length-1):b.keyCode===a.pageUp?c=!0:b.keyCode===a.pageDown&&(c=!0)}f=Math.max(0,Math.min(this._element.children.length-1,f)),f!==this.currentIndex&&(this._focus(f,b.keyCode),(b.keyCode===i||b.keyCode===j||b.keyCode===a.upArrow||b.keyCode===a.downArrow)&&b.stopPropagation()),c&&b.preventDefault()}},_focus:function(a,b){a=+a===a?a:this.currentIndex;var c=this._element.children[a];c&&(c.winControl&&c.winControl._getFocusInto&&(c=c.winControl._getFocusInto(b)),this.currentIndex=a,d._setActive(c,this.scroller))},_MSPointerDownHandler:function(a){var b=a.target;if(b!==this.element){for(;b.parentNode!==this.element;)b=b.parentNode;for(var c=-1;b;)c++,b=b.previousElementSibling;this.currentIndex=c}},_beforeActivateHandler:function(a){var b=!1;if(this._element.children.length){var c=this._element.children[this.currentIndex];(c===a.target||c.contains(a.target))&&(b=!0)}b||(a.stopPropagation(),a.preventDefault())}},{FixedDirection:{height:"height",width:"width"}});return e})};return b.Namespace.define("WinJS.UI",f),b.Namespace.defineWithParent(null,null,f)}}),define("WinJS/Utilities/_SafeHtml",["../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources"],function(a,b,c,d){"use strict";var e,f,g,h,i,j,k={get nonStaticHTML(){return d._getWinJSString("base/nonStaticHTML").value}};e=f=function(a,b){a.innerHTML=b},g=h=function(a,b){a.outerHTML=b},i=j=function(a,b,c){a.insertAdjacentHTML(b,c)};var l=a.MSApp;if(l)f=function(a,b){l.execUnsafeLocalFunction(function(){a.innerHTML=b})},h=function(a,b){l.execUnsafeLocalFunction(function(){a.outerHTML=b})},j=function(a,b,c){l.execUnsafeLocalFunction(function(){a.insertAdjacentHTML(b,c)})};else if(a.msIsStaticHTML){var m=function(b){if(!a.msIsStaticHTML(b))throw new c("WinJS.Utitilies.NonStaticHTML",k.nonStaticHTML)};e=function(a,b){m(b),a.innerHTML=b},g=function(a,b){m(b),a.outerHTML=b},i=function(a,b,c){m(c),a.insertAdjacentHTML(b,c)}}var n={setInnerHTML:e,setInnerHTMLUnsafe:f,setOuterHTML:g,setOuterHTMLUnsafe:h,insertAdjacentHTML:i,insertAdjacentHTMLUnsafe:j};return b.Namespace.define("WinJS.Utilities",n),b.Namespace.defineWithParent(null,null,n)}),define("WinJS/Utilities/_Select",["../Core/_Base","./_SafeHtml"],function(a,b){"use strict";var c={_Select:a.Namespace._lazy(function(){function c(a){return a.replace(h,function(a){return i[a]||""})}function d(a){return a.replace(j,"")}function e(a){return this[a]}function f(){return this.length}function g(a){return a.getValue||(a.getValue=e),a.getLength||(a.getLength=f),a}var h=/[&<>'"]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},j=/[\u200e\u200f]/g;return a.Class.define(function(a,b){this._dataSource=g(b.dataSource),this._index=b.index||0,this._domElement=a,this._domElement.tabIndex=0,b.disabled&&this.setDisabled(b.disabled);var c=this;this._domElement.addEventListener("change",function(){c._index=c._domElement.selectedIndex},!1),this._createSelectElement()},{_index:0,_dataSource:null,dataSource:{get:function(){return this._dataSource},set:function(a){this._dataSource=g(a),this._domElement&&this._createSelectElement()}},setDisabled:function(a){a?this._domElement.setAttribute("disabled","disabled"):this._domElement.removeAttribute("disabled")},_createSelectElement:function(){for(var a=this._dataSource.getLength(),e="",f=0;a>f;f++){var g=""+this._dataSource.getValue(f),h=c(g),i=d(h);e+="<option value='"+i+"'>"+h+"</option>"}b.setInnerHTMLUnsafe(this._domElement,e),this._domElement.selectedIndex=this._index},index:{get:function(){return Math.max(0,Math.min(this._index,this._dataSource.getLength()-1))},set:function(a){if(this._index!==a){this._index=a;var b=this._domElement;b&&b.selectedIndex!==a&&(b.selectedIndex=a)}}},value:{get:function(){return this._dataSource.getValue(this.index)}}})})};return a.Namespace.define("WinJS.UI",c),a.Namespace.defineWithParent(null,null,c)}),define("WinJS/Utilities/_TabContainer",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","./_ElementUtilities"],function(a,b,c,d){"use strict";function e(b,c,d,e){var f=document.createEvent("UIEvent");return f.initUIEvent(c,!1,!!e,a,d?1:0),!b.dispatchEvent(f)}function f(a){var b=getComputedStyle(a);if("none"===b.display||"hidden"===b.visibility)return NodeFilter.FILTER_REJECT;if(a._tabContainer)return NodeFilter.FILTER_ACCEPT;if(a.parentNode&&a.parentNode._tabContainer){var c=a.parentNode._tabContainer.childFocus;return c&&a.contains(c)?i(a)>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT}var d=i(a);return d>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}function g(a){function b(){if(a.currentNode._tabContainer)e=e.concat(g(a));else if(i(a.currentNode)>=0&&e.push(a.currentNode),a.firstChild()){do b();while(a.nextSibling());a.parentNode()}}var c=a.currentNode,d=c._tabContainer.childFocus,e=[];return d?(a.currentNode=d,b(),a.currentNode=c,e):[]}function h(a,b){function c(){var a=document.createElement("DIV");return a.tabIndex=b?b:0,a.setAttribute("aria-hidden",!0),a}var d=a.parentNode,f=c();d.insertBefore(f,a);var g=c();d.insertBefore(g,a.nextSibling),f.addEventListener("focus",function(){e(a,"onTabEnter",!0)},!0),g.addEventListener("focus",function(){e(a,"onTabEnter",!1)},!0),this._catcherBegin=f,this._catcherEnd=g;var h=1;this.addRef=function(){h++},this.release=function(){return 0===--h&&(f.parentElement&&d.removeChild(f),g.parentElement&&d.removeChild(g)),h},this.updateTabIndex=function(a){f.tabIndex=a,g.tabIndex=a}}if(a.document){var i=d.getTabIndex,j={attach:function(a,b){return a["win-trackTabHelperObject"]?a["win-trackTabHelperObject"].addRef():a["win-trackTabHelperObject"]=new h(a,b),a["win-trackTabHelperObject"]},detach:function(a){a["win-trackTabHelperObject"].release()||delete a["win-trackTabHelperObject"]}},k={TrackTabBehavior:j,TabContainer:b.Class.define(function(a){this._element=a,this._tabIndex=0,a._tabContainer=this,null===a.getAttribute("tabindex")&&(a.tabIndex=-1);var b=this;a.addEventListener("onTabEnter",function(c){var d=e(b._element,"onTabEntered",c.detail,!0);d||(b.childFocus?b.childFocus.focus():a.focus())}),a.addEventListener("keydown",function(a){var f=a.target;if(a.keyCode===d.Key.tab){var g=!a.shiftKey,h=b._hasMoreElementsInTabOrder(f,g);if(!h){var i=e(b._element,"onTabExiting",g,!0);if(i)return a.stopPropagation(),void a.preventDefault();for(var j=b._element.querySelectorAll("a[href],area[href],button,command,input,link,menuitem,object,select,textarea,th[sorted],[tabindex]"),k=j.length,l=[],m=0;k>m;m++){var n=j[m];l.push(n.tabIndex),n.tabIndex=-1}b._elementTabHelper[g?"_catcherEnd":"_catcherBegin"].tabIndex=-1;var o=function(){f.removeEventListener("blur",o,!1);for(var a=0;k>a;a++)-1!==l[a]&&(j[a].tabIndex=l[a]);b._elementTabHelper._catcherBegin.tabIndex=b._tabIndex,b._elementTabHelper._catcherEnd.tabIndex=b._tabIndex};f.addEventListener("blur",o,!1),c._yieldForEvents(function(){e(b._element,"onTabExit",g)})}}}),this._elementTabHelper=j.attach(a,this._tabIndex),this._elementTabHelper._catcherBegin.tabIndex=0,this._elementTabHelper._catcherEnd.tabIndex=0},{dispose:function(){j.detach(this._element,this._tabIndex)},childFocus:{set:function(a){a!=this._focusElement&&(this._focusElement=a&&a.parentNode?a:null)},get:function(){return this._focusElement}},tabIndex:{set:function(a){this._tabIndex=a,this._elementTabHelper.updateTabIndex(a)},get:function(){return this._tabIndex}},_element:null,_skipper:function(a){a.stopPropagation(),a.preventDefault()},_hasMoreElementsInTabOrder:function(a,b){if(!this.childFocus)return!1;for(var c=document.createTreeWalker(this._element,NodeFilter.SHOW_ELEMENT,f,!1),d=g(c),e=0;e<d.length;e++)if(d[e]===a)return b?e<d.length-1:e>0;return!1},_focusElement:null},{supportedForProcessing:!1})};return b.Namespace.define("WinJS.UI",k),b.Namespace.defineWithParent(null,null,k)}}),define("WinJS/Utilities/_UI",["../Core/_BaseCoreUtils","../Core/_Base"],function(a,b){"use strict";var c={eventHandler:function(b){return a.markSupportedForProcessing(b)},Orientation:{horizontal:"horizontal",vertical:"vertical"},CountResult:{unknown:"unknown"},CountError:{noResponse:"noResponse"},DataSourceStatus:{ready:"ready",waiting:"waiting",failure:"failure"},FetchError:{noResponse:"noResponse",doesNotExist:"doesNotExist"},EditError:{noResponse:"noResponse",canceled:"canceled",notPermitted:"notPermitted",noLongerMeaningful:"noLongerMeaningful"},ObjectType:{item:"item",groupHeader:"groupHeader"},SelectionMode:{none:"none",single:"single",multi:"multi"},TapBehavior:{directSelect:"directSelect",toggleSelect:"toggleSelect",invokeOnly:"invokeOnly",none:"none"},SwipeBehavior:{select:"select",none:"none"},GroupHeaderTapBehavior:{invoke:"invoke",none:"none"}};return b.Namespace.define("WinJS.UI",c),b.Namespace.defineWithParent(null,null,c)}),define("WinJS/Utilities/_UIUtilities",["../Core/_Base","./_ElementUtilities"],function(a,b){"use strict";var c={_deprecated:function(a){console.warn(a)},_syncRenderer:function(a,b){if(b=b||"div","function"==typeof a)return function(b,c){return c?(c.appendChild(a(b)),c):a(b)};var c;return"function"==typeof a.render?c=a:a.winControl&&"function"==typeof a.winControl.render&&(c=a.winControl),function(a,d){var e=d||document.createElement(b);if(c.render(a,e),d)return d;var f=e.firstElementChild;if(f&&e.dispose){var g=f.dispose;f.dispose=function(){f.dispose=g,e.appendChild(f),e.dispose()}}return f}},_getLowestTabIndexInList:function(a){for(var b,c=0,d=0;d<a.length;d++)b=parseInt(a[d].getAttribute("tabIndex"),10),b>0&&(c>b||!c)&&(c=b);return c},_getHighestTabIndexInList:function(a){for(var b,c=0,d=0;d<a.length;d++){if(b=parseInt(a[d].getAttribute("tabIndex"),10),0===b)return b;b>c&&(c=b)}return c},_trySetActive:function(a,b){return this._tryFocus(a,!0,b)},_tryFocus:function(a,c,d){var e=document.activeElement;if(a===e)return!0;var f=b.getTabIndex(a)>=0;return f?(c?b._setActive(a,d):a.focus(),e!==document.activeElement?!0:!1):!1},_setActiveFirstFocusableElement:function(a,b){return this._focusFirstFocusableElement(a,!0,b)},_focusFirstFocusableElement:function(a,b,c){for(var d=a.getElementsByTagName("*"),e=this._getLowestTabIndexInList(d),f=0;e;){for(var g=0;g<d.length;g++)if(d[g].tabIndex===e){if(this._tryFocus(d[g],b,c))return!0}else e<d[g].tabIndex&&(d[g].tabIndex<f||0===f)&&(f=d[g].tabIndex);e=f,f=0}for(g=0;g<d.length;g++)if(this._tryFocus(d[g],b,c))return!0;return!1},_setActiveLastFocusableElement:function(a,b){return this._focusLastFocusableElement(a,!0,b)},_focusLastFocusableElement:function(a,b,c){{var d=a.getElementsByTagName("*"),e=this._getHighestTabIndexInList(d),f=0;document.activeElement}if(0===e){for(var g=d.length-1;g>=0;g--)if(d[g].tabIndex===e){if(this._tryFocus(d[g],b,c))return!0}else f<d[g].tabIndex&&(f=d[g].tabIndex);e=f,f=0}for(;e;){for(g=d.length-1;g>=0;g--)if(d[g].tabIndex===e){if(this._tryFocus(d[g],b,c))return!0}else f<d[g].tabIndex&&d[g].tabIndex<e&&(f=d[g].tabIndex);e=f,f=0}for(g=d.length-2;g>0;g--)if(this._tryFocus(d[g],b,c))return!0;return!1}};return a.Namespace.define("WinJS.Utilities",c),a.Namespace.defineWithParent(null,null,c)}),define("WinJS/Utilities/_Xhr",["../Core/_Base","../Promise","../Scheduler"],function(a,b,c){"use strict";function d(a,b,d){c.schedule(function(){a(b)},d,null,"WinJS.xhr")}function e(){}function f(a){var f;return new b(function(b,g,h){var i=c.currentPriority;f=new XMLHttpRequest,f.onreadystatechange=function(){return f._canceled?void(f.onreadystatechange=e):void(4===f.readyState?(f.status>=200&&f.status<300||0===f.status&&"file://"===a.url.toLowerCase().substr(0,7)?d(b,f,i):d(g,f,i),f.onreadystatechange=e):d(h,f,i))},f.open(a.type||"GET",a.url,!0,a.user,a.password),f.responseType=a.responseType||"",Object.keys(a.headers||{}).forEach(function(b){f.setRequestHeader(b,a.headers[b])}),a.customRequestInitializer&&a.customRequestInitializer(f),void 0===a.data?f.send():f.send(a.data)},function(){f.onreadystatechange=e,f._canceled=!0,f.abort()})}return a.Namespace.define("WinJS",{xhr:f}),f}),define("WinJS/Utilities",["./Utilities/_Control","./Utilities/_Dispose","./Utilities/_ElementListUtilities","./Utilities/_ElementUtilities","./Utilities/_KeyboardBehavior","./Utilities/_SafeHtml","./Utilities/_Select","./Utilities/_TabContainer","./Utilities/_UI","./Utilities/_UIUtilities","./Utilities/_Xhr"],function(){}),define("WinJS/Fragments",["./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./Core/_WriteProfilerMark","./Promise","./Utilities/_ElementUtilities","./Utilities/_SafeHtml","./Utilities/_Xhr"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c,d){var e=a.src,f=!e;if(f&&(e=b+"script["+c+"]"),e=e.toLowerCase(),!(e in D)){var h=null;D[e]=!0;var i=document.createElement("script");if(a.language&&i.setAttribute("language","javascript"),i.setAttribute("type",a.type),i.setAttribute("async","false"),a.id&&i.setAttribute("id",a.id),f){var j=a.text;h=d.then(function(){i.text=j}).then(null,function(){})}else h=new g(function(b){i.onload=i.onerror=function(){b()},i.setAttribute("src",a.src)});return C.appendChild(i),{promise:h,inline:f}}}function l(a,b,c){var d=(b+"script["+c+"]").toLowerCase();d in E||(E[d]=!0,C.appendChild(a.cloneNode(!0)))
}function m(a){var b=a.href.toLowerCase();if(!(b in F)){F[b]=!0;var c=a.cloneNode(!1);c.href=a.href,C.appendChild(c)}}function n(a,b){if("string"==typeof a)return p(a,b);var c={docfrag:h.data(a).docFragment};if(!c.docfrag){for(var d=document.createDocumentFragment();a.childNodes.length>0;)d.appendChild(a.childNodes[0]);c.docfrag=h.data(a).docFragment=d,a.setAttribute("data-win-hasfragment","")}return b&&w(a),g.as(c)}function o(a,b){return y(a,b).then(function(){return a.document?q(b,a):a}).then(function(){return a.document&&delete a.document,a})}function p(a,b){var c=a.toLowerCase(),d=H[c];if(d)return b&&delete H[c],d.promise?d.promise:g.as(d);d={},b||(H[c]=d);var e=d.promise=o(d,a);return d.promise.then(function(){delete d.promise}),e}function q(a,b){var c=b.document,d=c.body,e=[];B(c.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),m),B(c.getElementsByTagName("style"),function(b,c){l(b,a,c)});var f=g.as();B(c.getElementsByTagName("script"),function(b,c){var d=k(b,a,c,f);d&&(d.inline||(f=d.promise),e.push(d.promise))}),B(d.getElementsByTagName("img"),function(a){a.src=a.src}),B(d.getElementsByTagName("a"),function(a){if(""!==a.href){var b=a.getAttribute("href");b&&"#"!=b[0]&&(a.href=a.href)}});for(var h=d.getElementsByTagName("script");h.length>0;){var i=h[0];i.parentNode.removeChild(i)}return g.join(e).then(function(){for(var a=document.createDocumentFragment(),d=document.importNode(c.body,!0);d.childNodes.length>0;)a.appendChild(d.childNodes[0]);return b.docfrag=a,b})}function r(){G||(G=!0,B(C.querySelectorAll("script"),function(a){D[a.src.toLowerCase()]=!0}),B(C.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),function(a){F[a.href.toLowerCase()]=!0}))}function s(a,b){return t(a,b,!0)}function t(a,b,d){var e=(a instanceof HTMLElement?c._getProfilerMarkIdentifier(a):" href='"+a+"'")+"["+ ++I+"]";return f("WinJS.UI.Fragments:render"+e+",StartTM"),r(),n(a,!d).then(function(a){var c=a.docfrag;d&&(c=c.cloneNode(!0));for(var g=c.firstChild;g;)1===g.nodeType&&(g.msParentSelectorScope=!0),g=g.nextSibling;var h;return b?(b.appendChild(c),h=b):h=c,f("WinJS.UI.Fragments:render"+e+",StopTM"),h})}function u(a,b){return t(a,b,!1)}function v(a){return r(),n(a).then(function(a){return a.docfrag})}function w(a){a?"string"==typeof a?delete H[a.toLowerCase()]:(delete h.data(a).docFragment,a.removeAttribute("data-win-hasfragment")):H={}}function x(a){if(c.hasWinRT){var b=document.createElement("a");b.href=a;var e=b.href,f=new Windows.Foundation.Uri(e),g=f.schemeName;if("ms-appx"!==g)throw new d("WinJS.UI.Fragments.InvalidUri",A.invalidFragmentUri);return e}return a}function y(a,b){b=WinJS.UI.Fragments._forceLocal(b);var c=document.implementation.createHTMLDocument("frag"),d=c.createElement("base");c.head.appendChild(d);var e=c.createElement("a");return c.body.appendChild(e),d.href=document.location.href,e.setAttribute("href",b),d.href=e.href,a.document=c,WinJS.UI.Fragments._getFragmentContents(b).then(function(a){i.setInnerHTMLUnsafe(c.documentElement,a),c.head.appendChild(d)})}function z(a){return j({url:a}).then(function(a){return a.responseText})}var A={get invalidFragmentUri(){return e._getWinJSString("base/invalidFragmentUri").value}};if(a.document){var B=function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},C=document.head||document.getElementsByTagName("head")[0],D={},E={},F={},G=!1,H={},I=1,J={renderCopy:s,render:u,cache:v,clearCache:w,_cacheStore:{get:function(){return H}},_forceLocal:x,_getFragmentContents:z};return b.Namespace.define("WinJS.UI.Fragments",J),b.Namespace.defineWithParent(null,null,J)}}),define("WinJS/Application/_State",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Promise"],function(a,b,c,d){"use strict";function e(){var a,c,d,e=b.Class.define(function(a){this.folder=a,this._path=a.path,a.tryGetItemAsync&&(this._tryGetItemAsync=a.tryGetItemAsync.bind(a))},{_tryGetItemAsync:function(a){return this.folder.getFileAsync(a).then(null,function(){return!1})},exists:function(a){return this._tryGetItemAsync(a).then(function(a){return a?!0:!1})},remove:function(a){return this._tryGetItemAsync(a).then(function(a){return a?a.deleteAsync():!1}).then(null,function(){return!1})},writeText:function(a,b){var c=Windows.Storage,d=this;return d.folder.createFileAsync(a,c.CreationCollisionOption.openIfExists).then(function(a){return c.FileIO?c.FileIO.writeTextAsync(a,b):c.StorageHelpers.writeAllTextUsingFileAsync(a,b)})},readText:function(a,b){var c=Windows.Storage;return this._tryGetItemAsync(a).then(function(a){return a?c.FileIO.readTextAsync(a):b}).then(null,function(){return b})}},{supportedForProcessing:!1});b.Namespace.define("WinJS.Application",{local:{get:function(){return a||(a=new e(Windows.Storage.ApplicationData.current.localFolder)),a}},temp:{get:function(){return c||(c=new e(Windows.Storage.ApplicationData.current.temporaryFolder)),c}},roaming:{get:function(){return d||(d=new e(Windows.Storage.ApplicationData.current.roamingFolder)),d}}})}function f(){var a=b.Class.define(function(){this.storage={}},{exists:function(a){return d.as(void 0!==this.storage[a])},remove:function(a){return delete this.storage[a],d.as()},writeText:function(a,b){return this.storage[a]=b,d.as(b.length)},readText:function(a,b){var c=this.storage[a];return d.as("string"==typeof c?c:b)}},{supportedForProcessing:!1});b.Namespace.define("WinJS.Application",{local:new a,temp:new a,roaming:new a})}c.hasWinRT?e():f(),b.Namespace.define("WinJS.Application",{sessionState:{},_loadState:function(a){var b=WinJS.Application;return 3===a.previousExecutionState?b.local.readText("_sessionState.json","{}").then(function(a){var c=JSON.parse(a);c&&Object.keys(c).length>0&&(b._sessionStateLoaded=!0),b.sessionState=c}).then(null,function(){b.sessionState={}}):d.as()},_oncheckpoint:function(b){if(!(a.MSApp&&MSApp.getViewOpener&&MSApp.getViewOpener())){var c=WinJS.Application,d=c.sessionState;if(d&&Object.keys(d).length>0||c._sessionStateLoaded){var e;try{e=JSON.stringify(d)}catch(b){e="",WinJS.Application.queueEvent({type:"error",detail:b})}b.setPromise(c.local.writeText("_sessionState.json",e).then(null,function(a){c.queueEvent({type:"error",detail:a})}))}}}})}),define("WinJS/Navigation",["./Core/_Base","./Core/_Events","./Core/_WriteProfilerMark","./Promise"],function(a,b,c,d){"use strict";var e="navigated",f="navigating",g="beforenavigate",h=a.Class.mix(a.Class.define(null,{},{supportedForProcessing:!1}),b.eventMixin),i=new h,j={backStack:[],current:{location:"",initialPlaceholder:!0},forwardStack:[]},k=function(a){return c("WinJS.Navigation:navigation,StartTM"),d.as().then(function(){var b=d.as(),c=i.dispatchEvent(g,{setPromise:function(a){b=b.then(function(){return a})},location:a.location,state:a.state});return b.then(function(a){return c||a})})},l=function(a){return d.as().then(function(){var b=d.as();return i.dispatchEvent(f,{setPromise:function(a){b=b.then(function(){return a})},location:j.current.location,state:j.current.state,delta:a}),b})},m=function(a,b){c("WinJS.Navigation:navigation,StopTM");var f=d.as(),g={value:a,location:j.current.location,state:j.current.state,setPromise:function(a){f=f.then(function(){return a})}};return!a&&b&&(g.error=b),i.dispatchEvent(e,g),f},n=function(a,b,c,e){return a=Math.min(a,b.length),a>0?k(b[b.length-a]).then(function(d){if(d)return!1;for(c.push(j.current);a-1>0;)a--,c.push(b.pop());return j.current=b.pop(),l(e).then(m,function(a){throw m(void 0,a||!0),a}).then(function(){return!0})}):d.wrap(!1)};return a.Namespace.define("WinJS.Navigation",{canGoForward:{get:function(){return j.forwardStack.length>0}},canGoBack:{get:function(){return j.backStack.length>0}},location:{get:function(){return j.current.location}},state:{get:function(){return j.current.state},set:function(a){j.current.state=a}},history:{get:function(){return j},set:function(a){var b=j=a;b.backStack=b.backStack||[],b.forwardStack=b.forwardStack||[],b.current=b.current||{location:"",initialPlaceholder:!0},b.current.location=b.current.location||""}},forward:function(a){return a=a||1,n(a,j.forwardStack,j.backStack,a)},back:function(a){return a=a||1,n(a,j.backStack,j.forwardStack,-a)},navigate:function(a,b){var c={location:a,state:b};return k(c).then(function(a){return a?!1:(j.current.initialPlaceholder||j.backStack.push(j.current),j.forwardStack=[],j.current=c,l().then(m,function(a){throw m(void 0,a||!0),a}).then(function(){return!0}))})},addEventListener:function(a,b,c){i.addEventListener(a,b,c)},removeEventListener:function(a,b,c){i.removeEventListener(a,b,c)}}),Object.defineProperties(WinJS.Navigation,b.createEventProperties(e,f,g)),WinJS.Navigation}),define("WinJS/Application",["./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_Events","./Core/_WriteProfilerMark","./Application/_State","./Navigation","./Promise","./_Signal","./Scheduler"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){var b;try{b=JSON.stringify(a)}catch(c){b=JSON.stringify("[object]")}return b}function l(a){var b="def"+X++;return{deferral:W[b]=a.getDeferral(),id:b}}function m(a,b){b&&(a=W[b],delete W[b]),a&&a.complete()}function n(){W&&(Object.keys(W).forEach(function(a){W[a].complete()}),W={})}function o(a){function b(b){return e("WinJS.Application:Event_"+a.type+",StopTM"),a._deferral&&m(a._deferral,a._deferralID),b}e("WinJS.Application:Event_"+a.type+",StartTM");var c=h.as();a.setPromise=function(a){c=c.then(function(){return a})},a.detail=a.detail||{},"object"==typeof a.detail&&(a.detail.setPromise=a.setPromise);try{if(V._listeners){var d=!1;f=V._listeners[a.type],f&&f.forEach(function(b){d=b.listener(a)||d})}var f=Z[a.type];f&&f.forEach(function(b){b(a,d)})}catch(g){t({type:L,detail:g})}return c.then(b,function(a){return a=b(a),a&&"Canceled"===a.name?void 0:h.wrapError(a)})}function p(){return Q||(Q=new i,Q.promise.done(function(){Q=null},function(){Q=null})),Q}function q(a){function b(a){t({type:L,detail:a})}return 0===a.length?p().promise:o(a.shift()).then(null,b)}function r(a){function b(){return r}var c=a.job._queue;0===c.length&&O.length>0&&(c=a.job._queue=u()),a.setPromise(q(c).then(b,b))}function s(){function a(){d=!0}for(var b,c=[],d=!0;d;)0===c.length&&O.length>0&&(c=u()),d=!1,b=q(c),b.done(a,a);P=j.schedule(function(a){function c(){return r}a.setPromise(b.then(c,c))},j.Priority.high,null,"WinJS.Application._pumpEventQueue"),P._queue=c}function t(a){e("WinJS.Application:Event_"+a.type+" queued,Info"),O.push(a),R&&Q&&Q.complete(r)}function u(){var a=O;return O=[],a}function v(a){var b=l(a.activatedOperation);WinJS.Application._loadState(a).then(function(){t({type:I,detail:a,_deferral:b.deferral,_deferralID:b.id})})}function w(a){var b=l(a.suspendingOperation);WinJS.Application.queueEvent({type:G,_deferral:b.deferral,_deferralID:b.id})}function x(){if(t({type:J}),!T){var a={arguments:"",kind:"Windows.Launch",previousExecutionState:0};WinJS.Application._loadState(a).then(function(){t({type:I,detail:a})})}}function y(){n(),t({type:H})}function z(a){var b={};for(var c in a)b[c]=a[c];var d,e=!0,f=WinJS.Application._terminateApp;try{WinJS.Application._terminateApp=function(a,b){e=!1,d=a,f!==Y&&f(a,b)},o({type:L,detail:{error:b,errorLine:a.lineno,errorCharacter:a.colno,errorUrl:a.filename,errorMessage:a.message}})}finally{WinJS.Application._terminateApp=f}return e}function A(a){var b=a.detail,c=b.id;if(b.parent)return void(b.handler&&F&&delete F[c]);var d=!F;F=F||[],F[c]=b,d&&j.schedule(function(){var a=F;F=null,a.forEach(function(a){t({type:L,detail:a})})},j.Priority.high,null,"WinJS.Application._queuePromiseErrors")}function B(a){var b={e:a,applicationcommands:void 0};V.dispatchEvent(M,b)}function C(a){var b={type:N};Object.defineProperty(b,"_winRTBackPressedEvent",{value:a,enumerable:!1}),o(b)}function D(){if(!S){if(S=!0,a.addEventListener("beforeunload",y,!1),T){a.addEventListener("error",z,!1);var b=Windows.UI.WebUI.WebUIApplication;if(b.addEventListener("activated",v,!1),b.addEventListener("suspending",w,!1),window.Windows&&Windows.UI&&Windows.UI.ApplicationSettings&&Windows.UI.ApplicationSettings.SettingsPane&&Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView){var c=Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();c.addEventListener("commandsrequested",B)}window.Windows&&Windows.Phone&&Windows.Phone.UI.Input.HardwareButtons&&Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",C)}WinJS.Promise.addEventListener("error",A)}}function E(){if(S){if(S=!1,a.removeEventListener("beforeunload",y,!1),T){a.removeEventListener("error",z,!1);var b=Windows.UI.WebUI.WebUIApplication;if(b.removeEventListener("activated",v,!1),b.removeEventListener("suspending",w,!1),window.Windows&&Windows.UI&&Windows.UI.ApplicationSettings&&Windows.UI.ApplicationSettings.SettingsPane&&Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView){var c=Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();c.removeEventListener("commandsrequested",B)}window.Windows&&Windows.Phone&&Windows.Phone.UI.Input.HardwareButtons&&Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",C)}h.removeEventListener("error",A)}}a.Debug&&(a.Debug.setNonUserCodeExceptions=!0);var F,G="checkpoint",H="unload",I="activated",J="loaded",K="ready",L="error",M="settings",N="backclick",O=[],P=null,Q=null,R=!1,S=!1,T=c.hasWinRT&&a.document,U=b.Class.mix(b.Class.define(null,{},{supportedForProcessing:!1}),d.eventMixin),V=new U,W={},X=0,Y=function(a){MSApp.terminateApp(a)},Z={activated:[function(){t({type:K})}],checkpoint:[function(a){WinJS.Application._oncheckpoint(a)}],error:[function(a,b){if(!b&&(WinJS.log&&WinJS.log(k(a),"winjs","error"),T&&WinJS.Application._terminateApp)){var c=a.detail,d=c&&(c.number||c.exception&&(c.exception.number||c.exception.code)||c.error&&c.error.number||c.errorCode||0),e={description:k(c),stack:c&&(c.stack||c.exception&&(c.exception.stack||c.exception.message)||c.error&&c.error.stack||null),errorNumber:d,number:d};WinJS.Application._terminateApp(e,a)}}],backclick:[function(a,b){b?a._winRTBackPressedEvent.handled=!0:g.canGoBack&&(g.back(),a._winRTBackPressedEvent.handled=!0)}]};a.document&&document.addEventListener("DOMContentLoaded",x,!1),b.Namespace.define("WinJS.Application",{stop:function(){this.onactivated=null,this.oncheckpoint=null,this.onerror=null,this.onloaded=null,this.onready=null,this.onsettings=null,this.onunload=null,V=new U,WinJS.Application.sessionState={},R=!1,u(),P&&P.cancel(),P=null,Q=null,E(),n()},addEventListener:function(a,b,c){V.addEventListener(a,b,c)},removeEventListener:function(a,b,c){V.removeEventListener(a,b,c)},checkpoint:function(){t({type:G})},start:function(){D(),R=!0,s()},queueEvent:t,_terminateApp:Y}),Object.defineProperties(WinJS.Application,d.createEventProperties(G,H,I,J,K,M,L,N))}),define("WinJS/Animations/_Constants",["../Core/_Base"],function(a){"use strict";var b={PageNavigationAnimation:{turnstile:"turnstile",slide:"slide",enterPage:"enterPage",continuum:"continuum"}};return a.Namespace.define("WinJS.UI",b),a.Namespace.defineWithParent(null,null,b)}),define("WinJS/Animations/_TransitionAnimation",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler","../Utilities/_ElementUtilities"],function(a,b,c,d,e,f){"use strict";function g(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection?a:a?[a]:[]}function h(){return++A,"WinJSUIAnimation"+A}function i(a){return"WinJSUIAnimation"===a.substring(0,16)}function j(b){a.getComputedStyle(b,null).opacity}function k(a,b){return function(c){var d={};for(var e in c){var f=c[e];"function"==typeof f&&(f=f(a,b)),d[e]=f}return d.exactTiming||(d.delay+=WinJS.UI._libraryDelay),d}}function l(a,b){var c=a+"|"+b,d=B[c];d&&d(C)}function m(a,b,c){B[a+"|"+b]=c}function n(a,b){delete B[a+"|"+b]}function o(a,b,c,d,e){var f=e.styleCaches[b]||new E(b,e,c);f.cref+=d.length,d.forEach(function(a){l(b,a.property)}),(e.isTransition||d.some(function(a){return f.removed[a[e.nameField]]}))&&(j(a),f.removed={});var g=d.map(function(a){return a[e.nameField]+" "+e.props.map(function(b){return(b[1]?a[b[1]]:"")+b[2]}).join(" ")}).join(", "),h=d.map(function(a){return a[e.nameField]}).join(", ");return""!==f.names&&(g=f.names+", "+g,h=f.names+", "+h),c[e.shorthandProp]=g,f.names=h,f}function p(a,b){b?a():e.schedule(function(){a()},e.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function q(a,b,e,g,h){if(e.length>0){var i=a.style,j=f._uniqueID(a);if(x||(x=document.createElement("DIV").style),e=e.map(k(b,a)),e.forEach(function(a){var b=c._getCamelCasedName(a.property);a.hasOwnProperty("from")&&(i[b]=a.from),x[b]=a.to,a.to=x[b],a.propertyScriptName=b}),h){var l=o(a,j,i,e,F),q=a.disabled?document:a;e.forEach(function(b){var e;g.push(new d(function(d){e=function(e){f&&(q.removeEventListener(c._browserEventEquivalents.transitionEnd,f,!1),n(j,b.property),l.removeName(i,b.propertyScriptName,e?a:null,b.skipStylesReset),clearTimeout(h),f=null),p(d,e===D)};var f=function(c){c.target===a&&c.propertyName===b.property&&e()};m(j,b.property,e),q.addEventListener(c._browserEventEquivalents.transitionEnd,f,!1);var g=0;i[b.propertyScriptName]!==b.to&&(i[b.propertyScriptName]=b.to,g=50);var h=setTimeout(function(){h=setTimeout(e,b.delay+b.duration)},g)},function(){e(D)}))})}else e.forEach(function(a){i[a.propertyScriptName]=a.to})}}function r(a,b,e,g,i){if(i&&e.length>0){var j=a.style,l=f._uniqueID(a);e=e.map(k(b,a));var q,r=a.disabled?document:a;e.forEach(function(a){if(a.keyframe)a.keyframe=z.animationPrefix+a.keyframe;else{q||(q=document.createElement("STYLE"),document.documentElement.appendChild(q)),a.keyframe=h();var b="@"+z.keyframes+" "+a.keyframe+" { from {"+a.property+":"+a.from+";} to {"+a.property+":"+a.to+";}}";q.sheet.insertRule(b,0)}});var s=o(a,l,j,e,G),t=[],u=[];e.forEach(function(b){var e;u.push(new d(function(d){e=function(a){f&&(r.removeEventListener(c._browserEventEquivalents.animationEnd,f,!1),clearTimeout(g),f=null),p(d,a===D)};var f=function(c){c.target===a&&c.animationName===b.keyframe&&e()};m(l,b.property,e),t.push({id:l,property:b.property,style:j,keyframe:b.keyframe});var g=setTimeout(function(){g=setTimeout(e,b.delay+b.duration)},50);r.addEventListener(c._browserEventEquivalents.animationEnd,f,!1)},function(){e(D)}))}),q&&setTimeout(function(){var a=q.parentElement;a&&a.removeChild(q)},50);var v=function(){for(var a=0;a<t.length;a++){var b=t[a];n(b.id,b.property),s.removeName(b.style,b.keyframe)}};g.push(WinJS.Promise.join(u).then(v,v))}}function s(){y||(y=c.hasWinRT?new Windows.UI.ViewManagement.UISettings:{animationsEnabled:!0})}function t(){return s(),H+y.animationsEnabled>0}function u(a,b,c){try{for(var f=WinJS.UI.isAnimationEnabled(),h=g(a),i=g(b),j=[],k=0;k<h.length;k++)if(h[k]instanceof Array)for(var l=0;l<h[k].length;l++)c(h[k][l],k,i,j,f);else c(h[k],k,i,j,f);return j.length?d.join(j):e.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,function(){})}catch(m){return d.wrapError(m)}}function v(a){return Array.isArray(a)?a.map(function(a){return v(a)}):a?(a.delay=WinJS.UI._animationTimeAdjustment(a.delay),a.duration=WinJS.UI._animationTimeAdjustment(a.duration),a):void 0}function w(a){return WinJS.Utilities._fastAnimations?v(a):a}if(a.document){var x,y,z=c._browserStyleEquivalents,A=0,B=[],C=1,D=2,E=b.Class.define(function(a,b,c){this.cref=0,this.id=a,this.desc=b,this.removed={},this.prevStyles=b.props.map(function(a){return c[a[0]]}),this.prevNames=this.names=c[b.nameProp],b.styleCaches[a]=this},{destroy:function(a,b){var c=this.desc;delete c.styleCaches[this.id],b||(""===this.prevNames&&this.prevStyles.every(function(a){return""===a})?a[c.shorthandProp]="":(c.props.forEach(function(b,c){a[b[0]]=this.prevStyles[c]},this),a[c.nameProp]=this.prevNames))},removeName:function(a,b,c,d){var e=this.names,f=e.split(", "),g=f.lastIndexOf(b);g>=0&&(f.splice(g,1),this.names=e=f.join(", "),""===e&&this.desc.isTransition&&(e="none")),--this.cref?(a[this.desc.nameProp]=e,i(b)||(this.removed[b]=!0)):(c&&"none"===e&&(a[this.desc.nameProp]=e,j(c)),this.destroy(a,d))}}),F={shorthandProp:z.transition.scriptName,nameProp:z["transition-property"].scriptName,nameField:"property",props:[[z["transition-duration"].scriptName,"duration","ms"],[z["transition-timing-function"].scriptName,"timing",""],[z["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},G={shorthandProp:z.animation.scriptName,nameProp:z["animation-name"].scriptName,nameField:"keyframe",props:[[z["animation-duration"].scriptName,"duration","ms"],[z["animation-timing-function"].scriptName,"timing",""],[z["animation-delay"].scriptName,"delay","ms"],[z["animation-iteration-count"].scriptName,"","1"],[z["animation-direction"].scriptName,"","normal"],[z["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},H=0,I={disableAnimations:function(){H--},enableAnimations:function(){H++},isAnimationEnabled:t,_libraryDelay:0,executeAnimation:function(a,b){return u(a,w(b),r)},executeTransition:function(a,b){return u(a,w(b),q)},_animationTimeAdjustment:function(a){return WinJS.Utilities._fastAnimations?a/20:a}};return b.Namespace.define("WinJS.UI",I),b.Namespace.defineWithParent(null,null,I)}}),define("WinJS/Animations",["./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Animations/_Constants","./Animations/_TransitionAnimation","./Promise"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){return a.keyframe?a.keyframe:!c||a.left!==b.left||a.top!==b.top||a.rtlflip&&!b.rtlflip?null:a.rtlflip?i(c):c}function h(a,b){return b&&a.rtlflip?i(b):b}function i(a){var b=a+"-rtl";return function(c,d){return"ltr"===window.getComputedStyle(d).direction?a:b}}function j(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection?a:a?[a]:[]}function k(a){for(var b=[],c=0;c<a.length;c++){var d={top:a[c].offsetTop,left:a[c].offsetLeft},e=window.getComputedStyle(a[c],null)[x.scriptName].split(",");6===e.length&&(d.left+=parseFloat(e[4]),d.top+=parseFloat(e[5])),b.push(d)}return b}function l(a,b,c,d){return function(e){for(var f=a,g=0;e>g;g++)b*=c,f+=b;return d&&(f=Math.min(f,d)),f}}function m(a,b){for(var c=0;c<b.length;c++)b[c].top-=a[c].offsetTop,b[c].left-=a[c].offsetLeft}function n(a,b,c){m(a,b);for(var d=0;d<a.length;d++)(0!==b[d].top||0!==b[d].left)&&(a[d].style[x.scriptName]="translate("+b[d].left+"px, "+b[d].top+"px)");return e.executeTransition(a,c)}function o(a,b,c,d,f,g,h,i){function j(a,b,c){if(a){var d={left:b+"px",top:"0px"},e={left:c+"px",top:"0px"};if(+a.length===a.length)for(var f=0,g=a.length;g>f;f++)k.push(a[f]),l.push(d),m.push(e);else k.push(a),l.push(d),m.push(e)}}var k=[],l=[],m=[],n=200,o=0!==b?0>b?-n:n:0,p=0!==c?0>c?-n:n:0;return j(f,b,c),j(g,o,p),j(h,2*o,2*p),j(i,3*o,3*p),l=new z(l),m=new z(m),e.executeTransition(k,[{property:x.cssName,delay:0,duration:350,timing:a,from:r(l),to:r(m)},{property:"opacity",delay:0,duration:350,timing:d?"cubic-bezier(0,2,0,2)":"cubic-bezier(1,-0.42,0.995,-0.425)",from:d?0:1,to:d?1:0}])}function p(a,c,d){function f(){q(a)}a=j(a),c=j(c);for(var g=0,h=a.length;h>g;g++){var i="rtl"===window.getComputedStyle(a[g]).direction;a[g].style[b._browserStyleEquivalents["transform-origin"].scriptName]=c[Math.min(c.length-1,g)][i?"rtl":"ltr"]}return e.executeTransition(a,d).then(f,f)}function q(a){for(var c=0,d=a.length;d>c;c++)a[c].style[b._browserStyleEquivalents["transform-origin"].scriptName]="",a[c].style[x.scriptName]="",a[c].style.opacity=""}function r(a,b){return b=b||"",function(c,d){var e=a.getOffset(c),f=e.left;return e.rtlflip&&"rtl"===window.getComputedStyle(d).direction&&(f=f.toString(),f="-"===f.charAt(0)?f.substring(1):"-"+f),b+"translate("+f+", "+e.top+")"}}function s(a,b){return b=b||"",function(c){var d=a[c];return"translate("+d.left+"px, "+d.top+"px) "+b}}function t(a,b){return function(c){var d=a[c];return 0===d.left&&0===d.top?b:null}}function u(a,b,c,d){var e=j(b),f=j(c),g=k(f);return new a(e,f,g,d)}function v(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c].getBoundingClientRect(),f=-(40+e.left),g=40+(window.innerWidth-e.right),h=window.innerHeight/2-e.top;b.push({ltr:f+"px "+h+"px",rtl:g+"px "+h+"px"})}return b}function w(a){c("WinJS.UI.Animation:"+a)}var x=b._browserStyleEquivalents.transform,y=[{top:"0px",left:"11px",rtlflip:!0}],z=a.Class.define(function(a,b,c){c=c||y,Array.isArray(a)&&a.length>0?(this.offsetArray=a,1===a.length&&(this.keyframe=g(a[0],c[0],b))):a&&a.hasOwnProperty("top")&&a.hasOwnProperty("left")?(this.offsetArray=[a],this.keyframe=g(a,c[0],b)):(this.offsetArray=c,this.keyframe=h(c[0],b))},{getOffset:function(a){return a>=this.offsetArray.length&&(a=this.offsetArray.length-1),this.offsetArray[a]}},{supportedForProcessing:!1}),A=a.Class.define(function(a,b,c){this.revealedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){w("expandAnimation,StartTM");var a=e.executeAnimation(this.revealedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?200:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}),b=n(this.affectedArray,this.offsetArray,{property:x.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([a,b]).then(function(){w("expandAnimation,StopTM")})}},{supportedForProcessing:!1}),B=a.Class.define(function(a,b,c){this.hiddenArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){w("collapseAnimation,StartTM");var a=e.executeAnimation(this.hiddenArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0}),b=n(this.affectedArray,this.offsetArray,{property:x.cssName,delay:this.hiddenArray.length>0?167:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([a,b]).then(function(){w("collapseAnimation,StopTM")})}},{supportedForProcessing:!1}),C=a.Class.define(function(a,b,c){this.elementArray=b,this.offsetArray=c},{execute:function(){return w("repositionAnimation,StartTM"),n(this.elementArray,this.offsetArray,{property:x.cssName,delay:l(0,33,1,250),duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){w("repositionAnimation,StopTM")})}},{supportedForProcessing:!1}),D=a.Class.define(function(a,b,c){this.addedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){w("addToListAnimation,StartTM");var a=this.affectedArray.length>0?240:0,b=e.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:x.cssName,delay:a,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:a,duration:120,timing:"linear",from:0,to:1}]),c=n(this.affectedArray,this.offsetArray,{property:x.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([b,c]).then(function(){w("addToListAnimation,StopTM")})}},{supportedForProcessing:!1}),E=a.Class.define(function(a,b,c){this.deletedArray=a,this.remainingArray=b,this.offsetArray=c},{execute:function(){w("deleteFromListAnimation,StartTM");var a=e.executeAnimation(this.deletedArray,[{keyframe:"WinJS-scale-down",property:x.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:"none",to:"scale(0.85)"},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]),b=n(this.remainingArray,this.offsetArray,{property:x.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([a,b]).then(function(){w("deleteFromListAnimation,StopTM")})}},{supportedForProcessing:!1}),F=a.Class.define(function(a,b,c,d){this.addedArray=a,this.affectedArray=b,this.offsetArray=c;var e=j(d);this.deletedArray=e,this.deletedOffsetArray=k(e)},{execute:function(){w("_updateListAnimation,StartTM"),m(this.deletedArray,this.deletedOffsetArray);var a=0,b=e.executeAnimation(this.deletedArray,[{keyframe:t(this.deletedOffsetArray,"WinJS-scale-down"),property:x.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:s(this.deletedOffsetArray),to:s(this.deletedOffsetArray,"scale(0.85)")},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]);this.deletedArray.length>0&&(a+=60);var c=n(this.affectedArray,this.offsetArray,{property:x.cssName,delay:a,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});this.affectedArray.length>0?a+=240:a&&(a+=60);var d=e.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:x.cssName,delay:a,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:a,duration:120,timing:"linear",from:0,to:1}]);return f.join([b,c,d]).then(function(){w("_updateListAnimation,StopTM")})}},{supportedForProcessing:!1}),G=a.Class.define(function(a,b,c){this.addedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){w("addToSearchListAnimation,StartTM");var a=e.executeAnimation(this.addedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?240:0,duration:117,timing:"linear",from:0,to:1}),b=n(this.affectedArray,this.offsetArray,{property:x.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([a,b]).then(function(){w("addToSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),H=a.Class.define(function(a,b,c){this.deletedArray=a,this.remainingArray=b,this.offsetArray=c},{execute:function(){w("deleteFromSearchListAnimation,StartTM");var a=e.executeAnimation(this.deletedArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:93,timing:"linear",from:1,to:0}),b=n(this.remainingArray,this.offsetArray,{property:x.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([a,b]).then(function(){w("deleteFromSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),I=a.Class.define(function(a,b,c){this.elementArray=b,this.offsetArray=c},{execute:function(){return w("peekAnimation,StartTM"),n(this.elementArray,this.offsetArray,{property:x.cssName,delay:0,duration:2e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){w("peekAnimation,StopTM")})}},{supportedForProcessing:!1}),J={createExpandAnimation:function(a,b){return u(A,a,b)},createCollapseAnimation:function(a,b){return u(B,a,b)},createRepositionAnimation:function(a){return u(C,null,a)},fadeIn:function(a){return w("fadeIn,StartTM"),e.executeTransition(a,{property:"opacity",delay:0,duration:250,timing:"linear",from:0,to:1}).then(function(){w("fadeIn,StopTM")})},fadeOut:function(a){return w("fadeOut,StartTM"),e.executeTransition(a,{property:"opacity",delay:0,duration:167,timing:"linear",to:0}).then(function(){w("fadeOut,StopTM")})},createAddToListAnimation:function(a,b){return u(D,a,b)},createDeleteFromListAnimation:function(a,b){return u(E,a,b)},_createUpdateListAnimation:function(a,b,c){return u(F,a,c,b)},createAddToSearchListAnimation:function(a,b){return u(G,a,b)},createDeleteFromSearchListAnimation:function(a,b){return u(H,a,b)},showEdgeUI:function(a,b,c){w("showEdgeUI,StartTM");var d=new z(b,"WinJS-showEdgeUI",[{top:"-70px",left:"0px"}]);return e[c&&"transition"===c.mechanism?"executeTransition":"executeAnimation"](a,{keyframe:d.keyframe,property:x.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:d.keyframe||r(d),to:"none"}).then(function(){w("showEdgeUI,StopTM")})},showPanel:function(a,b){w("showPanel,StartTM");var c=new z(b,"WinJS-showPanel",[{top:"0px",left:"364px",rtlflip:!0}]);return e.executeAnimation(a,{keyframe:c.keyframe,property:x.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||r(c),to:"none"}).then(function(){w("showPanel,StopTM")})},hideEdgeUI:function(a,b,c){w("hideEdgeUI,StartTM");var d=new z(b,"WinJS-hideEdgeUI",[{top:"-70px",left:"0px"}]);return e[c&&"transition"===c.mechanism?"executeTransition":"executeAnimation"](a,{keyframe:d.keyframe,property:x.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:d.keyframe||r(d)}).then(function(){w("hideEdgeUI,StopTM")
})},hidePanel:function(a,b){w("hidePanel,StartTM");var c=new z(b,"WinJS-hidePanel",[{top:"0px",left:"364px",rtlflip:!0}]);return e.executeAnimation(a,{keyframe:c.keyframe,property:x.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:c.keyframe||r(c)}).then(function(){w("hidePanel,StopTM")})},showPopup:function(a,b){w("showPopup,StartTM");var c=new z(b,"WinJS-showPopup",[{top:"50px",left:"0px"}]);return e.executeAnimation(a,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:83,duration:83,timing:"linear",from:0,to:1},{keyframe:c.keyframe,property:x.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||r(c),to:"none"}]).then(function(){w("showPopup,StopTM")})},hidePopup:function(a){return w("hidePopup,StartTM"),e.executeAnimation(a,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:83,timing:"linear",from:1,to:0}).then(function(){w("hidePopup,StopTM")})},pointerDown:function(a){return w("pointerDown,StartTM"),e.executeTransition(a,{property:x.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.975, 0.975)"}).then(function(){w("pointerDown,StopTM")})},pointerUp:function(a){return w("pointerUp,StartTM"),e.executeTransition(a,{property:x.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){w("pointerUp,StopTM")})},dragSourceStart:function(a,b){w("dragSourceStart,StartTM");var c=e.executeTransition(a,[{property:x.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(1.05)"},{property:"opacity",delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:.65}]),d=e.executeTransition(b,{property:x.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"});return f.join([c,d]).then(function(){w("dragSourceStart,StopTM")})},dragSourceEnd:function(a,b,c){w("dragSourceEnd,StartTM");var d=new z(b,"WinJS-dragSourceEnd"),g=e.executeTransition(a,[{property:x.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:1}]),h=e.executeAnimation(a,{keyframe:d.keyframe,property:x.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:d.keyframe||r(d,"scale(1.05) "),to:"none"}),i=e.executeTransition(c,{property:x.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return f.join([g,h,i]).then(function(){w("dragSourceEnd,StopTM")})},enterContent:function(a,b,c){w("enterContent,StartTM");var d,g=new z(b,"WinJS-enterContent",[{top:"0px",left:"40px",rtlflip:!0}]);if(c&&"transition"===c.mechanism)d=e.executeTransition(a,[{property:x.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:r(g),to:"none"},{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}]);else{var h=e.executeAnimation(a,{keyframe:g.keyframe,property:x.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:g.keyframe||r(g),to:"none"}),i=e.executeTransition(a,{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});d=f.join([h,i])}return d.then(function(){w("enterContent,StopTM")})},exitContent:function(a,b){w("exitContent,StartTM");var c=new z(b,"WinJS-exit",[{top:"0px",left:"0px"}]),d=e.executeAnimation(a,b&&{keyframe:c.keyframe,property:x.cssName,delay:0,duration:117,timing:"linear",from:"none",to:c.keyframe||r(c)}),g=e.executeTransition(a,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return f.join([d,g]).then(function(){w("exitContent,StopTM")})},dragBetweenEnter:function(a,b){w("dragBetweenEnter,StartTM");var c=new z(b,null,[{top:"-40px",left:"0px"},{top:"40px",left:"0px"}]);return e.executeTransition(a,{property:x.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:r(c,"scale(0.95) ")}).then(function(){w("dragBetweenEnter,StopTM")})},dragBetweenLeave:function(a){return w("dragBetweenLeave,StartTM"),e.executeTransition(a,{property:x.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"}).then(function(){w("dragBetweenLeave,StopTM")})},swipeSelect:function(a,b){w("swipeSelect,StartTM");var c=e.executeTransition(a,{property:x.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),d=e.executeAnimation(b,{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return f.join([c,d]).then(function(){w("swipeSelect,StopTM")})},swipeDeselect:function(a,b){w("swipeDeselect,StartTM");var c=e.executeTransition(a,{property:x.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),d=e.executeAnimation(b,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0});return f.join([c,d]).then(function(){w("swipeDeselect,StopTM")})},swipeReveal:function(a,b){w("swipeReveal,StartTM");var c=new z(b,null,[{top:"25px",left:"0px"}]);return e.executeTransition(a,{property:x.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:r(c)}).then(function(){w("swipeReveal,StopTM")})},enterPage:function(a,b){w("enterPage,StartTM");var c=new z(b,"WinJS-enterPage",[{top:"0px",left:"100px",rtlflip:!0}]),d=e.executeAnimation(a,{keyframe:c.keyframe,property:x.cssName,delay:l(0,83,1,333),duration:1e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||r(c),to:"none"}),g=e.executeTransition(a,{property:"opacity",delay:l(0,83,1,333),duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return f.join([d,g]).then(function(){w("enterPage,StopTM")})},exitPage:function(a,b){w("exitPage,StartTM");var c=new z(b,"WinJS-exit",[{top:"0px",left:"0px"}]),d=e.executeAnimation(a,b&&{keyframe:c.keyframe,property:x.cssName,delay:0,duration:117,timing:"linear",from:"none",to:c.keyframe||r(c)}),g=e.executeTransition(a,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return f.join([d,g]).then(function(){w("exitPage,StopTM")})},crossFade:function(a,b){w("crossFade,StartTM");var c=e.executeTransition(a,{property:"opacity",delay:0,duration:167,timing:"linear",to:1}),d=e.executeTransition(b,{property:"opacity",delay:0,duration:167,timing:"linear",to:0});return f.join([c,d]).then(function(){w("crossFade,StopTM")})},createPeekAnimation:function(a){return u(I,null,a)},updateBadge:function(a,b){w("updateBadge,StartTM");var c=new z(b,"WinJS-updateBadge",[{top:"24px",left:"0px"}]);return e.executeAnimation(a,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1},{keyframe:c.keyframe,property:x.cssName,delay:0,duration:1333,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||r(c),to:"none"}]).then(function(){w("updateBadge,StopTM")})},turnstileForwardIn:function(a){w("turnstileForwardIn,StartTM"),a=j(a);var b=v(a);return p(a,b,[{property:x.cssName,delay:l(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(80deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:l(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){w("turnstileForwardIn,StopTM")})},turnstileForwardOut:function(a){w("turnstileForwardOut,StartTM"),a=j(a);var b=v(a);return p(a,b,[{property:x.cssName,delay:l(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(600px) rotateY(0deg)",to:"perspective(600px) rotateY(-50deg)"},{property:"opacity",delay:l(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){w("turnstileForwardOut,StopTM")})},turnstileBackwardIn:function(a){w("turnstileBackwardIn,StartTM"),a=j(a);var b=v(a);return p(a,b,[{property:x.cssName,delay:l(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(-50deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:l(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){w("turnstileBackwardIn,StopTM")})},turnstileBackwardOut:function(a){w("turnstileBackwardOut,StartTM"),a=j(a);var b=v(a);return p(a,b,[{property:x.cssName,delay:l(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(800px) rotateY(0deg)",to:"perspective(800px) rotateY(80deg)"},{property:"opacity",delay:l(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){w("turnstileBackwardOut,StopTM")})},slideDown:function(a){return w("slideDown,StartTM"),p(a,{ltr:"",rtl:""},[{property:x.cssName,delay:0,duration:250,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"translate(0px, 0px)",to:"translate(0px, 200px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){w("slideDown,StopTM")})},slideUp:function(a){return w("slideUp,StartTM"),p(a,{ltr:"",rtl:""},[{property:x.cssName,delay:0,duration:350,timing:"cubic-bezier(0.17,0.79,0.215,1.0025)",from:"translate(0px, 200px)",to:"translate(0px, 0px)"},{property:"opacity",delay:l(0,34,1,1e3),duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){w("slideUp,StopTM")})},slideRightIn:function(a,b,c,d){return w("slideRightIn,StartTM"),o("cubic-bezier(0.17,0.79,0.215,1.0025)",-window.innerWidth,0,!0,a,b,c,d).then(function(){w("slideRightIn,StopTM")})},slideRightOut:function(a,b,c,d){return w("slideRightOut,StartTM"),o("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,window.innerWidth,!1,a,b,c,d).then(function(){w("slideRightOut,StopTM")})},slideLeftIn:function(a,b,c,d){return w("slideLeftIn,StartTM"),o("cubic-bezier(0.17,0.79,0.215,1.0025)",window.innerWidth,0,!0,a,b,c,d).then(function(){w("slideLeftIn,StopTM")})},slideLeftOut:function(a,b,c,d){return w("slideLeftOut,StartTM"),o("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,-window.innerWidth,!1,a,b,c,d).then(function(){w("slideLeftOut,StopTM")})},continuumForwardIn:function(a,b,c){return w("continuumForwardIn,StartTM"),f.join([e.executeTransition(a,[{property:x.cssName,delay:0,duration:350,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(0.5, 0.5)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),e.executeTransition(b,[{property:x.cssName,delay:0,duration:350,timing:"cubic-bezier(0.24,1.15,0.11,1.1575)",from:"translate(0px, 225px)",to:"translate(0px, 0px)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),p(c,{ltr:"0px 50%",rtl:"100% 50%"},[{property:x.cssName,delay:0,duration:350,timing:"cubic-bezier(0,0.62,0.8225,0.9625)",from:"rotateX(80deg) scale(1.5, 1.5)",to:"rotateX(0deg) scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){w("continuumForwardIn,StopTM")})},continuumForwardOut:function(a,b){return w("continuumForwardOut,StartTM"),f.join([e.executeTransition(a,[{property:x.cssName,delay:0,duration:120,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(1.1, 1.1)"},{property:"opacity",delay:0,duration:120,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]),p(b,{ltr:"0px 100%",rtl:"100% 100%"},[{property:x.cssName,delay:0,duration:152,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"rotateX(0deg) scale(1.0, 1.0) translate(0px, 0px)",to:"rotateX(80deg) scale(1.5, 1.5) translate(0px, 150px)"},{property:"opacity",delay:0,duration:152,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}])]).then(function(){w("continuumForwardOut,StopTM")})},continuumBackwardIn:function(a,b){return w("continuumBackwardIn,StartTM"),f.join([e.executeTransition(a,[{property:x.cssName,delay:0,duration:200,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(1.25, 1.25)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:200,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),p(b,{ltr:"0px 50%",rtl:"100% 50%"},[{property:x.cssName,delay:0,duration:250,timing:"cubic-bezier(0.2975, 0.7325, 0.4725, 0.99)",from:"rotateX(80deg) translate(0px, -100px)",to:"rotateX(0deg) translate(0px, 0px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){w("continuumBackwardIn,StopTM")})},continuumBackwardOut:function(a){return w("continuumBackwardOut,StartTM"),e.executeTransition(a,[{property:x.cssName,delay:0,duration:167,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(0.5, 0.5)"},{property:"opacity",delay:0,duration:167,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){w("continuumBackwardOut,StopTM")})},createPageNavigationAnimations:function(a,b,c){function d(){return f.wrap()}var e=WinJS.UI.PageNavigationAnimation;return WinJS.Utilities.isPhone&&a!==e.enterPage&&b!==e.enterPage?(b||(b=e.turnstile),a===e.slide&&c||b===e.slide&&!c?{exit:c?WinJS.UI.Animation.slideDown:d,entrance:c?d:WinJS.UI.Animation.slideUp}:{exit:WinJS.UI.Animation[b+(c?"Backward":"Forward")+"Out"],entrance:WinJS.UI.Animation[b+(c?"Backward":"Forward")+"In"]}):{exit:d,entrance:WinJS.UI.Animation.enterPage}}};return a.Namespace.define("WinJS.UI.Animation",J),a.Namespace.defineWithParent(null,null,J)}),define("WinJS/Binding/_BindingParser",["../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../ControlProcessor/_OptionsLexer","../ControlProcessor/_OptionsParser"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){e("WinJS.Binding:bindingParser,StartTM");var c=k.lexer(a),d=new m.BindingInterpreter(c,a,b||{}),f=d.run();return e("WinJS.Binding:bindingParser,StopTM"),f}function i(a){e("WinJS.Binding:bindingParser,StartTM");var b=k.lexer(a),c=new m.BindingParser(b,a),d=c.run();return e("WinJS.Binding:bindingParser,StopTM"),d}var j={get invalidBinding(){return d._getWinJSString("base/invalidBinding").value},get bindingInitializerNotFound(){return d._getWinJSString("base/bindingInitializerNotFound").value}},k=a.Namespace.defineWithParent(null,null,{lexer:a.Namespace._lazy(function(){return f._optionsLexer}),tokenType:a.Namespace._lazy(function(){return f._optionsLexer.tokenType})}),l=b.requireSupportedForProcessing,m=a.Namespace.defineWithParent(null,null,{BindingInterpreter:a.Namespace._lazy(function(){return a.Class.derive(g.optionsParser._BaseInterpreter,function(a,b,c){this._initialize(a,b,c)},{_error:function(a){throw new c("WinJS.Binding.ParseError",d._formatString(j.invalidBinding,this._originalSource,a))},_evaluateInitializerName:function(){if(this._current.type===k.tokenType.identifier){var a=this._evaluateIdentifierExpression();return WinJS.log&&!a&&WinJS.log(d._formatString(j.bindingInitializerNotFound,this._originalSource),"winjs binding","error"),l(a)}},_evaluateValue:function(){switch(this._current.type){case k.tokenType.stringLiteral:case k.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;default:return void this._unexpectedToken(k.tokenType.stringLiteral,k.tokenType.numberLiteral)}},_readBindDeclarations:function(){for(var a=[];;)switch(this._current.type){case k.tokenType.identifier:case k.tokenType.thisKeyword:a.push(this._readBindDeclaration());break;case k.tokenType.semicolon:this._read();break;case k.tokenType.eof:return a;default:return void this._unexpectedToken(k.tokenType.identifier,k.tokenType.semicolon,k.tokenType.eof)}},_readBindDeclaration:function(){var a=this._readDestinationPropertyName();this._read(k.tokenType.colon);var b=this._readSourcePropertyName(),c=this._evaluateInitializerName();return{destination:a,source:b,initializer:c}},_readDestinationPropertyName:function(){return this._readIdentifierExpression()},_readSourcePropertyName:function(){return this._readIdentifierExpression()},run:function(){return this._readBindDeclarations()}},{supportedForProcessing:!1})}),BindingParser:a.Namespace._lazy(function(){return a.Class.derive(m.BindingInterpreter,function(a,b){this._initialize(a,b,{})},{_readInitializerName:function(){return this._current.type===k.tokenType.identifier?this._readIdentifierExpression():void 0},_readBindDeclaration:function(){var a=this._readDestinationPropertyName();this._read(k.tokenType.colon);var b=this._readSourcePropertyName(),c=this._readInitializerName();return{destination:a,source:b,initializer:c}}},{supportedForProcessing:!1})})}),n={_bindingParser:h,_bindingParser2:i};return a.Namespace.define("WinJS.Binding",n),a.Namespace.defineWithParent(null,null,n)}),define("WinJS/Binding/_DomWeakRefTable",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Scheduler"],function(a,b,c,d){"use strict";function e(){0===l._DOMWeakRefTable_sweepPeriod&&(k=0);var a,b,c=Object.keys(o),d=Date.now()-l._DOMWeakRefTable_timeout;for(a=0,b=c.length;b>a;a++){var e=c[a];o[e].time<d&&delete o[e]}g()}function f(){if(!(a.Debug&&Debug.debuggerEnabled&&l._DOMWeakRefTable_noTimeoutUnderDebugger||k)){var b=l._DOMWeakRefTable_sweepPeriod;0===b?(d.schedule(e,d.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),k=1):k=setInterval(e,l._DOMWeakRefTable_sweepPeriod)}}function g(){if(!(a.Debug&&Debug.debuggerEnabled&&l._DOMWeakRefTable_noTimeoutUnderDebugger)){var b=l._DOMWeakRefTable_sweepPeriod;0===b?k||0!==Object.keys(o).length&&(d.schedule(e,d.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),k=1):k&&0===Object.keys(o).length&&(clearInterval(k),k=0)}}function h(a,b){return o[b]={element:a,time:Date.now()},f(),b}function i(a){if(WinJS.Utilities._DOMWeakRefTable_fastLoadPath){var b=o[a];return b?b.element:document.getElementById(a)}var c=document.getElementById(a);if(c)delete o[a],g();else{var b=o[a];b&&(b.time=Date.now(),c=b.element)}return c}if(c.hasWinRT&&a.msSetWeakWinRTProperty&&a.msGetWeakWinRTProperty){var j=new Windows.Foundation.Uri("about://blank");return void b.Namespace.define("WinJS.Utilities",{_createWeakRef:function(a,b){return msSetWeakWinRTProperty(j,b,a),b},_getWeakRefElement:function(a){return msGetWeakWinRTProperty(j,a)}})}var k,l=WinJS.Utilities,m=500,n=1e3,o={},p={_DOMWeakRefTable_noTimeoutUnderDebugger:!0,_DOMWeakRefTable_sweepPeriod:m,_DOMWeakRefTable_timeout:n,_DOMWeakRefTable_tableSize:{get:function(){return Object.keys(o).length}},_DOMWeakRefTable_fastLoadPath:!1,_createWeakRef:h,_getWeakRefElement:i};return b.Namespace.define("WinJS.Utilities",p),b.Namespace.defineWithParent(null,null,p)}),define("WinJS/Binding/_Data",["../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Promise","../Scheduler","./_DomWeakRefTable"],function(a,b,c,d,e,f,g){"use strict";var h={get exceptionFromBindingInitializer(){return d._getWinJSString("base/exceptionFromBindingInitializer").value},get propertyIsUndefined(){return d._getWinJSString("base/propertyIsUndefined").value},get unsupportedDataTypeForBinding(){return d._getWinJSString("base/unsupportedDataTypeForBinding").value}},i={_listeners:null,_pendingNotifications:null,_notifyId:0,_getObservable:function(){return this},_cancel:function(a){var b=this._pendingNotifications,c=!1;if(b)for(var d=Object.keys(b),e=d.length-1;e>=0;e--){var f=b[d[e]];f.target===a&&(f.promise&&(f.promise.cancel(),f.promise=null),delete b[d[e]],c=!0)}return c},notify:function(a,b,c){var g=this._listeners&&this._listeners[a];if(g){var i=this;i._cancel(a),i._pendingNotifications=i._pendingNotifications||{};var j=i._notifyId++,k=i._pendingNotifications[j]={target:a},l=function(){delete i._pendingNotifications[j]};return k.promise=f.schedulePromiseNormal(null,"WinJS.Binding.observableMixin.notify").then(function(){for(var a=0,e=g.length;e>a&&k.promise;a++)try{g[a](b,c)}catch(f){WinJS.log&&WinJS.log(d._formatString(h.exceptionFromBindingInitializer,f.toString()),"winjs binding","error")}return l(),b}),k.promise}return e.as()},bind:function(a,b){this._listeners=this._listeners||{};for(var c=this._listeners[a]=this._listeners[a]||[],d=!1,e=0,f=c.length;f>e;e++)if(c[e]===b){d=!0;break}return d||(c.push(b),b(t(this[a]))),this},unbind:function(a,b){if(this._listeners=this._listeners||{},a&&b){var c=this._listeners[a];if(c){for(var d,e=0,f=c.length;f>e;e++)c[e]!==b&&(d=d||[]).push(c[e]);this._listeners[a]=d}}else if(a)this._cancel(a),delete this._listeners[a];else{var g=this;if(g._pendingNotifications){var h=g._pendingNotifications;g._pendingNotifications={},Object.keys(h).forEach(function(a){var b=h[a];b.promise&&b.promise.cancel()})}this._listeners={}}return this}},j={_backingData:null,_initObservable:function(a){this._backingData=a||{}},getProperty:function(a){var b=this._backingData[a];return WinJS.log&&void 0===b&&WinJS.log(d._formatString(h.propertyIsUndefined,a),"winjs binding","warn"),s(b)},setProperty:function(a,b){return this.updateProperty(a,b),this},addProperty:function(a,b){return this[a]||Object.defineProperty(this,a,{get:function(){return this.getProperty(a)},set:function(b){this.setProperty(a,b)},enumerable:!0,configurable:!0}),this.setProperty(a,b)},updateProperty:function(a,b){var c=this._backingData[a],d=t(b);return c!==d&&(this._backingData[a]=d,this._backingData[a]===d)?this.notify(a,d,c):e.as()},removeProperty:function(a){var b,c=this._backingData[a];try{delete this._backingData[a]}catch(d){}try{delete this[a]}catch(d){}return this.notify(a,b,c),this}};Object.keys(i).forEach(function(a){j[a]=i[a]});var k=function(a,b){return o(a,b)},l=0,m=function(){return"bindHandler"+l++},n=function(a,c){if(!b.hasWinRT)return a;var d=m();return g._getWeakRefElement(c)[d]=a,function(a,b){var e=g._getWeakRefElement(c);e&&e[d](a,b)}},o=function(a,b,c){function d(){i&&i.forEach(function(a){a.source.unbind(a.prop,a.listener)}),i=null}function e(a){h[a]&&(h[a].complexBind.cancel(),delete h[a])}if(a=s(a),!a)return{cancel:function(){},empty:!0};var f;c||(c=m(),f={},g._createWeakRef(f,c));var h={},i=null;return Object.keys(b).forEach(function(d){var g=b[d];if(g instanceof Function)g=n(g,c),g.bindState=f,i=i||[],i.push({source:a,prop:d,listener:g}),a.bind(d,g);else{var j=function(a){e(d);var b=o(s(a),g,c);if(b.empty){var f=function(a){Object.keys(a).forEach(function(b){var c=a[b];c instanceof Function?c(void 0,void 0):f(c)})};f(g)}h[d]={source:a,complexBind:b}};j=n(j,c),j.bindState=f,i=i||[],i.push({source:a,prop:d,listener:j}),a.bind(d,j)}}),{cancel:function(){d(),Object.keys(h).forEach(function(a){e(a)})}}},p=a.Class.mix(function(a){this._initObservable(a),Object.defineProperties(this,q(a))},j),q=function(a){function b(a){c[a]={get:function(){return this.getProperty(a)},set:function(b){this.setProperty(a,b)},enumerable:!0,configurable:!0}}for(var c={};a&&a!==Object.prototype;)Object.keys(a).forEach(b),a=Object.getPrototypeOf(a);return c},r=function(b){if(!(!b||"object"!=typeof b||b instanceof Date||b instanceof Array))return a.Class.mix(function(a){this._initObservable(a||Object.create(b))},j,q(b));if(WinJS.validation)throw new c("WinJS.Binding.UnsupportedDataType",d._formatString(h.unsupportedDataTypeForBinding))},s=function(a){if(!a)return a;var b=typeof a;if("object"!==b||a instanceof Date||a instanceof Array)return a;if(a._getObservable)return a._getObservable();var c=new p(a);return c.backingData=a,Object.defineProperty(a,"_getObservable",{value:function(){return c},enumerable:!1,writable:!1}),c},t=function(a){return a&&a.backingData?a.backingData:a},u={mixin:{value:j,enumerable:!1,writable:!0,configurable:!0},dynamicObservableMixin:{value:j,enumerable:!0,writable:!0,configurable:!0},observableMixin:{value:i,enumerable:!0,writable:!0,configurable:!0},expandProperties:q,define:r,as:s,unwrap:t,bind:k};return a.Namespace.define("WinJS.Binding",u),a.Namespace.defineWithParent(null,null,u)}),define("WinJS/Binding/_Declarative",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Utilities/_ElementUtilities","./_BindingParser","./_Data","./_DomWeakRefTable"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b){var c=a._autoDispose;c&&c.push(b)}function m(a){a._autoDispose=(a._autoDispose||[]).filter(function(a){return a()})}function n(a,b){return a?a.winBindingToken===b?a:void(WinJS.log&&WinJS.log(e._formatString(K.duplicateBindingDetected,a.id),"winjs binding","error")):a}function o(a){if(a.winBindingToken)return a.winBindingToken;var b="_win_bind"+I++;return Object.defineProperty(a,"winBindingToken",{configurable:!1,writable:!1,enumerable:!1,value:b}),b}function p(a,b,c,d,e,f,g){var h=a.initializer;if(h&&(h=h.winControl||h["data-win-control"]||h),h instanceof Function){var i=h(d,a.source,e,a.destination);return g&&(i&&i.cancel?g.bindings.push(function(){i.cancel()}):g.nocache=!0),i}h&&h.render&&(f.count++,g&&(g.nocache=!0),M(h.render).call(h,x(d,a.source),e).then(function(){f.checkComplete()}))}function q(a,b,c,d,f,g){var h,i=!0,j=!1;m(d);var o=function(){if(!j){var c=n(k._getWeakRefElement(a),b);return c||(WinJS.log&&WinJS.log(e._formatString(K.elementNotFound,a),"winjs binding","info"),h&&h.cancel()),c}},p=function(a){var b=o();b&&y(b,f.destination,a),i&&(c.checkComplete(),i=!1)};if(l(d,o),h=E(d,f.source,p)){var q=h.cancel;h.cancel=function(){return j=!0,q.call(h)},g&&g.bindings.push(function(){h.cancel()})}return h}function r(b,c,d,e,f,g,h){var i;return e!==a&&(e=j.as(e)),e._getObservable&&(i=e._getObservable()),i?(g.count++,q(c,d,g,i,b,h)):void y(f,b.destination,x(e,b.source))}function s(a,b){for(var c=a.length-1;c>=0;c--){var f=a[c],g=f.destination;if(1===g.length&&"id"===g[0]){if(WinJS.validation)throw new d("WinJS.Binding.IdBindingNotSupported",e._formatString(K.idBindingNotSupported,b));WinJS.log&&WinJS.log(e._formatString(K.idBindingNotSupported,b),"winjs binding","error"),a.splice(c,1)}}return a}function t(b,c){if(c){var d,e=c.expressions[b];return e||(d=s(i._bindingParser(b,a),b),c.expressions[b]=d),d||(d=e),d}return s(i._bindingParser(b,a),b)}function u(b,c,d,e,g,i){f("WinJS.Binding:processAll,StartTM");var j,l={count:0,checkComplete:function(){this.count--,0===this.count&&(f("WinJS.Binding:processAll,StopTM"),i())}},m=b||document.body,n="[data-win-bind],[data-win-control]",q=m.querySelectorAll(n);!d&&m.getAttribute("data-win-bind")&&(j=m),l.count++;var s=c||a;WinJS.Utilities._DOMWeakRefTable_fastLoadPath=!0;try{var u=h.data(m);u.winBindings=u.winBindings||[];for(var w=j?-1:0,x=q.length;x>w;w++){var y=0>w?j:q[w];if(y.winControl&&y.winControl.constructor&&y.winControl.constructor.isDeclarativeControlContainer){w+=y.querySelectorAll(n).length;var z=y.winControl.constructor.isDeclarativeControlContainer;"function"==typeof z&&(z=M(z))(y.winControl,function(a){return v(a,c,!1,e,g)})}if(y.hasAttribute("data-win-bind")){var A=y.getAttribute("data-win-bind"),B=t(A,e);if(!B.implemented){for(var C=0,D=B.length;D>C;C++){var E=B[C];E.initializer=E.initializer||g,E.implementation=E.initializer?p:r}B.implemented=!0}l.count++;var F=o(y),G=J?F:y.id;G||(y.id=G=F),k._createWeakRef(y,G);var H=h.data(y);H.winBindings=null;var I;e&&e.elements&&(I=e.elements[G],I||(e.elements[G]=I={bindings:[]}));for(var K=0,L=B.length;L>K;K++){var N=B[K],O=N.implementation(N,G,F,s,y,l,I);O&&(H.winBindings=H.winBindings||[],H.winBindings.push(O),u.winBindings.push(O))}l.count--}}}finally{WinJS.Utilities._DOMWeakRefTable_fastLoadPath=!1}l.checkComplete()}function v(a,b,c,d,f){return new g(function(e,g,h){u(a,b,c,d,f,e,g,h)}).then(null,function(a){return WinJS.log&&WinJS.log(e._formatString(K.errorInitializingBindings,a&&a.message),"winjs binding","error"),g.wrapError(a)})}function w(b){var c=function(c,d,f,g,h){var i=o(f),l=J?i:f.id;l||(f.id=l=i),k._createWeakRef(f,l);var m;if(c!==a&&(c=j.as(c)),c._getObservable&&(m=c._getObservable()),m){var p=0,q=E(j.as(c),d,function(a){if(1!==++p||a!==h){var c=n(k._getWeakRefElement(l),i);c?y(c,g,b(M(a))):q&&(WinJS.log&&WinJS.log(e._formatString(K.elementNotFound,l),"winjs binding","info"),q.cancel())}});return q}var r=x(c,d);r!==h&&y(f,g,b(r))};return L(c)}function x(b,c){if(b!==a&&(b=M(b)),c)for(var d=0,e=c.length;e>d&&null!==b&&void 0!==b;d++)b=M(b[c[d]]);return b}function y(a,b,c){M(c),a=M(a);for(var d=0,f=b.length-1;f>d;d++){if(a=M(a[b[d]]),!a)return void(WinJS.log&&WinJS.log(e._formatString(K.propertyDoesNotExist,b[d],b.join(".")),"winjs binding","error"));if(a instanceof Node)return void(WinJS.log&&WinJS.log(e._formatString(K.nestedDOMElementBindingNotSupported,b[d],b.join(".")),"winjs binding","error"))}if(0===b.length)return void(WinJS.log&&WinJS.log(K.cannotBindToThis,"winjs binding","error"));var g=b[b.length-1];WinJS.log&&void 0===a[g]&&WinJS.log(e._formatString(K.creatingNewProperty,g,b.join(".")),"winjs binding","warn"),a[g]=c}function z(a,b,c){return a=M(a),b&&1===b.length&&b[0]?void a.setAttribute(b[0],c):void(WinJS.log&&WinJS.log(K.attributeBindingSingleProperty,"winjs binding","error"))}function A(b,c,d,f,g){var h=o(d),i=J?h:d.id;i||(d.id=i=h),k._createWeakRef(d,i);var l;if(b!==a&&(b=j.as(b)),b._getObservable&&(l=b._getObservable()),l){var m=0,p=E(l,c,function(a){if(1!==++m||a!==g){var b=n(k._getWeakRefElement(i),h);b?z(b,f,M(a)):p&&(WinJS.log&&WinJS.log(e._formatString(K.elementNotFound,i),"winjs binding","info"),p.cancel())}});return p}var q=x(b,c);q!==g&&z(d,f,q)}function B(a,b,c,d){return z(c,d,x(a,b))}function C(a,b,c){c=M(c);var d=x(a,b);Array.isArray(d)?d.forEach(function(a){c.classList.add(a)}):d&&c.classList.add(d)}function D(a,b,c,d,e){return N(a,b,c,d,e)}function E(a,b,c){if(b.length>1){for(var d={},e=d,f=0,g=b.length-1;g>f;f++)e=e[b[f]]={};return e[b[b.length-1]]=c,j.bind(a,d,!0)}return 1===b.length?(a.bind(b[0],c,!0),{cancel:function(){a.unbind(b[0],c),this.cancel=F}}):void c(a)}function F(){}function G(a,b,c,d){return y(c,d,x(a,b)),{cancel:F}}function H(a){return L(a)}var I=1e3*Math.random()>>0,J=c.hasWinRT&&a.msSetWeakWinRTProperty&&a.msGetWeakWinRTProperty,K={get attributeBindingSingleProperty(){return e._getWinJSString("base/attributeBindingSingleProperty").value},get cannotBindToThis(){return e._getWinJSString("base/cannotBindToThis").value},get creatingNewProperty(){return e._getWinJSString("base/creatingNewProperty").value},get duplicateBindingDetected(){return e._getWinJSString("base/duplicateBindingDetected").value},get elementNotFound(){return e._getWinJSString("base/elementNotFound").value},get errorInitializingBindings(){return e._getWinJSString("base/errorInitializingBindings").value},get propertyDoesNotExist(){return e._getWinJSString("base/propertyDoesNotExist").value},get idBindingNotSupported(){return e._getWinJSString("base/idBindingNotSupported").value},get nestedDOMElementBindingNotSupported(){return e._getWinJSString("base/nestedDOMElementBindingNotSupported").value}},L=c.markSupportedForProcessing,M=c.requireSupportedForProcessing,N=w(function(a){return a}),O={processAll:v,oneTime:H(G),defaultBind:H(D),converter:w,initializer:H,getValue:x,setAttribute:H(A),setAttributeOneTime:H(B),addClassOneTime:H(C)};return b.Namespace.define("WinJS.Binding",O),b.Namespace.defineWithParent(null,null,O)}),define("WinJS/Binding",["./Binding/_BindingParser","./Binding/_Data","./Binding/_Declarative","./Binding/_DomWeakRefTable"],function(){}),define("WinJS/BindingTemplate/_DataTemplateCompiler.js",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Binding/_BindingParser","../Binding/_Data","../Binding/_Declarative","../ControlProcessor","../ControlProcessor/_OptionsParser","../Fragments","../Promise","../_Signal","../Utilities/_Dispose","../Utilities/_SafeHtml","../Utilities/_ElementUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";if(a.document){var r={get attributeBindingSingleProperty(){return e._getWinJSString("base/attributeBindingSingleProperty").value},get cannotBindToThis(){return e._getWinJSString("base/cannotBindToThis").value},get idBindingNotSupported(){return e._getWinJSString("base/idBindingNotSupported").value}},s={_TemplateCompiler:b.Namespace._lazy(function(){function s(a,b,c){var d=q.data(a).bindTokens;
d&&d.forEach(function(a){a&&a.cancel&&a.cancel()}),b&&b.cancel(),c&&c.cancel()}function t(a,b){return function(c){return i.processAll(c,a,!1,null,b)}}function u(a){return a=Z(a),a instanceof Node?null:a}function v(a,b){var c=-1!==a.indexOf("\n"),e=arguments,f=a.replace(nb,function(f,g,h,i,j,k,l){if(j||k)throw new d("Format:MalformedInputString","Did you forget to escape a: "+(j||k)+" at: "+l);if(g)return"{";if(h)return"}";var m,n=+i;if(m=n===+n?e[n+1]:b[i],void 0===m)throw new d("Format:MissingPart","Missing part '"+i+"'");if(c){for(var o=l;o>0&&" "===a[--o];);o>=0&&"\n"===a[o]&&(m=w(l-o-1,m))}return m});return f}function w(a,b){for(var c="",d=0;a>d;d++)c+=" ";return b.split("\n").map(function(a,b){return b?c+a:a}).join("\n")}function x(a){return a.trim()}function y(a){return a.join(";\n")}function z(a){return a.join(", ")||"empty"}function A(a){return a.map(function(a){return a.match(jb)?"."+a:+a===a?v("[{0}]",a):v("[{0}]",C(a))}).join("")}function B(a,b,c,d){var b=b.map(function(a){return a.match(jb)?"."+a:(+a===a&&(a=+a),G(C(a)))}).map(function(a){return v("{filter}({temp} = {temp}{part})",{filter:d,temp:c,part:a})});return b.unshift(F(E(c,a))),b.push(c),F(b.join(" && "))}function C(a){return JSON.stringify(a)}function D(a){return a?"new Array("+ +a+")":"[]"}function E(a,b){return""+a+" = "+b}function F(a){return"("+a+")"}function G(a){return"["+a+"]"}function H(a){return a.match(jb)?a:+a===a?+a:C(a)}function I(a){return a=""+a,a.replace(lb,function(a){return mb[a]||" "})}function J(a,b,c){return new String(c?""+a+b+"_"+c:""+a+b)}function K(a){return a.replace(/\\n/g,"\\n\\\n")}function L(a){return Object.keys(a)}function M(a){return Object.keys(a).map(function(b){return a[b]})}function N(a,b){return O([a,b])}function O(a){for(var b={},c=0,d=a.length;d>c;c++)for(var e=a[c],f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];b[i]=e[i]}return b}function P(b){return b.reduce(function(a,b){return a?Z(a[b]):null},a)}function Q(a,b,c,d){var e=a.children;if(e){var f=Object.keys(e);b&&c&&c(a,b,f.length);for(var g=0,h=f.length;h>g;g++){var i=f[g],j=e[i];Q(j,i,c,d)}b&&d&&d(a,b,Object.keys(e).length)}else b&&c&&c(a,b,0),b&&d&&d(a,b,0)}function R(a){return a.replace(/^\s*$/gm,"").replace(/^(.*[^\s])( *)$/gm,function(a,b){return b})}var S=m._cancelBlocker,T=i.defaultBind,U=i.oneTime,V=i.setAttribute,W=i.setAttributeOneTime,X=i.addClassOneTime,Y=(h.as,m.as),Z=(c.supportedForProcessing,c.requireSupportedForProcessing),$=p.insertAdjacentHTMLUnsafe,_=q.data,ab=o.markDisposable,bb=j.processAll,cb=i.processAll,db=k._optionsParser,eb=k._CallExpression,fb=k._IdentifierExpression,gb=g._bindingParser2,hb=j.scopedSelect,ib=f,jb=/^[A-Za-z]\w*$/,kb=/[^A-Za-z\w$]/g,lb=/[&<>'"]/g,mb={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},nb=/({{)|(}})|{(\w+)}|({)|(})/g,ob=/^\s*;\s*$/,pb=/[A-Z]/g,qb=b.Class.define(function(a,b,c,d,e){var f=this;this.compiler=a,this.kind=c,this.base=new String(b),this.tree={children:{},parent:this.base,reference:function(){return f.base}},this.accessExpression=d,this.filter=e||""},{createPathExpression:function(a,b){if(a.length){var c=this,d=a.reduce(function(a,b){return a.children=a.children||{},a.children[b]=a.children[b]||{parent:a},a.children[b]},this.tree);return d.name=d.name||c.compiler.defineInstance(c.kind,b||"",function(){return c.accessExpression(d.parent.name?d.parent.name:d.parent.reference(),a.slice(-1)[0],d.parent.parent===c.base,c.filter,!0)}),d.name}return this.base},lower:function(){var a=this,b=[],c=function(b,c,d){return a.accessExpression(b.parent.name?b.parent.name:b.parent.reference(),c,b.parent.parent===a.base,a.filter,d)};Q(this.tree,"",function(d,e,f){b.push(e),f>1?(d.name=d.name||a.compiler.defineInstance(a.kind,b.join("_"),c.bind(null,d,e,!0)),d.reference=function(){return d.name}):1===f&&(d.reference=c.bind(null,d,e))},function(){b.pop()})},deadNodeElimination:function(){Q(this.tree,"",null,function(a,b,c){(!a.name||a.name.dead)&&0===c&&a.parent&&a.parent.children&&delete a.parent.children[b]})},definitions:function(){var a=[];return Q(this.tree,"",function(b){b.name&&a.push(b)}),a.map(function(a){return a.name.definition()})}}),rb={capture:"capture",temporary:"temporary",variable:"variable",data:"data",global:"global"},sb={capture:"c",temporary:"t",variable:"iv",data:"d",global:"g"},tb={"import":"import",variable:"variable"},ub={"import":"i",variable:"sv"},vb={tree:"tree",text:"text",initializer:"initializer",template:"template",error:"error"},wb={attribute:"attribute",booleanAttribute:"booleanAttribute",inlineStyle:"inlineStyle",textContent:"textContent"},xb="imports",yb={initial:0,analyze:1,optimze:2,lower:3,compile:4,link:5,done:6},zb=b.Class.define(function(b,c){if(this._stage=yb.initial,this._staticVariables={},this._staticVariablesCount=0,this._instanceVariables={},this._instanceVariablesCount={},this._debugBreak=c.debugBreakOnRender,this._defaultInitializer=Z(c.defaultInitializer||T),this._optimizeTextBindings=!c.disableTextBindingOptimization,this._templateElement=b,this._templateContent=document.createElement(b.tagName),this._extractChild=c.extractChild||!1,this._controls=null,this._bindings=null,this._bindTokens=null,this._textBindingPrefix=null,this._textBindingId=0,this._suffix=[],this._htmlProcessors=[],this._profilerMarkIdentifier=c.profilerMarkIdentifier,this._captureCSE=new qb(this,"container",rb.capture,this.generateElementCaptureAccess.bind(this)),this._dataCSE=new qb(this,"data",rb.data,this.generateNormalAccess.bind(this),this.importSafe("dataSecurityCheck",Z)),this._globalCSE=new qb(this,this.importSafe("global",a),rb.global,this.generateNormalAccess.bind(this),this.importSafe("globalSecurityCheck",Z)),l.renderCopy(this._templateElement,this._templateContent),this._extractChild)for(;this._templateContent.childElementCount>1;)this._templateContent.removeChild(this._templateContent.lastElementChild)},{addClassOneTimeTextBinding:function(a){var b=this,c=this.createTextBindingHole(a.elementCapture.element.tagName,"class",++this._textBindingId);a.textBindingId=c,a.kind=vb.text,a.elementCapture.element.classList.add(c),a.elementCapture.refCount--,a.definition=function(){return b.formatCode("{htmlEscape}({value})",{htmlEscape:b._staticVariables.htmlEscape,value:a.value()})}},addClassOneTimeTreeBinding:function(a){var b=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.kind=vb.tree,a.definition=function(){return b.formatCode("{element}.classList.add({value})",{element:a.elementCapture,value:a.value()})}},analyze:function(){if(this._stage>yb.analyze)throw"Illegal: once we have moved past analyze we cannot revist it";this._stage=yb.analyze,this._controls=this.gatherControls(),this._bindings=this.gatherBindings(),this._children=this.gatherChildren(),this.cleanControlAndBindingAttributes(),this.async&&this.createAsyncParts(),this.nullableIdentifierAccessTemporary=this.defineInstance(rb.temporary);var a=this._templateContent.innerHTML;this._html=function(){return K(C(a))},this._html.text=a},bindingExpression:function(a){return this._dataCSE.createPathExpression(a.source,a.source.join("_"))},capture:function(a){var b=a._capture;if(b)return b.refCount++,b;for(var c=[a],d=a.parentNode,e=a.tagName;d!==this._templateContent;)e=d.tagName+"_"+e,c.unshift(d),d=d.parentNode;for(var f=0,g=c.length;g>f;f++){var h=c[f];c[f]=Array.prototype.indexOf.call(d.children,h),d=h}return b=this._captureCSE.createPathExpression(c,e.toLowerCase()),b.element=a,b.element._capture=b,b.refCount=1,b},cleanControlAndBindingAttributes:function(){for(var a="[data-win-bind],[data-win-control]",b=this._templateContent.querySelectorAll(a),c=0,d=b.length;d>c;c++){var e=b[c];e.isDeclarativeControlContainer&&(c+=e.querySelectorAll("[data-win-bind],[data-win-control]").length),e.removeAttribute("data-win-bind"),e.removeAttribute("data-win-control"),e.removeAttribute("data-win-options")}},compile:function(a,b,c){if(this._stage>yb.compile)throw"Illegal: once we have moved past compile we cannot revist it";this._stage=yb.compile;var d=this;this._returnedElement=this._extractChild?"container.firstElementChild":"container";var e,f,g=this._controls.map(function(a){var b;b=a.async?"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options}, controlDone)":"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options})";var c=d.formatCode(b,{target:a.elementCapture,SafeConstructor:a.SafeConstructor,options:d.generateOptionsLiteral(a.optionsParsed,a.elementCapture)});if(a.isDeclarativeControlContainer&&"function"==typeof a.isDeclarativeControlContainer.import){var e=[c];return e.push(d.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedControlProcessing})",{target:a.elementCapture,isDeclarativeControlContainer:a.isDeclarativeControlContainer,delayedControlProcessing:d._staticVariables.ui_processAll})),e.push(d.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedBindingProcessing}(data, {templateDefaultInitializer}))",{target:a.elementCapture,isDeclarativeControlContainer:a.isDeclarativeControlContainer,delayedBindingProcessing:d._staticVariables.delayedBindingProcessing,templateDefaultInitializer:d._staticVariables.templateDefaultInitializer||C(null)})),e.join(";\n")}return c}),h=this._bindings.map(function(a){switch(a.kind){case vb.template:return d.formatCode("({nestedTemplates}[{nestedTemplate}] = {template}.render({path}, {dest}))",{nestedTemplates:d._nestedTemplates,nestedTemplate:C(a.nestedTemplate),template:a.template,path:a.pathExpression,dest:a.elementCapture});case vb.initializer:var b;return b=a.initialValue?"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}, {initialValue}))":"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}))",d.formatCode(b,{bindTokens:d._bindTokens,bindToken:C(a.bindToken),initializer:a.initializer,sourceProperties:C(a.source),destProperties:C(a.destination),dest:a.elementCapture,initialValue:a.initialValue});case vb.tree:return a.definition();case vb.text:break;case vb.error:break;default:throw"NYI"}});c?(e=h.filter(function(a,b){return!d._bindings[b].delayable}),f=h.filter(function(a,b){return d._bindings[b].delayable})):(e=h,f=[]);var i=M(this._instanceVariables),j=i.filter(function(a){return a.kind===rb.variable}).map(function(a){return a.definition()}),k=this._captureCSE.definitions(),l=this._globalCSE.definitions(),m=this._dataCSE.definitions(),n=this._children.map(function(a){return d.formatCodeN("{0}.msParentSelectorScope = true",a)}),o=this._suffix.map(function(a){return a()}),p="";c&&f.length&&(p=d.formatCode(Ib,{delayed_binding_processing:y(f)}));var q=d.formatCode(a,O([this._staticVariables,b||{},{profilerMarkIdentifierStart:C("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StartTM"),profilerMarkIdentifierStop:C("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StopTM"),html:this._html(),tagName:C(this._templateElement.tagName),instance_variable_declarations:z(i),global_definitions:y(l),data_definitions:y(m),instance_variable_definitions:y(j),capture_definitions:y(k),set_msParentSelectorScope:y(n),debug_break:this.generateDebugBreak(),control_processing:y(g),control_counter:this._controlCounter,binding_processing:y(e),renderComplete:p,suffix_statements:y(o),nestedTemplates:this._nestedTemplates,returnedElement:this._returnedElement}]));return this.prettify(q)},createAsyncParts:function(){this._nestedTemplates=this._nestedTemplates||this.defineInstance(rb.variable,"nestedTemplates",function(){return D(0)}),this._controlCounter=this._controlCounter||this.defineInstance(rb.variable,"controlCounter",function(){return C(1)})},createTextBindingHole:function(a,b,c){if(!this._textBindingPrefix){for(var d="";-1!==this._html.text.indexOf("textbinding"+d);)d=d||0,d++;this._textBindingPrefix="textbinding"+d,this._textBindingRegex=new RegExp("(#?"+this._textBindingPrefix+"_\\d+)")}var e=this._textBindingPrefix+"_"+c;return"IMG"===a&&"src"===b&&(e="#"+e),e},deadCodeElimination:function(){var a=this;Object.keys(this._instanceVariables).forEach(function(b){var c=a._instanceVariables[b];c.kind===rb.capture&&(a._templateContent.contains(c.element)||(c.dead=!0),0===c.refCount&&(c.dead=!0),c.dead&&(c.definition=function(){},c.name=null,delete a._instanceVariables[b]))}),this._controls=this._controls.filter(function(a){return!a.elementCapture.dead}),this._bindings=this._bindings.filter(function(a){return!a.elementCapture.dead}),this._captureCSE.deadNodeElimination()},defineInstance:function(a,b,c){if(this._stage>=yb.compile)throw"Illegal: define instance variable after compilation stage has started";var d=this._instanceVariablesCount[a]||0,e=b?b.replace(kb,"_"):"",f=J(sb[a],d,e);return f.definition=function(){return E(f,c())},f.kind=a,this._instanceVariables[f]=f,this._instanceVariablesCount[a]=d+1,f},defineStatic:function(a,b,c){if(this._stage>=yb.link)throw"Illegal: define static variable after link stage has started";if(b){var d=this._staticVariables[b];if(d)return d}var e=b?b.replace(kb,"_"):"",f=J(ub[a],this._staticVariablesCount,e);return f.definition=function(){return E(f,c())},f.kind=a,this._staticVariables[b||f]=f,this._staticVariablesCount++,f},done:function(){if(this._stage>yb.done)throw"Illegal: once we have moved past done we cannot revist it";this._stage=yb.done},emitScopedSelect:function(a,b){return this.formatCode("{scopedSelect}({selector}, {element})",{scopedSelect:this._staticVariables.scopedSelect,selector:C(a),element:b})},emitOptionsNode:function(a,b,c){var d=this;if(a)switch(typeof a){case"object":if(Array.isArray(a)){b.push("[");for(var e=0,f=a.length;f>e;e++)this.emitOptionsNode(a[e],b,c),b.push(",");b.push("]")}else if(a instanceof eb)b.push("select"===a.target?this.emitScopedSelect(a.arg0Value,c):C(null));else if(a instanceof fb&&a.parts[0]instanceof eb){var g=a.parts[0];b.push(B("select"===g.target?this.emitScopedSelect(g.arg0Value,c):C(null),a.parts.slice(1),this.nullableIdentifierAccessTemporary,this.importSafe("requireSupportedForProcessing",Z)))}else a instanceof fb?b.push(a.pathExpression):(b.push("{"),Object.keys(a).forEach(function(e){b.push(H(e)),b.push(":"),d.emitOptionsNode(a[e],b,c),b.push(",")}),b.push("}"));break;default:b.push(C(a))}else b.push(C(null))},findGlobalIdentifierExpressions:function(a,b){b=b||[];var c=this;return Object.keys(a).forEach(function(d){var e=a[d];"object"==typeof e&&(e instanceof fb?e.parts[0]instanceof eb||b.push(e):c.findGlobalIdentifierExpressions(e,b))}),b},formatCodeN:function(){if(this._stage<yb.compile)throw"Illegal: format code at before compilation stage has started";return v.apply(null,arguments)},formatCode:function(a,b){if(this._stage<yb.compile)throw"Illegal: format code at before compilation stage has started";return v(a,b)},gatherBindings:function(){for(var b=-1,c=this,d=-1,e=[],f="[data-win-bind],[data-win-control]",g=this._templateContent.querySelectorAll(f),h=0,i=g.length;i>h;h++){var j=g[h];if(j.isDeclarativeControlContainer&&(h+=j.querySelectorAll(f).length),j.hasAttribute("data-win-bind")){var k=j.getAttribute("data-win-bind"),l=gb(k,a);l.forEach(function(a){if(a.initializer){var e=a.initializer.join("."),f=P(a.initializer);f.render?(Z(f.render),a.template=c.importSafe(e,f),a.pathExpression=c.bindingExpression(a),a.nestedTemplate=++d,a.kind=vb.template):f.winControl&&f.winControl.render?(Z(f.winControl.render),a.template=c.importSafe(e,f.winControl),a.pathExpression=c.bindingExpression(a),a.nestedTemplate=++d,a.kind=vb.template):(a.initializer=c.import(e,f),a.bindToken=++b,a.kind=vb.initializer)}else a.initializer=c.importSafe("templateDefaultInitializer",c._defaultInitializer),a.bindToken=++b,a.kind=vb.initializer;a.elementCapture=c.capture(j),a.bindingText=k}),e.push.apply(e,l)}}var m=d+1;m>0&&(this.async=!0,this._nestedTemplates=this.defineInstance(rb.variable,"nestedTemplates",function(){return D(m)}));var n=b+1;return n>0&&(this._bindTokens=this.defineInstance(rb.variable,"bindTokens",function(){return D(n)}),this._suffix.push(function(){return c.formatCode("{utilities_data}(returnedElement).bindTokens = {bindTokens}",{utilities_data:c._staticVariables.utilities_data,bindTokens:c._bindTokens})})),e},gatherChildren:function(){var a=this;return Array.prototype.map.call(this._templateContent.children,function(b){return a.capture(b)})},gatherControls:function(){for(var b=this,d=0,e=[],f="[data-win-control]",g=this._templateContent.querySelectorAll(f),h=0,i=g.length;i>h;h++){var j=g[h],k=j.getAttribute("data-win-control"),l=c._getMemberFiltered(k.trim(),a,Z);if(l){var m=j.getAttribute("data-win-options")||C({}),n=l.length>2;n&&(d++,this.async=!0);var o=l.isDeclarativeControlContainer;o&&("function"==typeof o&&(o=this.import(k+"_isDeclarativeControlContainer",o)),j.isDeclarativeControlContainer=o,h+=j.querySelectorAll(f).length);var p={elementCapture:this.capture(j),name:k,SafeConstructor:this.importSafe(k,l),async:n,optionsText:C(m),optionsParsed:db(m),isDeclarativeControlContainer:o};e.push(p);var q=this.findGlobalIdentifierExpressions(p.optionsParsed);q.forEach(function(a){a.pathExpression=b.globalExpression(a.parts)})}}return d>0&&(this._controlCounter=this.defineInstance(rb.variable,"controlCounter",function(){return C(d+1)})),e},generateElementCaptureAccess:function(a,b,c){if(c){var d=""+b=="0"?"":" + "+b;return this.formatCodeN("{0}.children[startIndex{1}]",a,d)}return this.formatCodeN("{0}.children[{1}]",a,b)},generateNormalAccess:function(a,b,c,d,e){if(a.indexOf(this.nullableIdentifierAccessTemporary)>=0){var f;return f=e?"{left} && {filter}({temp}{right})":"{left} && ({temp} = {filter}({temp}{right}))",this.formatCode(f,{temp:this.nullableIdentifierAccessTemporary,left:a,right:A([b]),filter:d})}var f;return f=e?"({temp} = {left}) && {filter}({temp}{right})":"({temp} = {left}) && ({temp} = {filter}({temp}{right}))",this.formatCode(f,{temp:this.nullableIdentifierAccessTemporary,left:a,right:A([b]),filter:d})},generateOptionsLiteral:function(a,b){var c=[];return this.emitOptionsNode(a,c,b),c.join(" ")},generateDebugBreak:function(){if(this._debugBreak){var a=this.defineStatic(tb.variable,"debugCounter",function(){return C(0)});return this.formatCodeN("if (++{0} === 1) {{ debugger; }}",a)}return""},globalExpression:function(a){return this._globalCSE.createPathExpression(a,a.join("_"))},"import":function(a,b){return this.importSafe(a,Z(b))},importSafe:function(a,b){var c=this,d=this.defineStatic(tb.import,a,function(){return c.formatCodeN("({0}{1})",xb,A([a]))});if(d.import&&d.import!==b)throw"Duplicate import: '"+a+"'";return d.import=b,d},importAll:function(a){return Object.keys(a).forEach(function(b){Z(a[b])}),this.importAllSafe(a)},importAllSafe:function(a){var b=this,c=Object.keys(a).reduce(function(c,d){return c[d]=b.importSafe(d,a[d]),c},{});return c},link:function(a){if(this._stage>yb.link)throw"Illegal: once we have moved past link we cannot revist it";this._stage=yb.link;var b=this,c=L(this._staticVariables).filter(function(a){return b._staticVariables[a].kind===tb.import}).reduce(function(a,c){return a[c]=b._staticVariables[c].import,a},{}),d=M(this._staticVariables);return new Function(xb,this.formatCode(Kb,{static_variable_declarations:z(d),static_variable_definitions:y(d.map(function(a){return a.definition()})),body:a.trim()}))(c)},lower:function(){if(this._stage>yb.lower)throw"Illegal: once we have moved past lower we cannot revist it";this._stage=yb.lower,this._captureCSE.lower(),this._dataCSE.lower(),this._globalCSE.lower()},markBindingAsError:function(a){a&&(a.kind=vb.error,this.markBindingAsError(a.original))},oneTimeTextBinding:function(a){var b=this,c=this.oneTimeTextBindingAnalyze(a);if(c){var d;a.original&&(d=a.original.initialValue);var e=this.createTextBindingHole(a.elementCapture.element.tagName,c.attribute,++this._textBindingId);switch(a.textBindingId=e,a.kind=vb.text,a.elementCapture.refCount--,a.definition=function(){var c;return c=d?"{htmlEscape}({initialValue})":"{htmlEscape}({getter})",b.formatCode(c,{htmlEscape:b._staticVariables.htmlEscape,getter:a.value(),initialValue:d})},c.kind){case wb.attribute:a.elementCapture.element.setAttribute(c.attribute,e);break;case wb.booleanAttribute:a.elementCapture.element.setAttribute(c.attribute,e);{a.definition}a.definition=function(){var e;return e=d?'({initialValue} ? {attribute} : "")':'({value} ? {attribute} : "")',b.formatCode(e,{value:a.value(),attribute:C(c.attribute),initialValue:d})},this._htmlProcessors.push(function(a){return a.replace(new RegExp(c.attribute+'="'+e+'"',"i"),e)});break;case wb.textContent:a.elementCapture.element.textContent=e;break;case wb.inlineStyle:var f=a.elementCapture.element;if(!f.msReplaceStyle){f.msReplaceStyle=f.getAttribute("style")||"",""!==f.msReplaceStyle&&";"!==f.msReplaceStyle[f.msReplaceStyle.length-1]&&(f.msReplaceStyle=f.msReplaceStyle+";"),f.setAttribute("style","msReplaceStyle:'"+e+"'");var g=f.getAttribute("style");this._htmlProcessors.push(function(a){return a.replace(g,f.msReplaceStyle)})}f.msReplaceStyle=f.msReplaceStyle+c.property+":"+e+";";break;default:throw"NYI"}}},oneTimeTextBindingAnalyze:function(a){var b=a.elementCapture.element,c=b.tagName,d=a.destination[0];switch(c){case"A":switch(d){case"href":return{kind:wb.attribute,attribute:d}}break;case"IMG":switch(d){case"alt":case"src":case"width":case"height":return{kind:wb.attribute,attribute:d}}break;case"SELECT":switch(d){case"disabled":case"multiple":case"required":return{kind:wb.booleanAttribute,attribute:d};case"size":return{kind:wb.attribute,attribute:d}}break;case"OPTION":switch(d){case"label":case"value":return{kind:wb.attribute,attribute:d};case"disabled":case"selected":return{kind:wb.booleanAttribute,attribute:d}}break;case"INPUT":switch(d){case"checked":switch(b.type){case"checkbox":case"radio":return{kind:wb.booleanAttribute,attribute:d}}break;case"disabled":return{kind:wb.booleanAttribute,attribute:d};case"max":case"maxLength":case"min":case"step":case"value":return{kind:wb.attribute,attribute:d};case"size":switch(b.type){case"text":case"search":case"tel":case"url":case"email":case"password":return{kind:wb.attribute,attribute:d}}break;case"readOnly":switch(b.type){case"hidden":case"range":case"color":case"checkbox":case"radio":case"file":case"button":break;default:return{kind:wb.attribute,attribute:d}}}break;case"BUTTON":switch(d){case"disabled":return{kind:wb.booleanAttribute,attribute:d};case"value":return{kind:wb.attribute,attribute:d}}break;case"TEXTAREA":switch(d){case"disabled":case"readOnly":case"required":return{kind:wb.booleanAttribute,attribute:d};case"cols":case"maxLength":case"placeholder":case"rows":case"wrap":return{kind:wb.attribute,attribute:d}}}switch(d){case"className":return{kind:wb.attribute,attribute:"class"};case"dir":case"lang":case"name":case"title":case"tabIndex":return{kind:wb.attribute,attribute:d};case"style":if(a.destination.length>1){var e=a.destination[1];if("cssText"===e)return;var f="string"==typeof b.style[e];if(f)return("m"===e[0]&&"s"===e[1]||"webkit"===e.substring(0,6))&&(e="-"+e),e=e.replace(pb,function(a){return"-"+a.toLowerCase()}),{kind:wb.inlineStyle,property:e,attribute:"style"}}break;case"innerText":case"textContent":return{kind:wb.textContent,attribute:"textContent"}}},oneTimeTreeBinding:function(a){if(1===a.destination.length&&"id"===a.destination[0]){if(WinJS.validation)throw new d("WinJS.Binding.IdBindingNotSupported",e._formatString(r.idBindingNotSupported,a.bindingText));return WinJS.log&&WinJS.log(e._formatString(r.idBindingNotSupported,a.bindingText),"winjs binding","error"),void this.markBindingAsError(a)}if(0===a.destination.length)return WinJS.log&&WinJS.log(r.cannotBindToThis,"winjs binding","error"),void this.markBindingAsError(a);var b,c=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.original&&(b=a.pathExpression,a.original.initialValue=b),a.kind=vb.tree,a.definition=function(){var d;return d=b?"({targetPath} || {{}}){prop} = {initialValue}":"({targetPath} || {{}}){prop} = {sourcePath}",c.formatCode(d,{targetPath:B(a.elementCapture,a.destination.slice(0,-1),c.nullableIdentifierAccessTemporary,c.importSafe("targetSecurityCheck",u)),prop:A(a.destination.slice(-1)),sourcePath:a.value(),initialValue:b})}},optimize:function(){if(this._stage>yb.optimze)throw"Illegal: once we have moved past link we cannot revist it";this._stage=yb.optimze;for(var a=0;a<this._bindings.length;a++){var b=this._bindings[a];if(!b.template)switch(b.initializer.import){case T:var c=N(b,{kind:vb.tree,initializer:this.importSafe("init_oneTime",U),original:b});c.elementCapture.refCount++,this.oneTimeTreeBinding(c),this._bindings.splice(a,0,c),b.delayable=!0,a++;break;case V:var c=N(b,{kind:vb.tree,initializer:this.importSafe("init_setAttributeOneTime",W),original:b});c.elementCapture.refCount++,this.setAttributeOneTimeTreeBinding(c),this._bindings.splice(a,0,c),b.delayable=!0,a++;break;case U:this.oneTimeTreeBinding(b);break;case W:this.setAttributeOneTimeTreeBinding(b);break;case X:this.addClassOneTimeTreeBinding(b);break;default:b.initializer&&(b.delayable=!!b.initializer.import.delayable)}}if(this._optimizeTextBindings){for(var d={},a=0;a<this._bindings.length;a++){var b=this._bindings[a];if(!b.template&&b.kind!==vb.error){switch(b.initializer.import){case U:this.oneTimeTextBinding(b);break;case W:this.setAttributeOneTimeTextBinding(b);break;case X:this.addClassOneTimeTextBinding(b)}b.textBindingId&&(d[b.textBindingId]=b)}}if(Object.keys(d).length){var e=this._templateContent.innerHTML;e=this._htmlProcessors.reduce(function(a,b){return b(a)},e);for(var f=e.split(this._textBindingRegex),a=1;a<f.length;a+=2){var b=d[f[a]];f[a]=b.definition}this._html=function(){var a=f.map(function(a){return"string"==typeof a?C(a):a()}).join(" + ");return K(a)}}}},prettify:function(a){var b=a.split("\n");return b.filter(function(a){return!ob.test(a)}).join("\n")},setAttributeOneTimeTextBinding:function(a){var b,c=this,d=a.destination[0],e=this.createTextBindingHole(a.elementCapture.element.tagName,d,++this._textBindingId);a.original&&(b=a.original.initialValue),a.textBindingId=e,a.kind=vb.text,a.elementCapture.element.setAttribute(d,e),a.elementCapture.refCount--,a.definition=function(){var d;return d=b?"{htmlEscape}({initialValue})":"{htmlEscape}({value})",c.formatCode(d,{htmlEscape:c._staticVariables.htmlEscape,initialValue:b,value:a.value()})}},setAttributeOneTimeTreeBinding:function(a){if(1===a.destination.length&&"id"===a.destination[0]){if(WinJS.validation)throw new d("WinJS.Binding.IdBindingNotSupported",e._formatString(r.idBindingNotSupported,a.bindingText));return WinJS.log&&WinJS.log(e._formatString(r.idBindingNotSupported,a.bindingText),"winjs binding","error"),void this.markBindingAsError(a)}if(1!==a.destination.length||!a.destination[0])return WinJS.log&&WinJS.log(r.attributeBindingSingleProperty,"winjs binding","error"),void this.markBindingAsError(a);var b,c=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.original&&(b=this.defineInstance(rb.variable,"",a.value),a.original.initialValue=b),a.kind=vb.tree,a.definition=function(){var d;return d=b?'{element}.setAttribute({attribute}, "" + {initialValue})':'{element}.setAttribute({attribute}, "" + {value})',c.formatCode(d,{element:a.elementCapture,attribute:C(a.destination[0]),initialValue:b,value:a.value()})}}},{_TreeCSE:qb,compile:function(b,c,d){if(!(c instanceof HTMLElement))throw"Illegal";ib("WinJS.Binding.Template:compile"+d.profilerMarkIdentifier+",StartTM");var e=new zb(c,d);e.analyze();var f=e.importAllSafe({Signal:n,global:a,document:document,cancelBlocker:S,promise_as:Y,disposeInstance:s,markDisposable:ab,ui_processAll:bb,binding_processAll:cb,insertAdjacentHTMLUnsafe:$,promise:m,utilities_data:_,requireSupportedForProcessing:Z,htmlEscape:I,scopedSelect:hb,delayedBindingProcessing:t,writeProfilerMark:ib});e.optimize(),e.deadCodeElimination(),e.lower();var g,h;switch(d.target){case"render":g=e.async?Fb:Eb,h=!1;break;case"renderItem":g=e.async?Jb:Hb,h=!0}var i=e.compile(g,f,h),j=e.link(i);return e.done(),ib("WinJS.Binding.Template:compile"+d.profilerMarkIdentifier+",StopTM"),j}}),Ab=R('container.classList.add("win-template");                                                              \nvar html = {html};                                                                                      \n{insertAdjacentHTMLUnsafe}(container, "beforeend", html);                                             \nreturnedElement = {returnedElement};                                                                    \n                                                                                                        \n// Capture Definitions                                                                                  \n{capture_definitions};                                                                                  \n{set_msParentSelectorScope};                                                                            \n                                                                                                        \n'),Bb=R("// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \n// Binding Processing                                                                                   \n{binding_processing};                                                                                   \n                                                                                                        \nvar result = {promise_as}(returnedElement);                                                             \n"),Cb=R('var controlSignal = new {Signal}();                                                                     \nvar controlDone = function () {{ if (--{control_counter} === 0) {{ controlSignal.complete(); }} }};     \ncontrolDone();                                                                                          \n                                                                                                        \n// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \nvar result = controlSignal.promise.then(function () {{                                                  \n    // Binding Processing                                                                               \n    {binding_processing};                                                                               \n    return {promise}.join({nestedTemplates});                                                           \n}}).then(function () {{                                                                                 \n    return returnedElement;                                                                             \n}}).then(null, function (e) {{                                                                          \n    if (typeof e === "object" && e.name === "Canceled") {{ returnedElement.dispose(); }}            \n    return {promise}.wrapError(e);                                                                      \n}});                                                                                                    \n'),Db=R("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result); }});       \n{suffix_statements};                                                                                    \n"),Eb=R('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data); }});                   \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+x(w(4,Ab))+"                                           \n                                                                                                        \n    "+x(w(4,Bb))+"                                      \n    "+x(w(4,Db))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Fb=R('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data, container); }});        \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+x(w(4,Ab))+"                                           \n                                                                                                        \n    "+x(w(4,Cb))+"                                 \n    "+x(w(4,Db))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Gb=R("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result, renderComplete); }});\n{suffix_statements};                                                                                    \n"),Hb=R('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+x(w(8,Ab))+"                                       \n                                                                                                        \n        "+x(w(8,Bb))+"                                  \n        "+x(w(8,Gb))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Ib=R("renderComplete = element.then(function () {{                                                            \n    return itemPromise;                                                                                 \n}}).then(function (item) {{                                                                             \n    return item.ready || item;                                                                          \n}}).then(function (item) {{                                                                             \n    {delayed_binding_processing};                                                                       \n    return element;                                                                                     \n}});                                                                                                    \n"),Jb=R('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+x(w(8,Ab))+"                                       \n                                                                                                        \n        "+x(w(8,Cb))+"                             \n        "+x(w(8,Gb))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Kb=R('"use strict";                                                                                         \n                                                                                                        \n// statics                                                                                              \nvar {static_variable_declarations};                                                                     \n{static_variable_definitions};                                                                          \n                                                                                                        \n// generated template rendering function                                                                \nreturn {body};                                                                                          \n');
return zb})};return b.Namespace.define("WinJS.Binding",s),b.Namespace.defineWithParent(null,null,s)}}),define("WinJS/BindingTemplate",["./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Binding/_Declarative","./BindingTemplate/_DataTemplateCompiler.js","./ControlProcessor","./Fragments","./Promise","./Utilities/_Dispose","./Utilities/_ElementUtilities"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";if(a.document){var l=i._cancelBlocker,m=(c.markSupportedForProcessing,{Template:b.Namespace._lazy(function(){function a(a,b,c){function f(){return k.removeClass(n,"win-loading"),d("WinJS.Binding:templateRender"+a._profilerMarkIdentifier+",StopTM"),p||n}d("WinJS.Binding:templateRender"+a._profilerMarkIdentifier+",StartTM"),1===++a._counter&&(a.debugBreakOnRender||WinJS.Binding.Template._debugBreakOnRender);var m=i.wrap(),n=c||document.createElement(a.element.tagName);k.addClass(n,"win-template"),k.addClass(n,"win-loading");var o,p,q=a,r=n.children.length,s=function(){var a=k.data(n).winBindings;a&&a.forEach(function(a){a.cancel()}),m.cancel()};a.extractChild?o=h.renderCopy(q.href||q.element,document.createElement(q.element.tagName)).then(function(a){var b=a.firstElementChild;return p=b,j.markDisposable(b,s),n.appendChild(b),b}):(j.markDisposable(n,s),o=h.renderCopy(q.href||q.element,n));var t=o.then(function(){function a(){return c(g.processAll).then(function(){return l(b)}).then(function(a){return c(e.processAll,a,!p&&!r,q.bindingCache)}).then(null,function(a){return"object"==typeof a&&"Canceled"===a.name&&(p||n).dispose(),i.wrapError(a)})}var c;if(0===r)c=function(a,b,c,d){return a(p||n,b,c,d)};else{var d=n.children;if(d.length===r+1)c=function(a,b,c,e){return a(d[r],b,c,e)};else{for(var f=[],h=r,j=d.length;j>h;h++)f.push(d[h]);c=function(a,b,c,d){var e=[];return f.forEach(function(f){e.push(a(f,b,c,d))}),i.join(e)}}}for(var k=n.firstElementChild;k;)k.msParentSelectorScope=!0,k=k.nextElementSibling;var o=q.processTimeout;return o?(0>o&&(o=0),i.timeout(o).then(function(){return m=a()})):m=a()}).then(f,function(a){return f(),i.wrapError(a)});return{element:o,renderComplete:t}}return b.Class.define(function(a,b){this._element=a||document.createElement("div"),this._element.winControl=this,this._profilerMarkIdentifier=c._getProfilerMarkIdentifier(this._element),d("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StartTM");var e=this;this._element.renderItem=function(a,b){return e._renderItemImpl(a,b)},b=b||{},this.href=b.href,this.enableRecycling=!!b.enableRecycling,this.processTimeout=b.processTimeout||0,this.bindingInitializer=b.bindingInitializer,this.debugBreakOnRender=b.debugBreakOnRender,this.disableOptimizedProcessing=b.disableOptimizedProcessing,this.extractChild=b.extractChild,this._counter=0,this._compile=!!b._compile,this.href||(this.element.style.display="none"),this.bindingCache={expressions:{}},d("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StopTM")},{_shouldCompile:{get:function(){var a=!0;return a=a&&!WinJS.Binding.Template._interpretAll,a=a&&!this.disableOptimizedProcessing,a&&(a=a&&0===this.processTimeout,a=a&&(!this.href||this.href instanceof HTMLElement),a||WinJS.log&&WinJS.log("Cannot compile templates which use processTimeout or href properties","winjs binding","warn")),a}},bindingInitializer:{get:function(){return this._bindingInitializer},set:function(a){this._bindingInitializer=a,this._reset()}},debugBreakOnRender:{get:function(){return this._debugBreakOnRender},set:function(a){this._debugBreakOnRender=!!a,this._reset()}},disableOptimizedProcessing:{get:function(){return this._disableOptimizedProcessing},set:function(a){this._disableOptimizedProcessing=!!a,this._reset()}},element:{get:function(){return this._element}},extractChild:{get:function(){return this._extractChild},set:function(a){this._extractChild=!!a,this._reset()}},processTimeout:{get:function(){return this._processTimeout||0},set:function(a){this._processTimeout=a,this._reset()}},render:c.markSupportedForProcessing(function(a,b){return this._renderImpl(a,b)}),_renderImpl:function(b,c){if(this._shouldCompile)try{return this._renderImpl=this._compileTemplate({target:"render"}),this._renderImpl(b,c)}catch(d){return i.wrapError(d)}var e=a(this,b,c);return e.element.then(function(){return e.renderComplete})},_renderInterpreted:function(b,c){return a(this,b,c)},renderItem:function(a,b){return this._renderItemImpl(a,b)},_renderItemImpl:function(b,c){if(this._shouldCompile)try{return this._renderItemImpl=this._compileTemplate({target:"renderItem"}),this._renderItemImpl(b)}catch(d){return{element:i.wrapError(d),renderComplete:i.wrapError(d)}}var f=this;if(this.enableRecycling&&!this.bindingCache.elements&&(this.bindingCache.elements={}),this.enableRecycling&&c&&c.msOriginalTemplate===this){var g=this.bindingCache.elements[c.id],h=!0;if(g&&(g.bindings.forEach(function(a){a()}),g.bindings=[],h=!g.nocache),h)return{element:c,renderComplete:b.then(function(a){return e.processAll(c,a.data,!0,f.bindingCache)})}}var j=a(this,b.then(function(a){return a.data}));return j.element=j.element.then(function(a){return a.msOriginalTemplate=f,a}),j},_compileTemplate:function(a){var b=this,c=f._TemplateCompiler.compile(this,this.href||this.element,{debugBreakOnRender:this.debugBreakOnRender||WinJS.Binding.Template._debugBreakOnRender,defaultInitializer:this.bindingInitializer||a.defaultInitializer,disableTextBindingOptimization:a.disableTextBindingOptimization||!1,target:a.target,extractChild:this.extractChild,profilerMarkIdentifier:this._profilerMarkIdentifier}),d=a.resetOnFragmentChange||window.Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.DesignMode&&Windows.ApplicationModel.DesignMode.designModeEnabled;if(d){var e=new k._MutationObserver(function(){b._reset(),e.disconnect()});e.observe(k.data(this.element).docFragment,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}return c},_reset:function(){delete this._renderImpl,delete this._renderItemImpl}},{isDeclarativeControlContainer:{value:!0,writable:!1,configurable:!1},render:{value:function(a,b,c){return new WinJS.Binding.Template(null,{href:a}).render(b,c)}}})})});return b.Namespace.define("WinJS.Binding",m),b.Namespace.defineWithParent(null,null,m)}}),define("WinJS/BindingList/_BindingListDataSource",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Binding/_DomWeakRefTable","../Promise","../Scheduler","../Utilities/_UI"],function(a,b,c,d,e,f,g,h){"use strict";var i={_BindingListDataSource:b.Namespace._lazy(function(){function i(a,b){for(var c=a.length;c-1>b;){var d=a.getItem(++b);if(d)return d.key}return null}function j(a,b){for(;b>0;){var c=a.getItem(--b);if(c)return c.key}return null}function k(a,b){Object.keys(b).forEach(function(c){a.addEventListener(c,b[c])})}function l(a,b){Object.keys(b).forEach(function(c){a.removeEventListener(c,b[c])})}function m(a,b){return b?new C(a,b):new B}function n(a,b,c){return b?new D(a,b,c):new B}function o(a,b,c){return b&&a._annotateWithIndex(b,c)}function p(a,b){return this._list.unshift(b),this.itemFromIndex(0)}function q(a,b,c){var d=this._list.indexOfKey(c);return-1===d?z.noLongerMeaningful:(this._list.splice(d,0,b),this.itemFromIndex(d))}function r(a,b,c){var d=this._list.indexOfKey(c);return-1===d?z.noLongerMeaningful:(d+=1,this._list.splice(d,0,b),this.itemFromIndex(d))}function s(a,b){return this._list.push(b),this.itemFromIndex(this._list.length-1)}function t(a,b){var c=this._list.indexOfKey(a);return-1===c?z.noLongerMeaningful:(this._list.setAt(c,b),this.itemFromIndex(c))}function u(a){var b=this._list.indexOfKey(a);if(-1===b)return z.noLongerMeaningful;var c=0;return this._list.move(b,c),this.itemFromIndex(c)}function v(a,b){var c=this._list.indexOfKey(a),d=this._list.indexOfKey(b);return-1===c||-1===d?z.noLongerMeaningful:(d=d>c?d-1:d,this._list.move(c,d),this.itemFromIndex(d))}function w(a,b){var c=this._list.indexOfKey(a),d=this._list.indexOfKey(b);return-1===c||-1===d?z.noLongerMeaningful:(d=d>=c?d:d+1,this._list.move(c,d),this.itemFromIndex(d))}function x(a){var b=this._list.indexOfKey(a);if(-1===b)return z.noLongerMeaningful;var c=this._list.length-1;return this._list.move(b,c),this.itemFromIndex(c)}function y(a){var b=this._list.indexOfKey(a);return-1===b?z.noLongerMeaningful:(this._list.splice(b,1),f.wrap())}var z={get noLongerMeaningful(){return f.wrapError(new d(h.EditError.noLongerMeaningful))}},A=f.wrap().constructor,B=b.Class.derive(A,function(){this._value=null},{release:function(){},retain:function(){return this}},{supportedForProcessing:!1}),C=b.Class.derive(A,function(a,b){this._value=b,this._listBinding=a},{handle:{get:function(){return this._value.key}},index:{get:function(){return this._value.index}},release:function(){this._listBinding._release(this._value,this._listBinding._list.indexOfKey(this._value.key))},retain:function(){return this._listBinding._addRef(this._value,this._listBinding._list.indexOfKey(this._value.key)),this}},{supportedForProcessing:!1}),D=b.Class.derive(f,function(a,b,c){var d=this;this._item=b,this._listBinding=a,f.call(this,function(e){g.schedule(function(){return a._released?void d.cancel():void e(b)},g.Priority.normal,null,"WinJS.Binding.List."+c)})},{handle:{get:function(){return this._item.key}},index:{get:function(){return this._item.index}},release:function(){this._listBinding._release(this._item,this._listBinding._list.indexOfKey(this._item.key))},retain:function(){return this._listBinding._addRef(this._item,this._listBinding._list.indexOfKey(this._item.key)),this}},{supportedForProcessing:!1}),E=b.Class.define(function(b,d,f,g){this._dataSource=b,this._list=d,this._editsCount=0,this._notificationHandler=f,this._pos=-1,this._retained=[],this._retained.length=d.length,this._retainedKeys={},this._affectedRange=null;var h=null;if(c.hasWinRT&&a.msSetWeakWinRTProperty&&a.msGetWeakWinRTProperty||(h=this),f){var i=function(a,b){var c=e._getWeakRefElement(g)||h;return c?(c["_"+a](b),!0):!1};this._handlers={itemchanged:function j(a){i("itemchanged",a)||d.removeEventListener("itemchanged",j)},iteminserted:function l(a){i("iteminserted",a)||d.removeEventListener("iteminserted",l)},itemmoved:function m(a){i("itemmoved",a)||d.removeEventListener("itemmoved",m)},itemremoved:function n(a){i("itemremoved",a)||d.removeEventListener("itemremoved",n)},reload:function o(){i("reload")||d.removeEventListener("reload",o)}},k(this._list,this._handlers)}},{_itemchanged:function(a){var b=a.detail.key,c=a.detail.index;this._updateAffectedRange(c,"changed");var d=a.detail.newItem,e=this._retained[c];if(e){var f=this._notificationHandler;if(e.index!==c){var g=e.index;e.index=c,f&&f.indexChanged&&f.indexChanged(d.key,c,g)}d=o(this._list,d,c),d._retainedCount=e._retainedCount,this._retained[c]=d,this._retainedKeys[b]=d,this._beginEdits(this._list.length),f&&f.changed&&f.changed(d,e),this._endEdits()}else this._beginEdits(this._list.length),this._endEdits()},_iteminserted:function(a){var b=(a.detail.key,a.detail.index);this._updateAffectedRange(b,"inserted"),this._beginEdits(this._list.length-1),b<=this._pos&&(this._pos=Math.min(this._pos+1,this._list.length));var c=this._retained;if(c.splice(b,0,0),delete c[b],this._shouldNotify(b)||1===this._list.length){var d=this._notificationHandler;d&&d.inserted&&d.inserted(m(this,o(this._list,this._list.getItem(b),b)),j(this._list,b),i(this._list,b))}this._endEdits()},_itemmoved:function(a){var b=(a.detail.key,a.detail.oldIndex),c=a.detail.newIndex;this._updateAffectedRange(b,"moved"),this._updateAffectedRange(c,"moved"),this._beginEdits(this._list.length),(b<this._pos||c<=this._pos)&&(c>this._pos?this._pos=Math.max(-1,this._pos-1):b>this._pos&&(this._pos=Math.min(this._pos+1,this._list.length)));var d=this._retained,e=d.splice(b,1)[0];d.splice(c,0,e),e||(delete d[c],e=o(this._list,this._list.getItem(c),c)),e._moved=!0,this._addRef(e,c),this._endEdits()},_itemremoved:function(a){var b=a.detail.key,c=a.detail.index;this._updateAffectedRange(c,"removed"),this._beginEdits(this._list.length+1),c<this._pos&&(this._pos=Math.max(-1,this._pos-1));var d=this._retained,e=this._retainedKeys,f=c in d;d.splice(c,1),delete e[b];var g=this._notificationHandler;f&&g&&g.removed&&g.removed(b,!1),this._endEdits()},_reload:function(){this._retained=[],this._retainedKeys={};var a=this._notificationHandler;a&&a.reload&&a.reload()},_addRef:function(a,b){b in this._retained?this._retained[b]._retainedCount++:(this._retained[b]=a,this._retainedKeys[a.key]=a,a._retainedCount=1)},_release:function(a,b){var c=this._retained[b];c&&(1===c._retainedCount?(delete this._retained[b],delete this._retainedKeys[c.key]):c._retainedCount--)},_shouldNotify:function(a){var b=this._retained;return a in b||a+1 in b||a-1 in b},_updateAffectedRange:function(a,b){if(this._notificationHandler.affectedRange){var c=a,d="removed"!==b?a+1:a;if(this._affectedRange){switch(b){case"inserted":a<=this._affectedRange.end&&++this._affectedRange.end;break;case"removed":a<this._affectedRange.end&&--this._affectedRange.end;break;case"moved":case"changed":}this._affectedRange.start=Math.min(this._affectedRange.start,c),this._affectedRange.end=Math.max(this._affectedRange.end,d)}else this._affectedRange={start:c,end:d}}},_notifyAffectedRange:function(){this._affectedRange&&(this._notificationHandler&&this._notificationHandler.affectedRange&&this._notificationHandler.affectedRange(this._affectedRange),this._affectedRange=null)},_notifyCountChanged:function(){var a=this._countAtBeginEdits,b=this._list.length;if(a!==b){var c=this._notificationHandler;c&&c.countChanged&&c.countChanged(b,a)}},_notifyIndicesChanged:function(){for(var a=this._retained,b=0,c=a.length;c>b;b++){var d=a[b];if(d&&d.index!==b){var e=b,f=d.index;d.index=e;var g=this._notificationHandler;g&&g.indexChanged&&g.indexChanged(d.key,e,f)}}},_notifyMoved:function(){for(var a=this._retained,b=0,c=a.length;c>b;b++){var d=a[b];if(d&&d._moved&&(d._moved=!1,this._release(d,b),this._shouldNotify(b))){var e=this._notificationHandler;e&&e.moved&&e.moved(m(this,d),j(this._list,b),i(this._list,b))}}},_beginEdits:function(a,b){this._editsCount++;var c=this._notificationHandler;if(1===this._editsCount&&c){if(!b){this._editsCount++;var d=this;g.schedule(function(){d._endEdits()},g.Priority.high,null,"WinJS.Binding.List._endEdits")}c.beginNotifications&&c.beginNotifications(),this._countAtBeginEdits=a}},_endEdits:function(){this._editsCount--;var a=this._notificationHandler;0===this._editsCount&&a&&(this._notifyIndicesChanged(),this._notifyMoved(),this._notifyCountChanged(),this._notifyAffectedRange(),a.endNotifications&&a.endNotifications())},jumpToItem:function(a){var b=this._list.indexOfKey(a.handle);return-1===b?f.wrap(null):(this._pos=b,this.current())},current:function(){return this.fromIndex(this._pos)},previous:function(){return this._pos=Math.max(-1,this._pos-1),this._fromIndex(this._pos,!0,"previous")},next:function(){return this._pos=Math.min(this._pos+1,this._list.length),this._fromIndex(this._pos,!0,"next")},releaseItem:function(a){a.release?a.release():this._release(a,this._list.indexOfKey(a.key))},release:function(){this._notificationHandler&&l(this._list,this._handlers),this._notificationHandler=null,this._dataSource._releaseBinding(this),this._released=!0},first:function(){return this.fromIndex(0)},last:function(){return this.fromIndex(this._list.length-1)},fromKey:function(a){var b,c=this._retainedKeys;return b=a in c?c[a]:o(this._list,this._list.getItemFromKey(a),this._list.indexOfKey(a)),m(this,b)},fromIndex:function(a){return this._fromIndex(a,!1,"fromIndex")},_fromIndex:function(a,b,c){var d,e=this._retained;return d=a in e?e[a]:o(this._list,this._list.getItem(a),a),b?n(this,d,c):m(this,d)}},{supportedForProcessing:!1}),F=0,G=b.Class.define(function(b){this._usingWeakRef=c.hasWinRT&&a.msSetWeakWinRTProperty&&a.msGetWeakWinRTProperty,this._bindings={},this._list=b,b.unshift&&(this.insertAtStart=p),b.push&&(this.insertAtEnd=s),b.setAt&&(this.change=t),b.splice&&(this.insertAfter=r,this.insertBefore=q,this.remove=y),b.move&&(this.moveAfter=w,this.moveBefore=v,this.moveToEnd=x,this.moveToStart=u)},{_releaseBinding:function(a){delete this._bindings[a._id]},addEventListener:function(){},removeEventListener:function(){},createListBinding:function(a){var b="ds_"+ ++F,c=new E(this,this._list,a,b);return c._id=b,this._usingWeakRef?(e._createWeakRef(c,b),this._bindings[b]=b):this._bindings[b]=c,c},getCount:function(){return f.wrap(this._list.length)},itemFromKey:function(a){var b=this._list,c=o(b,b.getItemFromKey(a),-1);return Object.defineProperty(c,"index",{get:function(){return b.indexOfKey(a)},enumerable:!1,configurable:!0}),f.wrap(c)},itemFromIndex:function(a){return f.wrap(o(this._list,this._list.getItem(a),a))},list:{get:function(){return this._list}},beginEdits:function(){var a=this._list.length;this._forEachBinding(function(b){b._beginEdits(a,!0)})},endEdits:function(){this._forEachBinding(function(a){a._endEdits()})},_forEachBinding:function(a){if(this._usingWeakRef){var b=[];Object.keys(this._bindings).forEach(function(c){var d=e._getWeakRefElement(c);d?a(d):b.push(c)});for(var c=0,d=b.length;d>c;c++)delete this._bindings[b[c]]}else{var f=this;Object.keys(this._bindings).forEach(function(b){a(f._bindings[b])})}},invalidateAll:function(){return f.wrap()},moveAfter:void 0,moveBefore:void 0,moveToEnd:void 0,moveToStart:void 0},{supportedForProcessing:!1});return G})};return b.Namespace.define("WinJS.Binding",i),b.Namespace.defineWithParent(null,null,i)}),define("WinJS/BindingList",["./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Resources","./Binding/_Data","./BindingList/_BindingListDataSource"],function(a,b,c,d,e,f,g){"use strict";function h(a){return Array.prototype.slice.call(a,0)}function i(a){return{handle:a.handle,key:a.key,data:a.data,groupKey:a.groupKey,groupSize:a.groupSize,firstItemKey:a.firstItemKey,firstItemIndexHint:a.firstItemIndexHint}}function j(a){return void 0===a?void 0:+a}function k(a,b){var c=a.length;if(1>=c)return a;var d=c/2>>>0,e=k(a.slice(0,d),b),f=k(a.slice(d),b);return l(e,f,b)}function l(a,b,c){for(var d=[];a.length&&b.length;){var e=c(a[0],b[0]);d.push(0>=e?a.shift():b.shift())}return a.length&&d.push.apply(d,a),b.length&&d.push.apply(d,b),d}var m={get sparseArrayNotSupported(){return e._getWinJSString("base/sparseArrayNotSupported").value},get illegalListLength(){return e._getWinJSString("base/illegalListLength").value}},n=d._createEventProperty,o={},p=a.Namespace.defineWithParent(null,null,{ListBase:a.Namespace._lazy(function(){var b=a.Class.define(null,{_annotateWithIndex:function(a,b){var c=i(a);return c.index=b,c},onitemchanged:n("itemchanged"),oniteminserted:n("iteminserted"),onitemmoved:n("itemmoved"),onitemmutated:n("itemmutated"),onitemremoved:n("itemremoved"),onreload:n("reload"),_notifyItemChanged:function(a,b,c,d,e,f){this._listeners&&this._listeners.itemchanged&&this.dispatchEvent("itemchanged",{key:a,index:b,oldValue:c,newValue:d,oldItem:e,newItem:f})},_notifyItemInserted:function(a,b,c){this._listeners&&this._listeners.iteminserted&&this.dispatchEvent("iteminserted",{key:a,index:b,value:c});var d=this.length;d!==this._lastNotifyLength&&(this.notify("length",d,this._lastNotifyLength),this._lastNotifyLength=d)},_notifyItemMoved:function(a,b,c,d){this._listeners&&this._listeners.itemmoved&&this.dispatchEvent("itemmoved",{key:a,oldIndex:b,newIndex:c,value:d})},_notifyItemMutated:function(a,b,c){this._listeners&&this._listeners.itemmutated&&this.dispatchEvent("itemmutated",{key:a,value:b,item:c})},_notifyItemRemoved:function(a,b,c,d){this._listeners&&this._listeners.itemremoved&&this.dispatchEvent("itemremoved",{key:a,index:b,value:c,item:d});var e=this.length;e!==this._lastNotifyLength&&(this.notify("length",e,this._lastNotifyLength),this._lastNotifyLength=e)},_notifyReload:function(){if(this._listeners&&this._listeners.reload&&this.dispatchEvent("reload"),a!==this._lastNotifyLength){var a=this.length;this.notify("length",a,this._lastNotifyLength),this._lastNotifyLength=a}},_normalizeIndex:function(a){return a=j(a),0>a?this.length+a:a},_notifyMutatedFromKey:function(a){var b=this.getItemFromKey(a);this._notifyItemMutated(a,b.data,b)},notifyReload:function(){this._notifyReload()},getAt:function(a){a=j(a);var b=this.getItem(a);return b&&b.data},_getArray:function(){for(var a=new Array(this.length),b=0,c=this.length;c>b;b++){var d=this.getItem(b);d&&(a[b]=d.data)}return a},_getFromKey:function(a){var b=this.getItemFromKey(a);return b&&b.data},_getKey:function(a){a=j(a);var b=this.getItem(a);return b&&b.key},concat:function(){var a=this._getArray();return a.concat.apply(a,arguments)},join:function(a){return this._getArray().join(a||",")},slice:function(a,b){return this._getArray().slice(a,b)},indexOf:function(a,b){b=j(b),b=Math.max(0,this._normalizeIndex(b)||0);for(var c=b,d=this.length;d>c;c++){var e=this.getItem(c);if(e&&e.data===a)return c}return-1},lastIndexOf:function(a,b){b=j(b);var c=this.length;b=Math.min(this._normalizeIndex(void 0!==b?b:c),c-1);var d;for(d=b;d>=0;d--){var e=this.getItem(d);if(e&&e.data===a)return d}return-1},every:function(a,b){return this._getArray().every(a,b)},filter:function(a,b){return this._getArray().filter(a,b)},forEach:function(a,b){this._getArray().forEach(a,b)},map:function(a,b){return this._getArray().map(a,b)},some:function(a,b){return this._getArray().some(a,b)},reduce:function(a,b){return arguments.length>1?this._getArray().reduce(a,b):this._getArray().reduce(a)},reduceRight:function(a,b){return arguments.length>1?this._getArray().reduceRight(a,b):this._getArray().reduceRight(a)},createFiltered:function(a){return new p.FilteredListProjection(this,a)},createGrouped:function(a,b,c){return new p.GroupedSortedListProjection(this,a,b,c)},createSorted:function(a){return new p.SortedListProjection(this,a)},dataSource:{get:function(){return this._dataSource=this._dataSource||new g._BindingListDataSource(this)}}},{supportedForProcessing:!1});return a.Class.mix(b,f.observableMixin),a.Class.mix(b,d.eventMixin),b}),ListBaseWithMutators:a.Namespace._lazy(function(){return a.Class.derive(p.ListBase,null,{pop:function(){return this.splice(-1,1)[0]},push:function(a){if(1===arguments.length)return this.splice(this.length,0,a),this.length;var b=h(arguments);return b.splice(0,0,this.length,0),this.splice.apply(this,b),this.length},shift:function(){return this.splice(0,1)[0]},unshift:function(a){if(1===arguments.length)this.splice(0,0,a);else{var b=h(arguments);b.splice(0,0,0,0),this.splice.apply(this,b)}return this.length}},{supportedForProcessing:!1})}),ListProjection:a.Namespace._lazy(function(){return a.Class.derive(p.ListBaseWithMutators,null,{_list:null,_myListeners:null,_addListListener:function(a,b){var c={name:a,handler:b.bind(this)};this._myListeners=this._myListeners||[],this._myListeners.push(c),this._list.addEventListener(a,c.handler)},dispose:function(){var a=this._list,b=this._myListeners;this._myListeners=[];for(var c=0,d=b.length;d>c;c++){var e=b[c];a.removeEventListener(e.name,e.handler)}this._list=new r.List,this._listReload()},getItemFromKey:function(a){return this._list.getItemFromKey(a)},move:function(a,b){a=j(a),b=j(b),a===b||0>a||0>b||a>=this.length||b>=this.length||(a=this._list.indexOfKey(this._getKey(a)),b=this._list.indexOfKey(this._getKey(b)),this._list.move(a,b))},_notifyMutatedFromKey:function(a){this._list._notifyMutatedFromKey(a)},splice:function(a){a=j(a),a=Math.max(0,this._normalizeIndex(a));var b=h(arguments);return a===this.length?(b[0]=this._list.length,this._list.splice.apply(this._list,b)):(b[0]=this._getKey(a),this._spliceFromKey.apply(this,b))},_setAtKey:function(a,b){this._list._setAtKey(a,b)}},{supportedForProcessing:!1})}),FilteredListProjection:a.Namespace._lazy(function(){return a.Class.derive(p.ListProjection,function(a,b){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._filter=b,this._initFilteredKeys()},{_filter:null,_filteredKeys:null,_initFilteredKeys:function(){for(var a=this._filter,b=this._list,c=[],d=0,e=b.length;e>d;d++){var f=b.getItem(d);f&&a(f.data)&&c.push(f.key)}this._filteredKeys=c},_findInsertionPosition:function(a,b){for(var c,d=this._filter;--b>=0;){var e=this._list.getItem(b);if(e&&d(e.data)){c=e.key;break}}var f=this._filteredKeys,g=c?f.indexOf(c)+1:0;return g},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.oldValue,e=a.detail.newValue,f=a.detail.oldItem,g=a.detail.newItem,h=this._filter,i=h(d),j=h(e);if(i&&j){var k=this._filteredKeys,l=k.indexOf(b);this._notifyItemChanged(b,l,d,e,f,g)}else i&&!j?this._listItemRemoved({detail:{key:b,index:c,value:d,item:f}}):!i&&j&&this._listItemInserted({detail:{key:b,index:c,value:e}})},_listItemInserted:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.value,e=this._filter;if(e(d)){var f=this._findInsertionPosition(b,c),g=this._filteredKeys;g.splice(f,0,b),this._notifyItemInserted(b,f,d)}},_listItemMoved:function(a){var b=a.detail.key,c=a.detail.newIndex,d=a.detail.value,e=this._filteredKeys,f=e.indexOf(b);if(-1!==f){e.splice(f,1);var g=this._findInsertionPosition(b,c);e.splice(g,0,b),this._notifyItemMoved(b,f,g,d)}},_listItemMutated:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._filter,f=this._filteredKeys,g=f.indexOf(b),h=-1!==g,i=e(c);h&&i?this._notifyItemMutated(b,c,d):h&&!i?(f.splice(g,1),this._notifyItemRemoved(b,g,c,d)):!h&&i&&this._listItemInserted({detail:{key:b,index:this._list.indexOfKey(b),value:c}})},_listItemRemoved:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._filteredKeys,f=e.indexOf(b);-1!==f&&(e.splice(f,1),this._notifyItemRemoved(b,f,c,d))},_listReload:function(){this._initFilteredKeys(),this._notifyReload()},length:{get:function(){return this._filteredKeys.length},set:function(a){if(!("number"==typeof a&&a>=0))throw new c("WinJS.Binding.List.IllegalLength",m.illegalListLength);var b=this.length;b>a&&this.splice(a,b-a)}},getItem:function(a){return a=j(a),this.getItemFromKey(this._filteredKeys[a])},indexOfKey:function(a){return this._filteredKeys.indexOf(a)},notifyMutated:function(a){return a=j(a),this._notifyMutatedFromKey(this._filteredKeys[a])},setAt:function(a,b){a=j(a),this._setAtKey(this._filteredKeys[a],b)},_spliceFromKey:function(a,b){if(arguments.length>2){var c=h(arguments);c[1]=0,this._list._spliceFromKey.apply(this._list,c)}var d=[];if(b){for(var e=[],f=this._filteredKeys,g=f.indexOf(a),i=g,j=f.length;j>i&&b>i-g;i++){var a=f[i];e.push(a)}var k=this;e.forEach(function(a){d.push(k._list._spliceFromKey(a,1)[0])})}return d}},{supportedForProcessing:!1})}),SortedListProjection:a.Namespace._lazy(function(){return a.Class.derive(p.ListProjection,function(a,b){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=b,this._initSortedKeys()},{_sortFunction:null,_sortedKeys:null,_initSortedKeys:function(){for(var a=this._list,b=[],c=0,d=a.length;d>c;c++){var e=a.getItem(c);e&&(b[c]=e.key)}var f=this._sortFunction,g=k(b,function(b,c){return b=a.getItemFromKey(b).data,c=a.getItemFromKey(c).data,f(b,c)});this._sortedKeys=g},_findInsertionPos:function(a,b,c,d,e){for(var f=this._sortFunction,g=this._sortedKeys,h=Math.max(0,d||-1),i=Math.min(g.length,e||Number.MAX_VALUE),j=h;i>=h;){j=(h+i)/2>>>0;var k=g[j];if(!k)break;var l=this.getItemFromKey(k),m=f(l.data,c);if(0>m)h=j+1;else{if(0===m)return this._findStableInsertionPos(a,b,h,i,j,c);i=j-1}}return h},_findBeginningOfGroup:function(a,b,c,d,e){for(var f=0,g=a;g>=f;){a=(f+g)/2>>>0;var h=d[a],i=c.getItemFromKey(h),j=b(i.data,e);0>j?f=a+1:g=a-1}return f},_findEndOfGroup:function(a,b,c,d,e){for(var f=a,g=d.length;g>=f;){a=(f+g)/2>>>0;var h=d[a];if(!h)return d.length;var i=c.getItemFromKey(h),j=b(i.data,e);0>=j?f=a+1:g=a-1}return f},_findStableInsertionPos:function(a,b,c,d,e,f){var g=this._list,h=g.length,i=this._sortFunction,j=this._sortedKeys;if(h/2>b){for(var k=b-1;k>=0;k--){var l=g.getItem(k);if(0===i(l.data,f))return h-c>d?j.indexOf(l.key,c)+1:j.lastIndexOf(l.key,d)+1}return this._findBeginningOfGroup(e,i,g,j,f)}for(var k=b+1;h>k;k++){var l=g.getItem(k);if(0===i(l.data,f))return h-c>d?j.indexOf(l.key,c):j.lastIndexOf(l.key,d)}return this._findEndOfGroup(e,i,g,j,f)},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.newValue,d=a.detail.oldValue,e=this._sortFunction;if(0===e(d,c)){var f=this.indexOfKey(b);this._notifyItemChanged(b,f,d,c,a.detail.oldItem,a.detail.newItem)}else this._listItemRemoved({detail:{key:b,index:a.detail.index,value:a.detail.oldValue,item:a.detail.oldItem}}),this._listItemInserted({detail:{key:b,index:a.detail.index,value:a.detail.newValue}})},_listItemInserted:function(a,b,c){var d=a.detail.key,e=a.detail.index,f=a.detail.value,g=this._findInsertionPos(d,e,f,b,c);this._sortedKeys.splice(g,0,d),this._notifyItemInserted(d,g,f)},_listItemMoved:function(a,b,c){var d=a.detail.key,e=a.detail.newIndex,f=a.detail.value,g=this._sortedKeys,h=g.indexOf(d,b);g.splice(h,1);var i=this._findInsertionPos(d,e,f,b,c);g.splice(i,0,d),i!==h&&this._notifyItemMoved(d,h,i,f)},_listItemMutated:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._list.indexOfKey(b),f=this._sortedKeys.indexOf(b);this._sortedKeys.splice(f,1);var g=this._findInsertionPos(b,e,c);return this._sortedKeys.splice(f,0,b),f===g?void this._notifyItemMutated(b,c,d):(this._listItemRemoved({detail:{key:b,index:e,value:c,item:d}}),void this._listItemInserted({detail:{key:b,index:e,value:c}}))},_listItemRemoved:function(a,b){var c=a.detail.key,d=a.detail.value,e=a.detail.item,f=this._sortedKeys,g=f.indexOf(c,b);f.splice(g,1),this._notifyItemRemoved(c,g,d,e)},_listReload:function(){this._initSortedKeys(),this._notifyReload()},length:{get:function(){return this._sortedKeys.length},set:function(a){if(!("number"==typeof a&&a>=0))throw new c("WinJS.Binding.List.IllegalLength",m.illegalListLength);var b=this.length;b>a&&this.splice(a,b-a)}},getItem:function(a){return a=j(a),this.getItemFromKey(this._sortedKeys[a])},indexOfKey:function(a){return this._sortedKeys.indexOf(a)},notifyMutated:function(a){a=j(a),this._notifyMutatedFromKey(this._sortedKeys[a])},setAt:function(a,b){a=j(a),this._setAtKey(this._sortedKeys[a],b)},_spliceFromKey:function(a,b){if(arguments.length>2){var c=h(arguments);c[1]=0,this._list._spliceFromKey.apply(this._list,c)}var d=[];if(b){for(var e=[],f=this._sortedKeys,g=f.indexOf(a),i=g,j=f.length;j>i&&b>i-g;i++)e.push(f[i]);var k=this;e.forEach(function(a){d.push(k._list._spliceFromKey(a,1)[0])})}return d}},{supportedForProcessing:!1})}),GroupedSortedListProjection:a.Namespace._lazy(function(){return a.Class.derive(p.SortedListProjection,function(a,b,c,d){this._list=a,this._addListListener("itemchanged",this._listGroupedItemChanged),this._addListListener("iteminserted",this._listGroupedItemInserted),this._addListListener("itemmoved",this._listGroupedItemMoved),this._addListListener("itemmutated",this._listGroupedItemMutated),this._addListListener("itemremoved",this._listGroupedItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=function(a,c){return a=b(a),c=b(c),d?d(a,c):c>a?-1:a===c?0:1},this._groupKeyOf=b,this._groupDataOf=c,this._initSortedKeys(),this._initGroupedItems()},{_groupKeyOf:null,_groupDataOf:null,_groupedItems:null,_initGroupedItems:function(){for(var a={},b=this._list,c=this._groupKeyOf,d=0,e=b.length;e>d;d++){var f=i(b.getItem(d));f.groupKey=c(f.data),a[f.key]=f
}this._groupedItems=a},_groupsProjection:null,_listGroupedItemChanged:function(a){var b=a.detail.key,c=a.detail.oldValue,d=a.detail.newValue,e=this._groupedItems,f=e[b],g=i(f);g.data=d,g.groupKey=this._groupKeyOf(d),e[b]=g;var h;f.groupKey===g.groupKey?(h=this.indexOfKey(b),this._notifyItemChanged(b,h,c,d,f,g)):(h=a.detail.index,this._listItemChanged({detail:{key:b,index:h,oldValue:c,newValue:d,oldItem:f,newItem:g}}))},_listGroupedItemInserted:function(a){var b=a.detail.key,c=a.detail.value,d=this._groupKeyOf(c);this._groupedItems[b]={handle:b,key:b,data:c,groupKey:d};var e,f;if(this._groupsProjection){var g=this._groupsProjection._groupItems[d];g&&(e=g.firstItemIndexHint,f=e+g.groupSize)}this._listItemInserted(a,e,f)},_listGroupedItemMoved:function(a){var b,c,d=this._groupedItems[a.detail.key].groupKey;if(this._groupsProjection){var e=this._groupsProjection._groupItems[d];b=e.firstItemIndexHint,c=b+e.groupSize}this._listItemMoved(a,b,c)},_listGroupedItemMutated:function(a){var b=a.detail.key,c=a.detail.value,d=this._groupedItems,e=d[b],f=this._groupKeyOf(c);if(e.groupKey===f)this._notifyItemMutated(b,c,e);else{var g=i(e);g.groupKey=f,d[b]=g;var h=this._list.indexOfKey(b);this._listItemRemoved({detail:{key:b,index:h,value:c,item:e}}),this._listItemInserted({detail:{key:b,index:h,value:c}})}},_listGroupedItemRemoved:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.value,e=this._groupedItems,f=e[b];delete e[b];var g,h;if(this._groupsProjection){var i=this._groupsProjection._groupItems[f.groupKey];g=i.firstItemIndexHint,h=g+i.groupSize}this._listItemRemoved({detail:{key:b,index:c,value:d,item:f}},g,h)},_listReload:function(){this._initGroupedItems(),p.SortedListProjection.prototype._listReload.call(this)},groups:{get:function(){return null===this._groupsProjection&&(this._groupsProjection=new p.GroupsListProjection(this,this._groupKeyOf,this._groupDataOf)),this._groupsProjection}},getItemFromKey:function(a){return this._groupedItems[a]}},{supportedForProcessing:!1})}),GroupsListProjection:a.Namespace._lazy(function(){return a.Class.derive(p.ListBase,function(a,b,c){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._groupKeyOf=b,this._groupDataOf=c,this._initGroupKeysAndItems()},{_list:null,_addListListener:function(a,b){this._list.addEventListener(a,b.bind(this))},_groupDataOf:null,_groupKeyOf:null,_groupOf:function(a){return this.getItemFromKey(this._groupKeyOf(a.data))},_groupKeys:null,_groupItems:null,_initGroupKeysAndItems:function(){for(var a,b=this._groupDataOf,c=this._list,d={},e=[],f=null,g=null,h=0,i=c.length;i>h;h++){var j=c.getItem(h),k=j.groupKey;k!==f?(g&&(g.groupSize=a),a=1,f=k,g={handle:k,key:k,data:b(j.data),firstItemKey:j.key,firstItemIndexHint:h},d[k]=g,e.push(k)):a++}g&&(g.groupSize=a),this._groupKeys=e,this._groupItems=d},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.newValue,e=this._list,f=e.getItemFromKey(b).groupKey,g=this._groupItems,h=g[f];if(h.firstItemIndexHint===c){var j=i(h);j.data=this._groupDataOf(d),j.firstItemKey=b,g[f]=j,this._notifyItemChanged(f,this._groupKeys.indexOf(f),h.data,j.data,h,j)}},_listItemInserted:function(a){var b,c,d,e,f,g=a.detail.key,h=a.detail.index,j=a.detail.value,k=this._list,l=k.getItemFromKey(g).groupKey,m=this._groupItems,n=this._groupKeys,o=m[l];if(o)c=o,d=i(c),d.groupSize++,c.firstItemIndexHint===h&&(d.groupData=this._groupDataOf(j),d.firstItemKey=g,d.firstItemIndexHint=h),m[l]=d,b=n.indexOf(l),this._notifyItemChanged(l,b,c.data,d.data,c,d);else{for(e=0,f=n.length;f>e&&(o=m[n[e]],!(o.firstItemIndexHint>=h));e++);b=e,o={handle:l,key:l,data:this._groupDataOf(j),groupSize:1,firstItemKey:g,firstItemIndexHint:h},n.splice(b,0,l),m[l]=o,this._notifyItemInserted(l,b,o.data)}for(e=b+1,f=n.length;f>e;e++)c=m[n[e]],d=i(c),d.firstItemIndexHint++,m[d.key]=d,this._notifyItemChanged(d.key,e,c.data,d.data,c,d)},_listItemMoved:function(a){var b=a.detail.key,c=a.detail.oldIndex,d=a.detail.newIndex,e=this._list,f=e.getItemFromKey(b).groupKey,g=this._groupItems,h=g[f];if(h.firstItemIndexHint===d||h.firstItemIndexHint===c){var j=e.getItem(h.firstItemIndexHint),k=i(h);k.data=this._groupDataOf(j.data),k.firstItemKey=j.key,g[f]=k,this._notifyItemChanged(f,this._groupKeys.indexOf(f),h.data,k.data,h,k)}},_listItemRemoved:function(a){var b,c,d=a.detail.index,e=a.detail.item,f=this._groupItems,g=this._groupKeys,h=e.groupKey,j=f[h],k=g.indexOf(h);if(1===j.groupSize)g.splice(k,1),delete f[h],this._notifyItemRemoved(h,k,j.data,j),k--;else{if(b=j,c=i(b),c.groupSize--,b.firstItemIndexHint===d){var l=this._list.getItem(d);c.data=this._groupDataOf(l.data),c.firstItemKey=l.key}f[h]=c,this._notifyItemChanged(h,k,b.data,c.data,b,c)}for(var m=k+1,n=g.length;n>m;m++)b=f[g[m]],c=i(b),c.firstItemIndexHint--,f[c.key]=c,this._notifyItemChanged(c.key,m,b.data,c.data,b,c)},_listReload:function(){this._initGroupKeysAndItems(),this._notifyReload()},length:{get:function(){return this._groupKeys.length}},getItem:function(a){return a=j(a),this._groupItems[this._groupKeys[a]]},getItemFromKey:function(a){return this._groupItems[a]},indexOfKey:function(a){return this._groupKeys.indexOf(a)}},{supportedForProcessing:!1})})}),q={List:a.Namespace._lazy(function(){return a.Class.derive(p.ListBaseWithMutators,function(a,b){if(this._currentKey=0,this._keys=null,this._keyMap={},b=b||o,this._proxy=b.proxy,this._binding=b.binding,this._proxy){if(Object.keys(a).length!==a.length)throw new c("WinJS.Binding.List.NotSupported",m.sparseArrayNotSupported);this._data=a,this._currentKey=a.length}else if(a){for(var d=this._keyMap,e=0,g=0,h=a.length;h>g;g++)if(g in a){var i=a[g];this._binding&&(i=f.as(i));var j=e.toString();e++,d[j]={handle:j,key:j,data:i}}e!==g&&this._initializeKeys(),this._currentKey=e}},{_currentKey:0,_keys:null,_keyMap:null,_modifyingData:0,_initializeKeys:function(){if(!this._keys){var a=[];if(this._data){for(var b=this._keyMap,c=this._data,d=0,e=c.length;e>d;d++)if(d in c){var g=d.toString();if(a[d]=g,!(g in b)){var h=c[d];this._binding&&(h=f.as(h)),b[g]={handle:g,key:g,data:h}}}}else Object.keys(this._keyMap).forEach(function(b){a[b>>>0]=b});this._keys=a}},_lazyPopulateEntry:function(a){if(this._data&&a in this._data){var b=this._data[a];this._binding&&(b=f.as(b));var c=a.toString(),d={handle:c,key:c,data:b};return this._keyMap[d.key]=d,d}},_assignKey:function(){return(++this._currentKey).toString()},length:{get:function(){return this._data?this._data.length:this._keys?this._keys.length:this._currentKey},set:function(a){if(!("number"==typeof a&&a>=0))throw new c("WinJS.Binding.List.IllegalLength",m.illegalListLength);this._initializeKeys();var b=this.length;if(b>a?this.splice(a,b-a):a=b,this._data){this._modifyingData++;try{this._data.length=a}finally{this._modifyingData--}}this._keys&&(this._keys.length=a)}},getItem:function(a){var b,c;return a=j(a),this._keys?(c=this._keys[a],b=c&&this._keyMap[c]):(c=a.toString(),b=this._keyMap[c]||this._lazyPopulateEntry(a)),b},getItemFromKey:function(a){var b;return b=this._keys||!this._data?this._keyMap[a]:this.getItem(a>>>0)},indexOfKey:function(a){var b=-1;if(this._keys)b=this._keys.indexOf(a);else{var c=a>>>0;c<this._currentKey&&(b=c)}return b},move:function(a,b){if(a=j(a),b=j(b),this._initializeKeys(),!(a===b||0>a||0>b||a>=this.length||b>=this.length)){if(this._data){this._modifyingData++;try{var c=this._data.splice(a,1)[0];this._data.splice(b,0,c)}finally{this._modifyingData--}}var d=this._keys.splice(a,1)[0];this._keys.splice(b,0,d),this._notifyItemMoved(d,a,b,this.getItemFromKey(d).data)}},notifyMutated:function(a){a=j(a);var b=this._keys?this._keys[a]:a.toString();this._notifyMutatedFromKey(b)},setAt:function(a,b){a=j(a),this._initializeKeys();var c=this.length;if(a===c)this.push(b);else if(c>a){if(this._data){this._modifyingData++;try{this._data[a]=b}finally{this._modifyingData--}}if(this._binding&&(b=f.as(b)),a in this._keys){var d=this._keys[a],e=this._keyMap[d],g=i(e);g.data=b,this._keyMap[d]=g,this._notifyItemChanged(d,a,e.data,b,e,g)}}},_setAtKey:function(a,b){this.setAt(this.indexOfKey(a),b)},reverse:function(){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.reverse()}finally{this._modifyingData--}}return this._keys.reverse(),this._notifyReload(),this},sort:function(a){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.sort(a)}finally{this._modifyingData--}}var b=this;return this._keys.sort(function(c,d){return c=b._keyMap[c],d=b._keyMap[d],a?a(c.data,d.data):(c=(c&&c.data||"").toString(),d=(c&&d.data||"").toString(),d>c?-1:c===d?0:1)}),this._notifyReload(),this},pop:function(){if(0!==this.length){this._initializeKeys();var a=this._keys.pop(),b=this._keyMap[a],c=b&&b.data;if(this._data){this._modifyingData++;try{this._data.pop()}finally{this._modifyingData--}}return delete this._keyMap[a],this._notifyItemRemoved(a,this._keys.length,c,b),c}},push:function(){this._initializeKeys();for(var a=arguments.length,b=0;a>b;b++){var c=arguments[b];this._binding&&(c=f.as(c));var d=this._assignKey();if(this._keys.push(d),this._data){this._modifyingData++;try{this._data.push(arguments[b])}finally{this._modifyingData--}}this._keyMap[d]={handle:d,key:d,data:c},this._notifyItemInserted(d,this._keys.length-1,c)}return this.length},shift:function(){if(0!==this.length){this._initializeKeys();var a=this._keys.shift(),b=this._keyMap[a],c=b&&b.data;if(this._data){this._modifyingData++;try{this._data.shift()}finally{this._modifyingData--}}return delete this._keyMap[a],this._notifyItemRemoved(a,0,c,b),c}},unshift:function(){this._initializeKeys();for(var a=arguments.length,b=a-1;b>=0;b--){var c=arguments[b];this._binding&&(c=f.as(c));var d=this._assignKey();if(this._keys.unshift(d),this._data){this._modifyingData++;try{this._data.unshift(arguments[b])}finally{this._modifyingData--}}this._keyMap[d]={handle:d,key:d,data:c},this._notifyItemInserted(d,0,c)}return this.length},splice:function(a,b){a=j(a),this._initializeKeys(),a=Math.max(0,this._normalizeIndex(a)),b=Math.max(0,Math.min(b||0,this.length-a));for(var c=[];b;){var d=this._keys[a],e=this._keyMap[d],g=e&&e.data;if(c.push(g),this._keys.splice(a,1),this._data){this._modifyingData++;try{this._data.splice(a,1)}finally{this._modifyingData--}}delete this._keyMap[d],this._notifyItemRemoved(d,a,g,e),--b}if(arguments.length>2)for(var h=2,i=arguments.length;i>h;h++){var k=arguments[h];this._binding&&(k=f.as(k));var l=Math.min(a+h-2,this.length),m=this._assignKey();if(this._keys.splice(l,0,m),this._data){this._modifyingData++;try{this._data.splice(l,0,arguments[h])}finally{this._modifyingData--}}this._keyMap[m]={handle:m,key:m,data:k},this._notifyItemInserted(m,l,k)}return c},_spliceFromKey:function(a){this._initializeKeys();var b=h(arguments);return b[0]=this._keys.indexOf(a),this.splice.apply(this,b)}},{supportedForProcessing:!1})})},r=a.Namespace.defineWithParent(null,null,q);return a.Namespace.define("WinJS.Binding",q),r}),define("WinJS/Res",["./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./ControlProcessor/_OptionsParser","./Promise"],function(a,b,c,d,e,f){"use strict";function g(a,b){a=a||document.body;var b=b||0;if(4>b){if(0===b&&a.getAttribute){var g=a.getAttribute("data-win-res");if(g){var h=e.optionsParser(g);j(a,a,h,b)}}var i="[data-win-res],[data-win-control]",l=a.querySelectorAll(i);if(0===l.length)return f.as(a);for(var n=0,o=l.length;o>n;n++){var p=l[n];if(p.winControl&&p.winControl.constructor&&p.winControl.constructor.isDeclarativeControlContainer){var q=p.winControl.constructor.isDeclarativeControlContainer;"function"==typeof q&&(q=m(q),q(p.winControl,k),n+=p.querySelectorAll(i).length)}if(p.hasAttribute("data-win-res")){var h=e.optionsParser(p.getAttribute("data-win-res"));j(p,p,h,b)}}}else if(WinJS.validation)throw new c("WinJS.Res.NestingExceeded",d._getWinJSString("base/nestingExceeded").value);return f.as(a)}function h(a,b){for(var c=Object.keys(b),d=0,e=c.length;e>d;d++){var f=c[d],g=b[f],h=WinJS.Resources.getString(g);h&&h.empty?WinJS.validation&&i(g):(a.setAttribute(f,h.value),void 0!==h.lang&&void 0!==a.lang&&a.lang!==h.lang&&(a.lang=h.lang))}}function i(a){throw new c("WinJS.Res.NotFound",d._formatString(d._getWinJSString("base/notFound").value,a))}function j(a,b,c,d){var e=Object.keys(c);b=m(b);for(var f=0,k=e.length;k>f;f++){var l=e[f],n=c[l];if("string"==typeof n){var o=WinJS.Resources.getString(n);o&&o.empty?WinJS.validation&&i(n):(b[l]=o.value,void 0!==o.lang&&void 0!==a.lang&&a.lang!==o.lang&&(a.lang=o.lang),"innerHTML"===l&&g(b,d+1))}else a===b&&"attributes"===l?h(a,n):j(a,b[l],n,d)}}function k(a){if(!l)return b.ready().then(function(){return l=!0,g(a)});try{return g(a)}catch(c){return f.wrapError(c)}}var l=!1,m=b.requireSupportedForProcessing,n={processAll:k};return a.Namespace.define("WinJS.Resources",n),a.Namespace.defineWithParent(null,null,n)}),define("WinJS/Pages",["./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./ControlProcessor","./Fragments","./Promise","./Utilities/_Control","./Utilities/_Dispose","./Utilities/_ElementUtilities"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){var b=document.createElement("a");return b.href=a,b.href}function l(a){return document.location.href.toLowerCase()===a.toLowerCase()}function m(a,f){a=k(a);var i=q[a.toLowerCase()];return i||(i=b.Class.define(function(b,f,h,i){var k=this;this._disposed=!1,this.element=b=b||document.createElement("div"),j.addClass(b,"win-disposable"),b.msSourceLocation=a,this.uri=a,this.selfhost=l(a),b.winControl=this,j.addClass(b,"pagecontrol");var m=" uri='"+a+"'"+c._getProfilerMarkIdentifier(this.element);d("WinJS.UI.Pages:createPage"+m+",StartTM");var n=g.wrap().then(function(){return k.load(a)}),o=n.then(function(a){return g.join({loadResult:a,initResult:k.init(b,f)})}).then(function(a){return k.render(b,f,a.loadResult)});this.elementReady=o.then(function(){return b}),this.renderComplete=o.then(function(a){return e.processAll(a).then(function(){return a})}).then(function(){return k.processed(b,f)}).then(function(){return k});var p=function(){h&&h(k),d("WinJS.UI.Pages:createPage"+m+",StopTM")};this.renderComplete.then(p,p),this.renderComplete.then(function(){return i}).then(function(){k.ready(b,f)}).then(null,function(a){return k.error(a)})},r),i=b.Class.mix(i,h.DOMEventMixin),q[a.toLowerCase()]=i),f&&(i=b.Class.mix(i,f)),l(a)&&c.ready(function(){p(a,document.body)}),i}function n(a){a=k(a);var b=q[a.toLowerCase()];return b||(b=m(a)),b}function o(a){a=k(a),f.clearCache(a),delete q[a.toLowerCase()]}function p(a,b,c,d){var e=n(a),f=new e(b,c,null,d);return f.renderComplete}if(a.document){var q={},r={dispose:function(){this._disposed||(this._disposed=!0,i.disposeSubTree(this.element),this.element=null)},load:function(a){return this.selfhost?void 0:f.renderCopy(k(a))},init:function(){},processed:function(){},render:function(a,b,c){return this.selfhost||a.appendChild(c),a},ready:function(){},error:function(a){return g.wrapError(a)}},s={define:m,get:n,_remove:o,render:p};return b.Namespace.define("WinJS.UI.Pages",s),b.Namespace.defineWithParent(null,null,s)}}),define("WinJS/Controls/HtmlControl",["../Core/_Global","../Core/_Base","../Pages"],function(a,b,c){"use strict";if(a.document){var d={HtmlControl:b.Class.define(function(a,b,d){c.render(b.uri,a,b).then(d,function(){d()})})};return b.Namespace.define("WinJS.UI",d),b.Namespace.defineWithParent(null,null,d)}}),define("base",["WinJS/Core","WinJS/Promise","WinJS/_Signal","WinJS/Scheduler","WinJS/Utilities","WinJS/Fragments","WinJS/Application","WinJS/Navigation","WinJS/Animations","WinJS/Binding","WinJS/BindingTemplate","WinJS/BindingList","WinJS/Res","WinJS/Pages","WinJS/ControlProcessor","WinJS/Controls/HtmlControl"],function(){return WinJS.Namespace.define("WinJS.Utilities",{_require:require,_define:define}),WinJS}),require("base")}),WinJS.Utilities._writeProfilerMark("WinJS.2.1 2.0.1.WinJS.2014.6.21 base.js,StopTM");